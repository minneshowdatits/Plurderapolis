<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers</title>
    <meta name="description" content="Minnesota's premier harm reduction resource for the electronic music community. Narcan, drug safety, consent education, and emergency resources.">
    <meta name="keywords" content="harm reduction, Minnesota, rave, electronic music, drug safety, overdose prevention, Narcan, PLUR, Minneapolis, St. Paul">
    <meta name="author" content="PLURderapolis">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://plurderapolis.org/">
    <meta property="og:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="og:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="og:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://plurderapolis.org/">
    <meta property="twitter:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="twitter:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="twitter:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Schema.org markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "PLURderapolis",
      "description": "Harm reduction resource for Minnesota's electronic music community",
      "url": "https://plurderapolis.org",
      "logo": "https://plurderapolis.org/images/logo.png",
      "sameAs": [
        "https://www.instagram.com/plurderapolis",
        "https://www.facebook.com/plurderapolis"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "plurderapolis@gmail.com",
        "contactType": "Customer service"
      }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçë</text></svg>">
    
    <!-- Preload critical font -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Roboto:wght@400;500;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Roboto:wght@400;500;700&display=swap"></noscript>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <style>
        /* Base styles */
        *{box-sizing:border-box;margin:0;padding:0}
        :root {
            --primary: #00f7e0;
            --secondary: #ff69b4;
            --accent1: #bf00bf;
            --accent2: #e051ff;
            --accent3: #00b7ff;
            --accent4: #ff9a7a;
            --accent5: #00c896;
            --accent6: #ffb300;
            --dark-bg: #0d0d0d;
            --card-bg: #3a0052;
            --light-text: #ffffff;
            --medium-text: #cccccc;
        }
        
        /* Subtle Animated Background with Minneapolis Skyline */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .bg-gradient {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(58, 0, 82, 0.2) 0%, transparent 50%),
                       radial-gradient(circle at 80% 20%, rgba(0, 247, 224, 0.1) 0%, transparent 50%),
                       radial-gradient(circle at 40% 40%, rgba(255, 105, 180, 0.08) 0%, transparent 50%);
            animation: gradientShift 20s ease infinite;
        }
        
        .bg-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            animation: float 25s infinite linear;
        }
        
        .pulse-dot {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--primary);
            animation: pulse 6s infinite ease-in-out;
            opacity: 0.5;
        }
        
        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 8%;
            background: linear-gradient(90deg, transparent, rgba(0, 247, 224, 0.05), transparent);
            animation: waveMove 25s infinite linear;
            transform-origin: center bottom;
        }
        
        .wave:nth-child(2) {
            animation-delay: -5s;
            opacity: 0.3;
            height: 6%;
        }
        
        .wave:nth-child(3) {
            animation-delay: -10s;
            opacity: 0.2;
            height: 4%;
        }
        
        /* Minneapolis Skyline */
        .minneapolis-skyline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            z-index: 0;
            overflow: hidden;
        }
        
        .skyline-buildings {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        
        .building {
            background: linear-gradient(to top, #1a003a, #3a0052);
            margin: 0 1px;
            position: relative;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            box-shadow: 0 0 5px rgba(0, 247, 224, 0.1);
            animation: buildingGlow 10s infinite alternate;
        }
        
        /* Specific building shapes for Minneapolis skyline */
        .building-1 { width: 40px; height: 120px; animation-delay: 0s; }
        .building-2 { width: 30px; height: 90px; animation-delay: 0.5s; }
        .building-3 { width: 60px; height: 180px; animation-delay: 1s; } /* IDS Center */
        .building-4 { width: 35px; height: 100px; animation-delay: 1.5s; }
        .building-5 { width: 50px; height: 150px; animation-delay: 2s; } /* Capella Tower */
        .building-6 { width: 45px; height: 130px; animation-delay: 2.5s; }
        .building-7 { width: 55px; height: 160px; animation-delay: 3s; } /* Wells Fargo Center */
        .building-8 { width: 25px; height: 80px; animation-delay: 3.5s; }
        .building-9 { width: 65px; height: 200px; animation-delay: 4s; } /* Foshay Tower */
        .building-10 { width: 30px; height: 110px; animation-delay: 4.5s; }
        
        /* Building windows */
        .building::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 5px;
            right: 5px;
            bottom: 0;
            background-image: 
                linear-gradient(90deg, transparent 10%, rgba(0, 247, 224, 0.05) 10%, rgba(0, 247, 224, 0.05) 20%, transparent 20%),
                linear-gradient(180deg, transparent 10%, rgba(0, 247, 224, 0.05) 10%, rgba(0, 247, 224, 0.05) 20%, transparent 20%);
            background-size: 20px 20px;
            opacity: 0.3;
        }
        
        /* Special building features */
        .building-3::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 10px;
            background: var(--primary);
            border-radius: 50% 50% 0 0;
            box-shadow: 0 0 5px var(--primary);
            animation: antennaGlow 5s infinite alternate;
            opacity: 0.5;
        }
        
        .building-5::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 15px;
            background: var(--secondary);
            border-radius: 50% 50% 0 0;
            box-shadow: 0 0 8px var(--secondary);
            animation: antennaGlow 6s infinite alternate;
            opacity: 0.5;
        }
        
        .building-9::after {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 20px;
            background: var(--accent3);
            border-radius: 50% 50% 0 0;
            box-shadow: 0 0 10px var(--accent3);
            animation: antennaGlow 7s infinite alternate;
            opacity: 0.5;
        }
        
        /* Mississippi River */
        .river {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to bottom, rgba(0, 183, 255, 0.2), rgba(0, 247, 224, 0.05));
            border-top: 1px solid rgba(0, 247, 224, 0.2);
        }
        
        /* Minneapolis Bridge */
        .bridge {
            position: absolute;
            bottom: 20px;
            left: 30%;
            width: 40%;
            height: 10px;
            background: linear-gradient(to bottom, #5d3a7d, #3a0052);
            border-radius: 5px 5px 0 0;
            box-shadow: 0 0 8px rgba(0, 247, 224, 0.2);
        }
        
        .bridge::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 0;
            right: 0;
            height: 15px;
            background: linear-gradient(90deg, transparent 10%, rgba(0, 247, 224, 0.1) 10%, rgba(0, 247, 224, 0.1) 20%, transparent 20%);
            background-size: 20px 15px;
        }
        
        @keyframes gradientShift {
            0% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.05); opacity: 0.7; }
            100% { transform: scale(1); opacity: 0.5; }
        }
        
        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.5); opacity: 0.1; }
        }
        
        @keyframes waveMove {
            0% { transform: translateX(0) skew(0, 3deg); }
            100% { transform: translateX(-50%) skew(0, 3deg); }
        }
        
        @keyframes buildingGlow {
            0% { box-shadow: 0 0 5px rgba(0, 247, 224, 0.1); }
            100% { box-shadow: 0 0 10px rgba(0, 247, 224, 0.2); }
        }
        
        @keyframes antennaGlow {
            0% { opacity: 0.3; }
            100% { opacity: 0.5; }
        }
        
        body{font-family:'Roboto',sans-serif;background:var(--dark-bg);color:var(--light-text);line-height:1.7;overflow-x:hidden;padding-bottom:70px;position:relative}
        
        /* Enhanced Site Title with Minneapolis Theme */
        .site-title{text-align:center;padding:1.5rem 1rem 0.5rem;position:relative;z-index:2;margin-top:0.5rem}
        .site-title h1{font-family:'Montserrat',sans-serif;font-weight:800;font-size:clamp(2rem,6vw,3rem);letter-spacing:0.15em;text-transform:uppercase;background:linear-gradient(90deg,var(--primary) 0%,#a3f7ff 50%,var(--primary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:shineMove 6s linear infinite;filter:drop-shadow(0 0 4px rgba(0,247,224,0.5));margin:0}
        .site-title .tagline{font-family:'Roboto',sans-serif;color:#88e9e3;font-size:1rem;letter-spacing:0.1em;margin-top:0.5rem;font-weight:600;text-transform:uppercase;opacity:0.9}
        
        @keyframes shineMove{0%{background-position:100% 0}100%{background-position:0 0}}

        /* Enhanced Mobile Navigation */
        .mobile-nav-btn{position:fixed;top:12px;left:12px;z-index:1100;cursor:pointer;width:40px;height:40px;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(58,0,82,0.8);border-radius:8px;border:1px solid var(--primary);backdrop-filter:blur(5px)}
        .mobile-nav-btn div{height:3px;background:var(--primary);border-radius:3px;transition:all 0.3s ease;width:24px;margin:2.5px 0}
        .mobile-nav-btn.active div:nth-child(1){transform:rotate(45deg) translate(6px,6px);width:24px}
        .mobile-nav-btn.active div:nth-child(2){opacity:0}
        .mobile-nav-btn.active div:nth-child(3){transform:rotate(-45deg) translate(6px,-6px);width:24px}
        
        .mobile-nav{position:fixed;top:0;left:-100%;width:100%;height:100%;background:rgba(26,0,26,0.95);backdrop-filter:blur(10px);overflow-y:auto;transition:left 0.4s ease;z-index:1000;padding:70px 20px 20px}
        .mobile-nav.active{left:0}
        .mobile-nav-category{margin-bottom:15px}
        .mobile-nav-category h3{font-family:'Montserrat',sans-serif;color:var(--primary);font-size:1.2rem;margin-bottom:8px;padding-bottom:5px;border-bottom:1px solid rgba(0,247,224,0.3);cursor:pointer;display:flex;justify-content:space-between;align-items:center}
        .mobile-nav-category h3 .toggle-icon{transition:transform 0.3s ease}
        .mobile-nav-category.active h3 .toggle-icon{transform:rotate(180deg)}
        .mobile-nav-links{display:grid;grid-template-columns:1fr;gap:6px;max-height:0;overflow:hidden;transition:max-height 0.3s ease}
        .mobile-nav-category.active .mobile-nav-links{max-height:500px}
        .mobile-nav-link{display:flex;align-items:center;padding:10px 12px;background:rgba(58,0,82,0.6);border-radius:6px;text-decoration:none;color:var(--light-text);transition:all 0.3s ease;border-left:3px solid var(--primary);font-size:0.9rem}
        .mobile-nav-link:hover{background:rgba(58,0,82,0.9);transform:translateX(5px)}
        .mobile-nav-link .icon{font-size:1.1rem;margin-right:10px;width:20px;text-align:center}
        
        /* Donate button in mobile nav */
        .donate-button{background:linear-gradient(135deg, var(--secondary), var(--accent1));color:white;padding:12px 15px;border-radius:8px;text-decoration:none;font-weight:bold;margin-top:10px;display:flex;align-items:center;justify-content:center;gap:8px;transition:all 0.3s ease}
        .donate-button:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(255,105,180,0.4)}

        /* Less obtrusive alert banner */
        .rave-alert-wrapper{background-color:rgba(26,26,26,0.9);overflow:hidden;border-top:1px solid #444;border-bottom:1px solid #444;position:relative;height:2rem;display:flex;align-items:center;width:100vw;z-index:2;margin-top:0.5rem;backdrop-filter:blur(4px)}
        .rave-alert-link{display:inline-block;white-space:nowrap;color:var(--secondary);font-size:0.8rem;text-decoration:none;padding-left:100%;animation:scroll-left 20s linear infinite}
        @keyframes scroll-left{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

        /* Grid Layout with Spacing - More compact cards */
        .sections-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.2rem;padding:1.2rem;max-width:1200px;margin:0 auto}
        .section-card{background-color:var(--card-bg);border-radius:8px;padding:1rem;box-shadow:0 0 8px rgba(0,255,255,0.05);position:relative;z-index:1;transition:all 0.3s ease;border-left:3px solid;display:flex;flex-direction:column;height:100%;animation:fadeInUp 0.6s ease-out;margin-bottom:0.8rem}
        @keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}
        
        /* Color assignments for each section */
        .section-card:nth-child(1){border-left-color:var(--accent1);animation-delay:0.1s}
        .section-card:nth-child(2){border-left-color:var(--accent2);animation-delay:0.2s}
        .section-card:nth-child(3){border-left-color:var(--accent3);animation-delay:0.3s}
        .section-card:nth-child(4){border-left-color:var(--accent4);animation-delay:0.4s}
        .section-card:nth-child(5){border-left-color:var(--accent5);animation-delay:0.5s}
        .section-card:nth-child(6){border-left-color:var(--accent6);animation-delay:0.6s}
        .section-card:nth-child(7){border-left-color:var(--accent1);animation-delay:0.7s}
        .section-card:nth-child(8){border-left-color:var(--accent2);animation-delay:0.8s}
        
        .card-header{display:flex;justify-content:space-between;align-items:center;padding:0.4rem 0;margin-bottom:0.6rem;cursor:pointer;position:relative}
        .section-card h2{font-family:'Montserrat',sans-serif;margin:0;font-size:1.1rem;font-weight:700;flex:1;padding-right:10px}
        
        /* Different header colors for each section */
        .section-card:nth-child(1) h2{color:var(--accent1)}
        .section-card:nth-child(2) h2{color:var(--accent2)}
        .section-card:nth-child(3) h2{color:var(--accent3)}
        .section-card:nth-child(4) h2{color:var(--accent4)}
        .section-card:nth-child(5) h2{color:var(--accent5)}
        .section-card:nth-child(6) h2{color:var(--accent6)}
        .section-card:nth-child(7) h2{color:var(--accent1)}
        .section-card:nth-child(8) h2{color:var(--accent2)}
        
        /* Section summary that shows when collapsed */
        .section-summary {
            color: var(--medium-text);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
            line-height: 1.4;
            transition: all 0.3s ease;
            max-height: 2.5rem;
            overflow: hidden;
        }
        .section-card.collapsed .section-summary {
            max-height: 2.5rem;
            opacity: 1;
        }
        .section-card.expanded .section-summary {
            max-height: 0;
            opacity: 0;
            margin-bottom: 0;
        }
        
        .section-card p{line-height:1.5;margin-bottom:0.8rem;font-size:0.9rem}
        
        .section-links{display:grid;grid-template-columns:1fr;gap:8px}
        .section-link{display:flex;align-items:center;padding:10px 12px;background:rgba(0,0,0,0.2);border-radius:6px;text-decoration:none;color:var(--light-text);transition:all 0.3s ease;border-left:2px solid;font-size:0.9rem}
        .section-link:hover{background:rgba(0,0,0,0.4);transform:translateX(5px)}
        .section-link .icon{font-size:1rem;margin-right:10px;width:20px;text-align:center}
        .section-link .text{flex:1;font-size:0.9rem}
        .section-link .arrow{color:var(--medium-text);font-size:0.85rem;transition:transform 0.3s}
        .section-link:hover .arrow{transform:translateX(3px)}
        
        /* Color assignments for section links */
        .section-card:nth-child(1) .section-link{border-left-color:var(--accent1)}
        .section-card:nth-child(2) .section-link{border-left-color:var(--accent2)}
        .section-card:nth-child(3) .section-link{border-left-color:var(--accent3)}
        .section-card:nth-child(4) .section-link{border-left-color:var(--accent4)}
        .section-card:nth-child(5) .section-link{border-left-color:var(--accent5)}
        .section-card:nth-child(6) .section-link{border-left-color:var(--accent6)}
        .section-card:nth-child(7) .section-link{border-left-color:var(--accent1)}
        .section-card:nth-child(8) .section-link{border-left-color:var(--accent2)}
        
        .cta-button{display:inline-block;margin-top:0.8rem;background:var(--primary);color:#2e003e;padding:0.7rem 1rem;border-radius:6px;text-decoration:none;font-weight:bold;transition:all 0.2s;font-size:0.9rem;box-shadow:0 3px 6px rgba(0,0,0,0.2);text-align:center;width:100%}
        .cta-button:hover{opacity:0.85;transform:scale(1.03);box-shadow:0 4px 8px rgba(0,0,0,0.3)}

        /* Enhanced Search - More prominent */
        .search-container{position:relative;width:90%;max-width:600px;margin:1.2rem auto;z-index:100}
        .search-bar{display:flex;position:relative;box-shadow:0 0 10px rgba(0,247,224,0.1);border-radius:30px;overflow:hidden}
        .search-bar input{flex:1;padding:12px 18px;border:none;background:rgba(255,255,255,0.1);color:white;font-size:1rem;outline:none}
        .search-bar input::placeholder{color:rgba(255,255,255,0.7)}
        .search-bar button{padding:12px 18px;border:none;background:var(--primary);color:#2e003e;cursor:pointer;font-weight:bold;transition:all 0.3s}
        .search-bar button:hover{background:#00e6cc}
        
        #searchResults{position:absolute;top:100%;left:0;right:0;background:var(--card-bg);max-height:300px;overflow-y:auto;border-radius:0 0 10px 10px;display:none;z-index:1004;box-shadow:0 5px 15px rgba(0,0,0,0.3);border:1px solid var(--primary);border-top:none}
        #searchResults ul{list-style:none;padding:0;margin:0}
        #searchResults li{padding:10px 12px;border-bottom:1px solid #5d3a7d;cursor:pointer;font-size:0.95rem;display:flex;align-items:center}
        #searchResults li:hover{background:#5d3a7d}
        #searchResults li:last-child{border-bottom:none}
        #searchResults li .icon{margin-right:10px;font-size:1rem}
        #searchResults li .category{font-size:0.75rem;color:var(--medium-text);margin-left:auto;background:rgba(0,0,0,0.3);padding:2px 6px;border-radius:4px}

        /* Enhanced peach button with "HELP!" text */
        #peachWrap{position:fixed;bottom:20px;right:20px;z-index:1002;display:flex;flex-direction:column;align-items:center;gap:6px;touch-action:none;cursor:move}
        #panicButton{width:60px;height:60px;font-size:2.5rem;background:radial-gradient(circle at 35% 35%,#ffb07c,#ff6f91);border-radius:50% 50% 45% 55%/60% 55% 45% 50%;position:relative;display:flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;color:#fff;box-shadow:0 0 10px var(--secondary),0 0 20px var(--primary);animation:emojiPulse 2.5s infinite;user-select:none}
        #panicButton::before{content:"";position:absolute;top:-8px;left:22px;width:15px;height:12px;background:linear-gradient(135deg,#ff9a7a,#ff7a5a);border-radius:50%;transform:rotate(-20deg)}
        #panicButton:hover{transform:scale(1.15);animation:none}
        .help-text{color:#ff9a7a;font-weight:bold;text-shadow:0 0 5px rgba(255,154,122,0.6);font-size:0.85rem;text-align:center;animation:blink 3s infinite}
        @keyframes emojiPulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
        @keyframes blink{0%,100%{opacity:1}50%{opacity:0.7}}

        /* Improved Footer with sitemap */
        footer{margin-top:2.5rem;font-size:0.85rem;color:#aaa;text-align:center;position:relative;z-index:2;padding:1.2rem;background:rgba(0,0,0,0.5);border-top:1px solid #444}
        footer hr{border-color:#444;margin-bottom:0.8rem}
        footer p{max-width:800px;margin:0.7rem auto;line-height:1.5}
        .social-links{display:flex;justify-content:center;gap:12px;margin:1.2rem 0}
        .social-link{display:flex;align-items:center;gap:6px;color:var(--primary);text-decoration:none;padding:8px 12px;border-radius:6px;transition:all 0.3s ease;background:rgba(58,0,82,0.3);border:1px solid rgba(0,247,224,0.3);font-size:0.85rem}
        .social-link:hover{background:rgba(58,0,82,0.6);transform:translateY(-2px);box-shadow:0 3px 6px rgba(0,247,224,0.15)}
        .social-link span{font-size:1rem}
        
        /* Sitemap */
        .sitemap{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1.2rem;margin:1.5rem 0;text-align:left}
        .sitemap-category h3{color:var(--primary);font-size:1rem;margin-bottom:0.6rem;padding-bottom:4px;border-bottom:1px solid rgba(0,247,224,0.3)}
        .sitemap-links{display:flex;flex-direction:column;gap:4px}
        .sitemap-link{color:var(--medium-text);text-decoration:none;font-size:0.85rem;transition:color 0.2s}
        .sitemap-link:hover{color:var(--primary)}
        
        footer ul{list-style:none;padding:0;display:flex;flex-wrap:wrap;justify-content:center;margin:0.8rem 0;gap:8px}
        footer ul li a{color:var(--primary);padding:0 8px;text-decoration:none;transition:color 0.2s;font-size:0.85rem}
        footer ul li a:hover{color:var(--secondary);text-decoration:underline}

        /* Mocktail Preview Section */
        .mocktail-preview{background:#2a0036;border-radius:6px;padding:12px;margin:12px 0;border:1px solid #5d3a7d}
        .mocktail-scroll-container{overflow-x:auto;padding-bottom:8px;margin-top:12px;scrollbar-width:thin;scrollbar-color:var(--primary) #2a0036}
        .mocktail-scroll-container::-webkit-scrollbar{height:5px}
        .mocktail-scroll-container::-webkit-scrollbar-track{background:#2a0036;border-radius:3px}
        .mocktail-scroll-container::-webkit-scrollbar-thumb{background:var(--primary);border-radius:3px}
        .mocktail-grid{display:flex;gap:12px;padding:4px;width:max-content}
        .mocktail-card{background:var(--card-bg);border-radius:5px;padding:10px;border:1px solid var(--primary);transition:transform 0.2s;min-width:220px;flex-shrink:0}
        .mocktail-card:hover{transform:translateY(-3px);box-shadow:0 3px 8px rgba(0,247,224,0.2)}
        .mocktail-card h3{color:var(--secondary);margin-top:0;border-bottom:1px solid var(--secondary);padding-bottom:5px;font-size:1rem}
        .mocktail-ingredients{margin:6px 0;font-size:0.9rem}
        .mocktail-ingredients li{margin-bottom:4px;display:flex;align-items:center}
        .view-all{text-align:center;margin-top:12px}

        /* Mobile HUD Navigation */
        .mobile-hud{position:fixed;bottom:0;left:0;width:100%;background-color:rgba(58,0,82,0.95);display:flex;justify-content:space-around;padding:8px 0;z-index:1001;backdrop-filter:blur(5px);border-top:1px solid var(--primary)}
        .hud-btn{display:flex;flex-direction:column;align-items:center;color:white;text-decoration:none;font-size:0.7rem;padding:5px;flex:1;text-align:center;transition:all 0.3s}
        .hud-btn span{font-size:1.1rem;margin-bottom:2px}
        .hud-btn:hover{background:rgba(255,105,180,0.2);border-radius:5px}

        /* Emergency Modal */
        .emergency-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.9);z-index:2000;justify-content:center;align-items:center;padding:1.2rem}
        .modal-content{background-color:var(--card-bg);padding:16px;border-radius:6px;max-width:100%;max-height:90%;overflow-y:auto;border:2px solid var(--primary);box-shadow:0 0 15px rgba(0,247,224,0.4);position:relative}
        .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;border-bottom:1px solid var(--primary);padding-bottom:8px}
        .close-modal{background:none;border:none;color:var(--primary);font-size:1.6rem;cursor:pointer}
        .emergency-steps{margin:12px 0}
        .emergency-steps ol{padding-left:18px}
        .emergency-steps li{margin-bottom:8px;line-height:1.5;font-size:0.9rem}
        .emergency-contact{background:rgba(0,0,0,0.3);padding:10px;border-radius:5px;margin-top:12px;font-size:0.9rem}
        .emergency-contact h4{color:var(--secondary);margin-bottom:6px;font-size:0.95rem}

        /* New style for the glowing section */
        .glow-section{position:relative;overflow:hidden}
        .glow-section::before{content:'';position:absolute;top:-8px;left:-8px;right:-8px;bottom:-8px;background:linear-gradient(45deg,var(--secondary),var(--primary),var(--secondary),var(--primary));background-size:400% 400%;z-index:-1;animation:glowing 4s ease-in-out infinite;border-radius:10px;opacity:0.2;filter:blur(5px)}
        @keyframes glowing{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

        /* Bad Trip Button */
        .bad-trip-button{display:inline-block;background:linear-gradient(135deg,var(--secondary),var(--primary));color:white;padding:0.6rem 0.9rem;border-radius:5px;text-decoration:none;font-weight:bold;margin-top:0.8rem;font-size:0.85rem;box-shadow:0 3px 6px rgba(0,0,0,0.2);transition:all 0.2s}
        .bad-trip-button:hover{opacity:0.85;transform:scale(1.03);box-shadow:0 4px 8px rgba(0,0,0,0.3)}

        /* Floating Animation for Cards */
        @keyframes float-card{0%{transform:translateY(0px)}50%{transform:translateY(-5px)}100%{transform:translateY(0px)}}
        .floating{animation:float-card 8s ease-in-out infinite}
        .floating-delay-1{animation-delay:1.5s}
        .floating-delay-2{animation-delay:3s}
        .floating-delay-3{animation-delay:4.5s}

        /* Pulse Animation for CTAs */
        @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,247,224,0.3)}70%{box-shadow:0 0 0 8px rgba(0,247,224,0)}100%{box-shadow:0 0 0 0 rgba(0,247,224,0)}}
        .pulse{animation:pulse 2.5s infinite}

        /* Improved Collapsible Section Styles with cool animations */
        .collapsible-toggle {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            z-index: 2;
            flex-shrink: 0;
        }
        .collapsible-toggle:hover {
            background: rgba(0, 247, 224, 0.15);
            transform: scale(1.1) rotate(90deg);
        }
        .collapsible-toggle::before, .collapsible-toggle::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: rgba(0, 247, 224, 0.15);
            transform: scale(0);
            transition: transform 0.4s ease;
        }
        .collapsible-toggle:hover::before {
            transform: scale(1);
        }
        .collapsible-toggle::after {
            background: rgba(0, 247, 224, 0.1);
            transition-delay: 0.1s;
        }
        .collapsible-toggle:hover::after {
            transform: scale(1.1);
        }
        
        /* Make entire header clickable on mobile */
        @media (max-width: 768px) {
            .card-header {
                padding: 0.6rem 0;
                margin-bottom: 0.4rem;
            }
            .card-header::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: 1;
            }
        }

        .collapsible-content {
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.5s ease 0.1s,
                        padding 0.3s ease;
            padding: 0;
            transform: translateY(-8px);
        }
        .collapsible-content.expanded {
            max-height: 2000px;
            opacity: 1;
            padding-top: 0.8rem;
            transform: translateY(0);
        }

        /* Scroll to Top Button - Improved positioning */
        #scrollTopBtn {
            display: none;
            position: fixed;
            bottom: 100px; /* Moved up to avoid overlapping with mobile HUD */
            right: 20px;
            z-index: 1001;
            border: none;
            outline: none;
            background-color: var(--primary);
            color: #2e003e;
            cursor: pointer;
            padding: 10px 14px;
            border-radius: 50%;
            font-size: 1.3rem;
            box-shadow: 0 3px 8px rgba(0, 247, 224, 0.3);
            transition: all 0.3s ease;
            animation: bounce 2.5s infinite;
        }
        #scrollTopBtn:hover {
            background-color: #00e6cc;
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 4px 10px rgba(0, 247, 224, 0.5);
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-4px);}
            60% {transform: translateY(-2px);}
        }

        /* New subtle animations */
        @keyframes subtleGlow {
            0%, 100% { box-shadow: 0 0 3px rgba(0,247,224,0.2); }
            50% { box-shadow: 0 0 8px rgba(0,247,224,0.4); }
        }
        .glow-card {
            animation: subtleGlow 5s infinite;
        }

        @keyframes textShimmer {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }
        .shimmer-text {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            background-size: 200% 100%;
            animation: textShimmer 4s infinite;
        }

        /* Hydration Timer Widget Styles */
        .timer-widget {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid var(--accent3);
            box-shadow: 0 0 8px rgba(0,255,255,0.05);
        }

        .timer-card {
            background-color: rgba(0, 0, 0, 0.2);
            border-left: 4px solid var(--primary);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
        }

        .timer-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .timer-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn-start {
            background-color: var(--accent5);
            color: white;
        }

        .btn-start:hover {
            background-color: #00b383;
        }

        .btn-snooze {
            background-color: var(--accent6);
            color: white;
        }

        .btn-snooze:hover {
            background-color: #e6a200;
        }

        .btn-settings {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light-text);
        }

        .btn-settings:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .customization-panel {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            text-align: left;
        }

        .customization-panel h3 {
            margin-top: 0;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            box-sizing: border-box;
            background: rgba(0, 0, 0, 0.3);
            color: var(--light-text);
        }

        .btn-save {
            background-color: var(--primary);
            color: #2e003e;
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn-save:hover {
            background-color: #00e6cc;
        }

        .hidden {
            display: none;
        }

        @media (min-width:768px){
            .sections-grid{grid-template-columns:repeat(2,1fr)}
            .section-links{grid-template-columns:repeat(2,1fr)}
            #panicButton{width:65px;height:65px;font-size:2.8rem}
            .help-text{font-size:0.9rem}
            .mocktail-grid{display:grid;grid-template-columns:repeat(3,1fr);width:100%}
            .mocktail-card{min-width:auto}
            .mobile-nav-links{grid-template-columns:repeat(2,1fr)}
            .section-card {
                padding: 1rem;
            }
        }
        @media (min-width:1024px){
            .sections-grid{grid-template-columns:repeat(3,1fr)}
            .mobile-hud{display:none}
            #scrollTopBtn {
                bottom: 20px; /* Back to normal position on desktop */
            }
        }
        @media (max-width:480px){
            .section-card{padding:0.8rem}
            .section-card h2{font-size:1rem}
            .search-container{width:95%}
            .search-bar input{font-size:0.95rem}
            .social-links {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
            .social-link {
                width: 180px;
                justify-content: center;
            }
            .timer-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<!-- Subtle Animated Background with Minneapolis Skyline -->
<div class="animated-background">
    <div class="bg-gradient"></div>
    <div class="bg-particles" id="particles"></div>
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
    
    <!-- Minneapolis Skyline -->
    <div class="minneapolis-skyline">
        <div class="skyline-buildings">
            <div class="building building-1"></div>
            <div class="building building-2"></div>
            <div class="building building-3"></div> <!-- IDS Center -->
            <div class="building building-4"></div>
            <div class="building building-5"></div> <!-- Capella Tower -->
            <div class="building building-6"></div>
            <div class="building building-7"></div> <!-- Wells Fargo Center -->
            <div class="building building-8"></div>
            <div class="building building-9"></div> <!-- Foshay Tower -->
            <div class="building building-10"></div>
        </div>
        <div class="bridge"></div>
        <div class="river"></div>
    </div>
</div>

<!-- Scroll to Top Button -->
<button id="scrollTopBtn" title="Go to top">‚Üë</button>

<!-- Enhanced Mobile Navigation -->
<div class="mobile-nav-btn" id="mobileNavBtn">
    <div></div>
    <div></div>
    <div></div>
</div>

<nav class="mobile-nav" id="mobileNav">
    <div class="mobile-nav-category active">
        <h3>Safety & Emergency <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="panic.html" class="mobile-nav-link"><span class="icon">üö®</span>Panic Button</a>
            <a href="emergency.html" class="mobile-nav-link"><span class="icon">üÜò</span>Emergency Guides</a>
            <a href="spiking.html" class="mobile-nav-link"><span class="icon">üö´</span>Drink Spiking</a>
            <a href="badtrip.html" class="mobile-nav-link"><span class="icon">üåà</span>Bad Trip Mode</a>
        </div>
    </div>
    
    <div class="mobile-nav-category">
        <h3>Drug Information <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="polydrug.html" class="mobile-nav-link"><span class="icon">üíä</span>Polydrug Tool</a>
            <a href="rx-combos.html" class="mobile-nav-link"><span class="icon">üíä</span>RX + Party Combos</a>
            <a href="health.html" class="mobile-nav-link"><span class="icon">üíö</span>Raver Health</a>
            <a href="symptoms.html" class="mobile-nav-link"><span class="icon">ü§í</span>Symptom Checker</a>
            <a href="fake.html" class="mobile-nav-link"><span class="icon">‚ö†Ô∏è</span>Fake Drugs & Alerts</a>
        </div>
    </div>
    
    <div class="mobile-nav-category">
        <h3>Consent & Community <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="consent.html" class="mobile-nav-link"><span class="icon">‚úÖ</span>Consent Basics</a>
            <a href="accountability.html" class="mobile-nav-link"><span class="icon">‚öñÔ∏è</span>Accountability</a>
            <a href="rejection-based-violence.html" class="mobile-nav-link"><span class="icon">üõ°Ô∏è</span>Violence Prevention</a>
        </div>
    </div>
    
    <div class="mobile-nav-category">
        <h3>Local Scene <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="venues-guide.html" class="mobile-nav-link"><span class="icon">üè¢</span>Venues Guide</a>
            <a href="booth.html" class="mobile-nav-link"><span class="icon">üéâ</span>Our Booth</a>
        </div>
    </div>
    
    <div class="mobile-nav-category">
        <h3>More Resources <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="seasonal.html" class="mobile-nav-link"><span class="icon">üåû</span>Seasonal Tips</a>
            <a href="sober.html" class="mobile-nav-link"><span class="icon">üö´</span>Sober Ravers</a>
            <a href="resources.html" class="mobile-nav-link"><span class="icon">üìö</span>MN Resources</a>
        </div>
    </div>
    
    <!-- Social Media & Donate Links in Mobile Nav -->
    <div class="mobile-nav-category">
        <h3>Connect With Us <span class="toggle-icon">‚ñº</span></h3>
        <div class="mobile-nav-links">
            <a href="https://www.facebook.com/plurderapolis" class="mobile-nav-link" target="_blank"><span class="icon">üìò</span>Facebook</a>
            <a href="https://www.instagram.com/plurderapolis" class="mobile-nav-link" target="_blank"><span class="icon">üì∑</span>Instagram</a>
            <a href="https://www.venmo.com/u/plurderdapolis" class="donate-button" target="_blank"><span class="icon">üíñ</span>Donate</a>
        </div>
    </div>
</nav>

<!-- Less obtrusive alert banner -->
<div class="rave-alert-wrapper">
    <a href="fake.html" class="rave-alert-link">üö® MN Drug Supply Alert: Gray Death circulating ‚Ä¢ Fake K = fentanyl + xylazine ‚Ä¢ Test before you trust ‚Ä¢ Carry Narcan ‚Ä¢ No solo dosing ‚Ä¢ Click for full info üñ§</a>
</div>

<!-- Site title -->
<div class="site-title">
    <h1>PLURderapolis</h1>
    <div class="tagline">Harm Reduction for Minnesota Ravers</div>
</div>

<!-- Enhanced Search -->
<div class="search-container">
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search the site... (e.g. Narcan, drink spiking)">
        <button onclick="performSearch()">üîç</button>
    </div>
    <div id="searchResults"></div>
</div>

<!-- Mobile HUD Navigation -->
<div class="mobile-hud">
    <a href="panic.html" class="hud-btn"><span>üö®</span>Panic</a>
    <a href="polydrug.html" class="hud-btn"><span>üíä</span>Tool</a>
    <a href="resources.html" class="hud-btn"><span>üìö</span>Resources</a>
    <a href="health.html" class="hud-btn"><span>üíö</span>Health</a>
    <a href="badtrip.html" class="hud-btn"><span>üåà</span>Bad Trip</a>
</div>

<!-- Grid layout for sections - NOW COLLAPSIBLE with Emergency Tools FIRST -->
<div class="sections-grid">
    <!-- Emergency Tools Section - NOW FIRST -->
    <div class="section-card floating expanded glow-card">
        <div class="card-header">
            <h2>üö® Emergency Tools</h2>
            <button class="collapsible-toggle">‚àí</button>
        </div>
        <div class="section-summary">Quick access to emergency resources when you need them most.</div>
        <div class="collapsible-content expanded">
            <div class="section-links">
                <a href="panic.html" class="section-link">
                    <span class="icon">üö®</span>
                    <span class="text">Panic Button</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="emergency.html" class="section-link">
                    <span class="icon">üÜò</span>
                    <span class="text">Emergency Guides</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="badtrip.html" class="section-link">
                    <span class="icon">üåà</span>
                    <span class="text">Bad Trip Mode</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="spiking.html" class="section-link">
                    <span class="icon">üö´</span>
                    <span class="text">Drink Spiking Info</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="panic.html" class="cta-button pulse">Emergency Resources</a>
        </div>
    </div>

    <!-- Hydration & Check-in Timer Widget -->
    <div class="section-card floating floating-delay-1 expanded">
        <div class="card-header">
            <h2>üíß Hydration & Check-in</h2>
            <button class="collapsible-toggle">‚àí</button>
        </div>
        <div class="section-summary">Set reminders to stay hydrated and check in with your buddies.</div>
        <div class="collapsible-content expanded">
            <div class="timer-widget">
                <div class="timer-card" id="water-timer">
                    <div class="timer-title">
                        <span>üíß Drink Water</span>
                        <span id="water-status">--:--</span>
                    </div>
                    <p>Time for a hydrating break. Your body will thank you!</p>
                    <div class="timer-controls">
                        <button class="timer-btn btn-start" onclick="startTimer('water')">Start Timer</button>
                        <button class="timer-btn btn-snooze hidden" onclick="snoozeTimer('water')">Snooze (10m)</button>
                    </div>
                </div>

                <div class="timer-card" id="buddy-timer">
                    <div class="timer-title">
                        <span>üë• Check in with Buddy</span>
                        <span id="buddy-status">--:--</span>
                    </div>
                    <p>Reach out to your buddy. A quick chat can make a big difference.</p>
                    <div class="timer-controls">
                        <button class="timer-btn btn-start" onclick="startTimer('buddy')">Start Timer</button>
                        <button class="timer-btn btn-snooze hidden" onclick="snoozeTimer('buddy')">Snooze (30m)</button>
                    </div>
                </div>

                <div class="timer-card" id="eat-timer">
                    <div class="timer-title">
                        <span>üçé Eat Something</span>
                        <span id="eat-status">--:--</span>
                    </div>
                    <p>Fuel your body with a healthy snack or meal.</p>
                    <div class="timer-controls">
                        <button class="timer-btn btn-start" onclick="startTimer('eat')">Start Timer</button>
                        <button class="timer-btn btn-snooze hidden" onclick="snoozeTimer('eat')">Snooze (20m)</button>
                    </div>
                </div>

                <button class="timer-btn btn-settings" onclick="toggleCustomization()">Customize Reminders</button>

                <div class="customization-panel hidden" id="customization-panel">
                    <h3>Customize Your Reminders</h3>
                    <form id="customization-form">
                        <div class="form-group">
                            <label for="water-interval">Water Reminder Interval (minutes)</label>
                            <input type="number" id="water-interval" min="15" max="180" value="60">
                        </div>
                        <div class="form-group">
                            <label for="buddy-interval">Buddy Check-in Interval (minutes)</label>
                            <input type="number" id="buddy-interval" min="30" max="480" value="120">
                        </div>
                        <div class="form-group">
                            <label for="eat-interval">Eat Something Interval (minutes)</label>
                            <input type="number" id="eat-interval" min="30" max="360" value="180">
                        </div>
                        <div class="form-group">
                            <label for="snooze-duration">Default Snooze Time (minutes)</label>
                            <input type="number" id="snooze-duration" min="5" max="60" value="10">
                        </div>
                    </form>
                    <button type="button" class="btn-save" onclick="saveCustomizations()">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- What We Do Section -->
    <div class="section-card floating floating-delay-2 collapsed">
        <div class="card-header">
            <h2>üí° What We Do</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Harm reduction resources, education, and support for Minnesota's electronic music community.</div>
        <div class="collapsible-content">
            <div class="section-links">
                <a href="resources.html" class="section-link">
                    <span class="icon">üíä</span>
                    <span class="text">Harm Reduction Resources</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="emergency.html" class="section-link">
                    <span class="icon">üß†</span>
                    <span class="text">Mental Health & Crisis Support</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="consent.html" class="section-link">
                    <span class="icon">üïäÔ∏è</span>
                    <span class="text">Consent & Community Culture</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="booth.html" class="section-link">
                    <span class="icon">üéâ</span>
                    <span class="text">Visit Our Harm Reduction Booth</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="resources.html" class="cta-button pulse">Explore All Resources</a>
        </div>
    </div>

    <!-- Drug Interactions Section -->
    <div class="section-card floating floating-delay-3 collapsed">
        <div class="card-header">
            <h2>üî¨ Drug Interactions</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Check how different substances interact with each other to stay safe.</div>
        <div class="collapsible-content">
            <div class="section-links">
                <a href="polydrug.html" class="section-link">
                    <span class="icon">‚ö°</span>
                    <span class="text">Polydrug Interaction Tool</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="rx-combos.html" class="section-link">
                    <span class="icon">üíä</span>
                    <span class="text">RX + Party Drug Combos</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="health.html" class="section-link">
                    <span class="icon">üíö</span>
                    <span class="text">Raver Health Guide</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="symptom.html" class="section-link">
                    <span class="icon">ü§í</span>
                    <span class="text">Symptom Checker</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="fake.html" class="section-link">
                    <span class="icon">‚ö†Ô∏è</span>
                    <span class="text">Fake Drugs & Alerts</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="polydrug.html" class="cta-button pulse">Use Interaction Tool</a>
        </div>
    </div>

    <!-- Mocktail Preview Section -->
    <div class="section-card floating collapsed">
        <div class="card-header">
            <h2>üçπ Sober Ravers</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Enjoy the scene without substances with these refreshing mocktail recipes.</div>
        <div class="collapsible-content">
            <div class="mocktail-preview">
                <div class="mocktail-scroll-container">
                    <div class="mocktail-grid">
                        <div class="mocktail-card">
                            <h3>üåô Midnight Mule</h3>
                            <ul class="mocktail-ingredients">
                                <li>‚Ä¢ Ginger beer</li>
                                <li>‚Ä¢ Fresh lime juice</li>
                                <li>‚Ä¢ Mint leaves</li>
                                <li>‚Ä¢ Cucumber slices</li>
                            </ul>
                        </div>
                        <div class="mocktail-card">
                            <h3>üåà PLUR Punch</h3>
                            <ul class="mocktail-ingredients">
                                <li>‚Ä¢ Cranberry juice</li>
                                <li>‚Ä¢ Orange juice</li>
                                <li>‚Ä¢ Club soda</li>
                                <li>‚Ä¢ Fresh berries</li>
                            </ul>
                        </div>
                        <div class="mocktail-card">
                            <h3>üí´ Bassline Breeze</h3>
                            <ul class="mocktail-ingredients">
                                <li>‚Ä¢ Coconut water</li>
                                <li>‚Ä¢ Pineapple juice</li>
                                <li>‚Ä¢ Lime wedge</li>
                                <li>‚Ä¢ Fresh basil</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="view-all">
                    <a href="sober.html" class="cta-button">View All Mocktail Recipes</a>
                </div>
            </div>
            <a href="sober.html" class="cta-button pulse">More Sober Resources</a>
        </div>
    </div>

    <!-- Resources Section -->
    <div class="section-card floating floating-delay-1 collapsed">
        <div class="card-header">
            <h2>üìö Resources</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Comprehensive resources for harm reduction and mental health support.</div>
        <div class="collapsible-content">
            <div class="section-links">
                <a href="resources.html" class="section-link">
                    <span class="icon">üìç</span>
                    <span class="text">MN Resources Directory</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="sober.html" class="section-link">
                    <span class="icon">üö´</span>
                    <span class="text">Sober Ravers Support</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="seasonal.html" class="section-link">
                    <span class="icon">üåû</span>
                    <span class="text">Seasonal Safety Tips</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="venues-guide.html" class="section-link">
                    <span class="icon">üè¢</span>
                    <span class="text">Venue Safety Guides</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="resources.html" class="cta-button pulse">View All Resources</a>
        </div>
    </div>

    <!-- Violence Prevention Section -->
    <div class="section-card glow-section floating floating-delay-2 collapsed">
        <div class="card-header">
            <h2>üõ°Ô∏è Violence Prevention</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Resources for preventing violence when someone says 'no' or sets boundaries.</div>
        <div class="collapsible-content">
            <div class="section-links">
                <a href="rejection-based-violence.html" class="section-link">
                    <span class="icon">üõ°Ô∏è</span>
                    <span class="text">Rejection Violence Prevention</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="consent.html" class="section-link">
                    <span class="icon">‚úÖ</span>
                    <span class="text">Consent Basics</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="accountability.html" class="section-link">
                    <span class="icon">‚öñÔ∏è</span>
                    <span class="text">Community Accountability</span>
                    <span class="arrow">‚Üí</span>
                </a>
                <a href="spiking.html" class="section-link">
                    <span class="icon">üö´</span>
                    <span class="text">Drink Spiking Prevention</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="rejection-based-violence.html" class="cta-button pulse">Learn More</a>
        </div>
    </div>

    <!-- About Us Section -->
    <div class="section-card floating floating-delay-3 collapsed">
        <div class="card-header">
            <h2>üìñ About Us</h2>
            <button class="collapsible-toggle">+</button>
        </div>
        <div class="section-summary">Learn about our grassroots harm reduction work in Minnesota's nightlife and festival community.</div>
        <div class="collapsible-content">
            <p><strong>PLURderapolis was built from years of grassroots harm reduction in Minnesota's nightlife and festival community.</strong> From Project Peach booths at warehouse shows, clubs, and events like Intellephunk's The Great Beyond, to collaborations with local collectives, this work has always been about showing up where the scene lives.</p>
            <p>What began with direct care at the booth has grown into a broader mission: now creating an online hub of resources and tools designed for safer nightlife. The goal is simple; make harm reduction accessible anytime, anywhere, while keeping the culture strong and the community connected.</p>
            <p><strong>PLURderapolis is here as your partners in shine, working to make Minnesota's nightlife safer, kinder, and, truly, Minnesota Nice again.</strong></p>
            <div class="section-links">
                <a href="booth.html" class="section-link">
                    <span class="icon">üéâ</span>
                    <span class="text">Visit Our Harm Reduction Booth</span>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
            <a href="booth.html" class="cta-button pulse">See Our Booth Schedule</a>
        </div>
    </div>
</div>

<!-- Anonymous Tip Link -->
<div style="text-align:center;margin:1.5rem">
    <a href="http://users.smartgb.com/g/g.php?a=s&i=g19-02505-d5" target="_blank" style="color:var(--secondary);font-weight:bold;text-decoration:none;font-size:1rem">üí¨ Leave an Anonymous Tip</a>
</div>

<!-- Emergency Modal -->
<div class="emergency-modal" id="emergencyModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Emergency Assistance</h2>
            <button class="close-modal" onclick="closeEmergencyModal()">&times;</button>
        </div>
        <div class="emergency-steps">
            <h3>If someone is unresponsive:</h3>
            <ol>
                <li>Check for responsiveness - tap shoulder and shout</li>
                <li>Call 911 immediately</li>
                <li>Check breathing - look for chest movement</li>
                <li>Administer Narcan if available and trained</li>
                <li>Perform rescue breathing if not breathing</li>
                <li>Place in recovery position if breathing</li>
            </ol>
            <h3>Overdose signs:</h3>
            <ul>
                <li>Unresponsive to stimuli</li>
                <li>Slow or no breathing</li>
                <li>Pale or clammy skin</li>
                <li>Blue lips or fingertips</li>
                <li>Gurgling sounds</li>
            </ul>
        </div>
        <div class="emergency-contact">
            <h4>Minnesota Emergency Resources:</h4>
            <p>üÜò Crisis Text Line: Text "HOME" to 741741</p>
            <p>üÜò MN Poison Control: 1-800-222-1222</p>
            <p>üÜò Mobile Crisis Services: **CRISIS (**74747)</p>
        </div>
        <p style="margin-top:16px;font-weight:bold">Remember: Good Samaritan laws protect you when seeking help for an overdose.</p>
        <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center">
            <a href="panic.html" class="cta-button">More Panic Resources</a>
            <a href="emergency.html" class="cta-button" style="background-color:var(--secondary)">Emergency Guides</a>
        </div>
    </div>
</div>

<!-- Enhanced peach panic button with "HELP!" text -->
<div id="peachWrap">
    <div id="panicButton">üçë</div>
    <div class="help-text">HELP!</div>
</div>

<!-- Footer -->
<footer>
    <hr/>
    <p>&copy; 2025 PLURderapolis ‚Äî Community Harm Reduction</p>
    <p>Your partners in shine ‚ú¶ <a href="mailto:plurderapolis@gmail.com" style="color:var(--primary)">plurderapolis@gmail.com</a></p>
    
    <!-- Improved Social Media Links with Donate Button -->
    <div class="social-links">
        <a href="https://www.facebook.com/plurderapolis" class="social-link" target="_blank">
            <span>üìò</span> Facebook
        </a>
        <a href="https://www.instagram.com/plurderapolis" class="social-link" target="_blank">
            <span>üì∑</span> Instagram
        </a>
        <a href="https://www.venmo.com/u/plurderdapolis" class="social-link" target="_blank" style="background:linear-gradient(135deg, var(--secondary), var(--accent1));">
            <span>üíñ</span> Donate
        </a>
    </div>
    
    <!-- Sitemap -->
    <div class="sitemap">
        <div class="sitemap-category">
            <h3>Safety & Emergency</h3>
            <div class="sitemap-links">
                <a href="panic.html" class="sitemap-link">Panic Button</a>
                <a href="emergency.html" class="sitemap-link">Emergency Guides</a>
                <a href="spiking.html" class="sitemap-link">Drink Spiking</a>
                <a href="badtrip.html" class="sitemap-link">Bad Trip Mode</a>
            </div>
        </div>
        <div class="sitemap-category">
            <h3>Drug Information</h3>
            <div class="sitemap-links">
                <a href="polydrug.html" class="sitemap-link">Polydrug Tool</a>
                <a href="rx-combos.html" class="sitemap-link">RX + Party Combos</a>
                <a href="health.html" class="sitemap-link">Raver Health</a>
                <a href="symptom.html" class="sitemap-link">Symptom Checker</a>
                <a href="fake.html" class="sitemap-link">Fake Drugs & Alerts</a>
            </div>
        </div>
        <div class="sitemap-category">
            <h3>Consent & Community</h3>
            <div class="sitemap-links">
                <a href="consent.html" class="sitemap-link">Consent Basics</a>
                <a href="accountability.html" class="sitemap-link">Accountability</a>
                <a href="rejection-based-violence.html" class="sitemap-link">Violence Prevention</a>
            </div>
        </div>
        <div class="sitemap-category">
            <h3>Local Scene</h3>
            <div class="sitemap-links">
                <a href="venues-guide.html" class="sitemap-link">Venues Guide</a>
                <a href="booth.html" class="sitemap-link">Our Booth</a>
            </div>
        </div>
        <div class="sitemap-category">
            <h3>More Resources</h3>
            <div class="sitemap-links">
                <a href="seasonal.html" class="sitemap-link">Seasonal Tips</a>
                <a href="sober.html" class="sitemap-link">Sober Ravers</a>
                <a href="resources.html" class="sitemap-link">MN Resources</a>
                <a href="index.html" class="sitemap-link">Home</a>
            </div>
        </div>
    </div>
    
    <p style="font-size:0.75rem;color:#ccc;margin-top:0.8rem;">Disclaimer: PLURderapolis provides harm reduction education. This is not medical or legal advice. Always consult professionals for health or legal concerns.</p>
</footer>

<script>
// Hydration Timer Widget Functionality
// State for each timer
const timers = {
    water: { interval: 60, endTime: null, timeoutId: null, display: 'water-status', snooze: 10 },
    buddy: { interval: 120, endTime: null, timeoutId: null, display: 'buddy-status', snooze: 30 },
    eat: { interval: 180, endTime: null, timeoutId: null, display: 'eat-status', snooze: 20 }
};

// Load saved settings from localStorage
function loadSettings() {
    const saved = localStorage.getItem('plurderapolisTimerSettings');
    if (saved) {
        const settings = JSON.parse(saved);
        for (const timer in timers) {
            if (settings[timer]) {
                timers[timer].interval = settings[timer].interval;
                timers[timer].snooze = settings[timer].snooze;
            }
        }
        // Update form values
        document.getElementById('water-interval').value = timers.water.interval;
        document.getElementById('buddy-interval').value = timers.buddy.interval;
        document.getElementById('eat-interval').value = timers.eat.interval;
        document.getElementById('snooze-duration').value = timers.water.snooze;
    }
}

// Save settings to localStorage
function saveCustomizations() {
    const settings = {};
    settings.water = { 
        interval: parseInt(document.getElementById('water-interval').value), 
        snooze: parseInt(document.getElementById('snooze-duration').value) 
    };
    settings.buddy = { 
        interval: parseInt(document.getElementById('buddy-interval').value), 
        snooze: 30 
    };
    settings.eat = { 
        interval: parseInt(document.getElementById('eat-interval').value), 
        snooze: 20 
    };
    
    localStorage.setItem('plurderapolisTimerSettings', JSON.stringify(settings));
    
    // Update current timer intervals
    timers.water.interval = settings.water.interval;
    timers.buddy.interval = settings.buddy.interval;
    timers.eat.interval = settings.eat.interval;
    timers.water.snooze = settings.water.snooze;
    
    alert('Settings saved! New intervals will be used for future timers.');
    toggleCustomization();
}

// Toggle customization panel visibility
function toggleCustomization() {
    const panel = document.getElementById('customization-panel');
    panel.classList.toggle('hidden');
}

// Start a timer
function startTimer(timerType) {
    const timer = timers[timerType];
    const startTime = new Date();
    timer.endTime = new Date(startTime.getTime() + timer.interval * 60000);
    
    // Update button states
    const card = document.getElementById(`${timerType}-timer`);
    card.querySelector('.btn-start').classList.add('hidden');
    card.querySelector('.btn-snooze').classList.remove('hidden');
    
    // Start the countdown display
    updateTimerDisplay(timerType);
    
    // Set the actual timeout
    timer.timeoutId = setTimeout(() => {
        alert(`Time to ${getTimerAction(timerType)}!`);
        resetTimer(timerType);
    }, timer.interval * 60000);
}

// Snooze a timer
function snoozeTimer(timerType) {
    const timer = timers[timerType];
    
    // Clear existing timeout
    if (timer.timeoutId) {
        clearTimeout(timer.timeoutId);
    }
    
    // Set a new end time for snooze duration
    const startTime = new Date();
    timer.endTime = new Date(startTime.getTime() + timer.snooze * 60000);
    
    // Update the display
    updateTimerDisplay(timerType);
    
    // Set new timeout
    timer.timeoutId = setTimeout(() => {
        alert(`Time to ${getTimerAction(timerType)}!`);
        resetTimer(timerType);
    }, timer.snooze * 60000);
}

// Reset a timer to its initial state
function resetTimer(timerType) {
    const timer = timers[timerType];
    timer.endTime = null;
    
    if (timer.timeoutId) {
        clearTimeout(timer.timeoutId);
        timer.timeoutId = null;
    }
    
    // Update button states
    const card = document.getElementById(`${timerType}-timer`);
    card.querySelector('.btn-start').classList.remove('hidden');
    card.querySelector('.btn-snooze').classList.add('hidden');
    
    // Reset display
    document.getElementById(timer.display).textContent = '--:--';
}

// Update the countdown display for a timer
function updateTimerDisplay(timerType) {
    const timer = timers[timerType];
    if (!timer.endTime) return;
    
    const now = new Date();
    const diff = timer.endTime - now;
    
    if (diff <= 0) {
        resetTimer(timerType);
        return;
    }
    
    const minutes = Math.floor(diff / 60000);
    const seconds = Math.floor((diff % 60000) / 1000);
    
    document.getElementById(timer.display).textContent = 
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
    // Update every second
    setTimeout(() => updateTimerDisplay(timerType), 1000);
}

// Helper function to get action text for alerts
function getTimerAction(timerType) {
    const actions = {
        water: 'drink water',
        buddy: 'check in with your buddy', 
        eat: 'eat something'
    };
    return actions[timerType];
}

// Initialize the timer widget
window.addEventListener('DOMContentLoaded', function() {
    loadSettings();
});

// Subtle Animated Background
function createParticles() {
    const particlesContainer = document.getElementById('particles');
    const colors = [
        'rgba(0, 247, 224, 0.2)',
        'rgba(255, 105, 180, 0.15)',
        'rgba(191, 0, 191, 0.15)',
        'rgba(224, 81, 255, 0.15)',
        'rgba(0, 183, 255, 0.15)'
    ];
    
    // Create floating particles
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        const size = Math.random() * 4 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.animationDelay = `${Math.random() * 25}s`;
        particle.style.animationDuration = `${20 + Math.random() * 15}s`;
        
        particlesContainer.appendChild(particle);
    }
    
    // Create pulse dots
    for (let i = 0; i < 10; i++) {
        const dot = document.createElement('div');
        dot.classList.add('pulse-dot');
        
        dot.style.left = `${Math.random() * 100}%`;
        dot.style.top = `${Math.random() * 100}%`;
        dot.style.animationDelay = `${Math.random() * 6}s`;
        
        particlesContainer.appendChild(dot);
    }
}

// Enhanced Mobile Navigation
const mobileNavBtn = document.getElementById('mobileNavBtn');
const mobileNav = document.getElementById('mobileNav');
const navCategories = document.querySelectorAll('.mobile-nav-category');

mobileNavBtn.addEventListener('click', () => {
    mobileNavBtn.classList.toggle('active');
    mobileNav.classList.toggle('active');
});

// Make categories collapsible
navCategories.forEach(category => {
    const heading = category.querySelector('h3');
    heading.addEventListener('click', () => {
        category.classList.toggle('active');
    });
});

// Close mobile nav when clicking outside
document.addEventListener('click', (e) => {
    if (!mobileNav.contains(e.target) && !mobileNavBtn.contains(e.target)) {
        mobileNavBtn.classList.remove('active');
        mobileNav.classList.remove('active');
    }
});

// Peach panic button functionality with drag and swipe away
const peachWrap = document.getElementById('peachWrap');
const panicButton = document.getElementById('panicButton');
let isDragging = false;
let startX, startY, initialX, initialY;
let swipeStartX, swipeStartY;
let swipeThreshold = 50; // Distance needed to swipe away

// Add touch event listeners for swiping
peachWrap.addEventListener('touchstart', handleTouchStart, false);
peachWrap.addEventListener('touchmove', handleTouchMove, false);
peachWrap.addEventListener('touchend', handleTouchEnd, false);

// Mouse events for dragging
peachWrap.addEventListener('mousedown', dragStart);
document.addEventListener('mousemove', drag);
document.addEventListener('mouseup', dragEnd);

function handleTouchStart(e) {
    const touch = e.touches[0];
    swipeStartX = touch.clientX;
    swipeStartY = touch.clientY;
    initialX = touch.clientX - peachWrap.offsetLeft;
    initialY = touch.clientY - peachWrap.offsetTop;
}

function handleTouchMove(e) {
    if (!swipeStartX || !swipeStartY) return;
    
    const touch = e.touches[0];
    const swipeX = touch.clientX - swipeStartX;
    const swipeY = touch.clientY - swipeStartY;
    
    // If the swipe is mostly horizontal and exceeds threshold, remove the button
    if (Math.abs(swipeX) > swipeThreshold && Math.abs(swipeX) > Math.abs(swipeY)) {
        peachWrap.style.display = 'none';
        return;
    }
    
    // Otherwise, allow dragging
    e.preventDefault();
    let x = touch.clientX - initialX;
    let y = touch.clientY - initialY;
    
    // Keep within viewport bounds
    x = Math.max(0, Math.min(x, window.innerWidth - peachWrap.offsetWidth));
    y = Math.max(0, Math.min(y, window.innerHeight - peachWrap.offsetHeight));
    
    peachWrap.style.left = x + 'px';
    peachWrap.style.top = y + 'px';
    peachWrap.style.right = 'auto';
    peachWrap.style.bottom = 'auto';
}

function handleTouchEnd() {
    swipeStartX = null;
    swipeStartY = null;
}

function dragStart(e) {
    initialX = e.clientX - peachWrap.offsetLeft;
    initialY = e.clientY - peachWrap.offsetTop;
    
    if (e.target === panicButton || e.target === peachWrap) {
        isDragging = true;
    }
}

function drag(e) {
    if (isDragging) {
        e.preventDefault();
        let x = e.clientX - initialX;
        let y = e.clientY - initialY;
        
        // Keep within viewport bounds
        x = Math.max(0, Math.min(x, window.innerWidth - peachWrap.offsetWidth));
        y = Math.max(0, Math.min(y, window.innerHeight - peachWrap.offsetHeight));
        
        peachWrap.style.left = x + 'px';
        peachWrap.style.top = y + 'px';
        peachWrap.style.right = 'auto';
        peachWrap.style.bottom = 'auto';
    }
}

function dragEnd() {
    isDragging = false;
}

panicButton.addEventListener('click', function() {
    if (!isDragging) {
        showEmergencyModal();
    }
});

// Emergency Modal functions
function showEmergencyModal() {
    document.getElementById('emergencyModal').style.display = 'flex';
    window.history.pushState({modal: true}, '');
}

function closeEmergencyModal() {
    document.getElementById('emergencyModal').style.display = 'none';
    if (window.history.state && window.history.state.modal) {
        window.history.back();
    }
}

window.addEventListener('click', function(e) {
    if (e.target === document.getElementById('emergencyModal')) {
        closeEmergencyModal();
    }
});

window.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeEmergencyModal();
    }
});

window.addEventListener('popstate', function() {
    if (document.getElementById('emergencyModal').style.display === 'flex') {
        closeEmergencyModal();
    }
});

// Enhanced Search functionality - now searches ALL content
const siteContent = [
    // Home page content
    {title: "Home", url: "index.html", category: "Main", content: "PLURderapolis: Harm reduction for Minnesota ravers, mental health, consent, safer partying."},
    
    // Safety & Emergency
    {title: "Panic Button", url: "panic.html", category: "Safety", content: "Emergency panic button for instant access to help in crisis situations."},
    {title: "Emergency Guides", url: "emergency.html", category: "Safety", content: "Step-by-step instructions for medical and crisis situations including overdose response."},
    {title: "Drink Spiking", url: "spiking.html", category: "Safety", content: "Information on preventing and responding to drink spiking incidents at events."},
    {title: "Narcan", url: "resources.html", category: "Safety", content: "Information about Narcan, where to get it, and how to use it for overdose reversal."},
    
    // Drug Information
    {title: "Polydrug Tool", url: "polydrug.html", category: "Drug Info", content: "Interactive tool to check dangerous drug interactions and polydrug risks."},
    {title: "RX + Party Combos", url: "rx-combos.html", category: "Drug Info", content: "Risks of combining prescription medications with party drugs."},
    {title: "Raver Health", url: "health.html", category: "Drug Info", content: "Hydration, cooling, safety tips for events and raves to prevent harm."},
    {title: "Symptom Checker", url: "symptoms.html", category: "Drug Info", content: "Tool to help identify symptoms and potential drug interactions."},
    {title: "Fake Drugs & Alerts", url: "fake.html", category: "Drug Info", content: "Information about counterfeit drugs circulating in Minnesota and harm reduction alerts."},
    
    // Consent & Community
    {title: "Consent Basics", url: "consent.html", category: "Consent", content: "Consent education for safer nightlife and festival environments."},
    {title: "Accountability", url: "accountability.html", category: "Consent", content: "Resources on community accountability and creating safer spaces."},
    {title: "Rejection Violence Prevention", url: "rejection-based-violence.html", category: "Consent", content: "Strategies for preventing violence when someone says 'no' or sets boundaries."},
    
    // Local Scene
    {title: "Venues Guide", url: "venues-guide.html", category: "Local", content: "Minnesota venue information, safety guides, and harm reduction resources."},
    {title: "Our Booth", url: "booth.html", category: "Local", content: "Information about our harm reduction booth services and event schedule."},
    
    // More Resources
    {title: "Seasonal Tips", url: "seasonal.html", category: "Resources", content: "Tips for staying safe during hot summer raves or cold Minnesota winters."},
    {title: "Sober Ravers", url: "sober.html", category: "Resources", content: "Support and advice for enjoying raves without substances including mocktail recipes."},
    {title: "MN Resources", url: "resources.html", category: "Resources", content: "Directory of Minnesota resources including Plan B, clinics, DV support, recovery, mental health."},
    {title: "Bad Trip Mode", url: "badtrip.html", category: "Resources", content: "Calming visuals, grounding exercises, and support for difficult psychedelic experiences."}
];

const searchInput = document.getElementById('searchInput');
const searchResults = document.getElementById('searchResults');

searchInput.addEventListener('input', performSearch);
searchInput.addEventListener('focus', performSearch);

function performSearch() {
    const query = searchInput.value.toLowerCase();
    searchResults.innerHTML = '';
    
    if (!query) {
        searchResults.style.display = 'none';
        return;
    }
    
    const results = siteContent.filter(item => 
        item.title.toLowerCase().includes(query) || 
        item.content.toLowerCase().includes(query) ||
        item.category.toLowerCase().includes(query)
    );
    
    if (results.length > 0) {
        const resultsList = document.createElement('ul');
        
        results.forEach(item => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `
                <span class="icon">${getIconForCategory(item.category)}</span>
                <div>
                    <strong>${item.title}</strong><br>
                    <small>${item.content.substring(0, 70)}...</small>
                </div>
                <span class="category">${item.category}</span>
            `;
            listItem.onclick = () => {
                window.location.href = item.url;
            };
            resultsList.appendChild(listItem);
        });
        
        searchResults.appendChild(resultsList);
        searchResults.style.display = 'block';
    } else {
        searchResults.innerHTML = '<div style="padding:12px;">No results found</div>';
        searchResults.style.display = 'block';
    }
}

function getIconForCategory(category) {
    switch(category) {
        case 'Safety': return 'üö®';
        case 'Drug Info': return 'üíä';
        case 'Consent': return '‚úÖ';
        case 'Local': return 'üìç';
        case 'Resources': return 'üìö';
        case 'Main': return 'üè†';
        default: return 'üìÑ';
    }
}

// Close search results when clicking outside
document.addEventListener('click', function(e) {
    if (!e.target.closest('.search-container')) {
        searchResults.style.display = 'none';
    }
});

// Improved Collapsible Sections with enhanced animations and mobile-friendly features
document.addEventListener('DOMContentLoaded', function() {
    const collapsibleToggles = document.querySelectorAll('.collapsible-toggle');
    const sectionCards = document.querySelectorAll('.section-card');
    
    // Initialize sections based on their initial class
    sectionCards.forEach(card => {
        if (card.classList.contains('expanded')) {
            const content = card.querySelector('.collapsible-content');
            const toggle = card.querySelector('.collapsible-toggle');
            content.classList.add('expanded');
            toggle.textContent = '‚àí';
        } else if (card.classList.contains('collapsed')) {
            const content = card.querySelector('.collapsible-content');
            const toggle = card.querySelector('.collapsible-toggle');
            content.classList.remove('expanded');
            toggle.textContent = '+';
        }
    });
    
    collapsibleToggles.forEach(toggle => {
        toggle.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent triggering the card header click on mobile
            const card = this.closest('.section-card');
            const content = card.querySelector('.collapsible-content');
            const isExpanded = content.classList.contains('expanded');
            
            // Toggle the content with smooth animation
            if (isExpanded) {
                content.classList.remove('expanded');
                this.textContent = '+';
                card.classList.add('collapsed');
                card.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
                this.textContent = '‚àí';
                card.classList.remove('collapsed');
                card.classList.add('expanded');
            }
        });
    });
    
    // Make entire header clickable on mobile
    const cardHeaders = document.querySelectorAll('.card-header');
    cardHeaders.forEach(header => {
        header.addEventListener('click', function(e) {
            // Only trigger on mobile or if the toggle button wasn't clicked
            if (window.innerWidth <= 768 && !e.target.classList.contains('collapsible-toggle')) {
                const toggle = this.querySelector('.collapsible-toggle');
                toggle.click();
            }
        });
    });
    
    // Create background particles
    createParticles();
});

// Scroll to Top Button Functionality
const scrollTopBtn = document.getElementById('scrollTopBtn');

window.addEventListener('scroll', function() {
    if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
        scrollTopBtn.style.display = 'block';
    } else {
        scrollTopBtn.style.display = 'none';
    }
});

scrollTopBtn.addEventListener('click', function() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});

// Add floating animation to section cards
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.section-card');
    cards.forEach((card, index) => {
        // Already added via CSS classes
    });
});
</script>

</body>
</html>
