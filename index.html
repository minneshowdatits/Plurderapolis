<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers</title>
    <meta name="description" content="Minnesota's premier harm reduction resource for the electronic music community. Get emergency help, drug interaction info, and rave safety resources.">
    <meta name="keywords" content="harm reduction, Minnesota, rave, electronic music, drug safety, overdose prevention, Narcan, PLUR">
    <meta name="author" content="PLURderapolis">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://plurderapolis.org/">
    <meta property="og:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="og:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="og:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://plurderapolis.org/">
    <meta property="twitter:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="twitter:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="twitter:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçë</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0d0d0d;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            background: radial-gradient(circle at bottom, #0d0d0d 0%, #1a001a 100%);
            padding-bottom: 70px;
        }

        /* Enhanced Minneapolis Skyline */
        .skyline-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            z-index: 0;
            overflow: hidden;
        }
        
        .skyline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, 
                rgba(0, 247, 224, 0.3) 0%, 
                transparent 20%,
                transparent 80%,
                rgba(255, 105, 180, 0.2) 100%
            );
            clip-path: polygon(
                0% 100%, 2% 70%, 4% 80%, 6% 60%, 8% 90%, 10% 50%,
                12% 70%, 14% 85%, 16% 65%, 18% 95%, 20% 55%, 22% 75%,
                24% 85%, 26% 60%, 28% 80%, 30% 90%, 32% 65%, 34% 75%,
                36% 100%, 38% 70%, 40% 85%, 42% 60%, 44% 95%, 46% 50%,
                48% 80%, 50% 70%, 52% 90%, 54% 60%, 56% 85%, 58% 75%,
                60% 100%, 62% 65%, 64% 90%, 66% 55%, 68% 80%, 70% 70%,
                72% 95%, 74% 60%, 76% 85%, 78% 75%, 80% 100%, 82% 65%,
                84% 90%, 86% 50%, 88% 80%, 90% 70%, 92% 95%, 94% 60%,
                96% 85%, 98% 75%, 100% 100%
            );
            filter: drop-shadow(0 0 8px #00f7e0) drop-shadow(0 0 16px #ff69b4);
            animation: skylineGlow 4s infinite alternate, glitch 5s infinite;
        }
        
        @keyframes skylineGlow {
            0% { filter: drop-shadow(0 0 8px #00f7e0) drop-shadow(0 0 16px #ff69b4); opacity: 0.8; }
            100% { filter: drop-shadow(0 0 12px #00f7e0) drop-shadow(0 0 24px #ff69b4); opacity: 1; }
        }
        
        @keyframes glitch {
            0%, 100% { transform: translateX(0); }
            5% { transform: translateX(-2px); }
            10% { transform: translateX(2px); }
            15% { transform: translateX(-1px); }
            20% { transform: translateX(1px); }
            50% { transform: translateX(0); }
        }

        .site-title {
            text-align: center;
            padding: 0.5rem 1rem 0.5rem;
            position: relative;
            z-index: 2;
            margin-top: 0.5rem;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .site-title h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            color: #00f7e0;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            background: linear-gradient(90deg, #00f7e0 0%, #a3f7ff 50%, #00f7e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shineMove 6s linear infinite;
            filter: drop-shadow(0 0 6px #00f7e0aa);
            margin: 0;
        }
        
        .site-title .tagline {
            font-family: 'Roboto', sans-serif;
            color: #88e9e3;
            font-size: 0.9rem;
            letter-spacing: 0.1em;
            margin-top: 0.25rem;
            font-weight: 600;
            text-transform: uppercase;
            opacity: 0.8;
        }
        
        @keyframes shineMove {0% {background-position: 100% 0;}100% {background-position: 0 0;}}
        @keyframes fadeInDown {
            0% { opacity: 0; transform: translateY(-20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Improved hamburger menu for mobile */
        .menu-btn {
            position: fixed;
            top: 12px;
            left: 12px;
            z-index: 1100;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            background: rgba(58, 0, 82, 0.8);
            border-radius: 8px;
            border: 1px solid #00f7e0;
            transition: all 0.3s ease;
        }
        
        .menu-btn:hover {
            background: rgba(93, 58, 125, 0.9);
            transform: scale(1.05);
        }
        
        .menu-btn div {
            height: 3px;
            width: 24px;
            background: #00f7e0;
            border-radius: 3px;
            transition: all 0.3s ease;
            margin: 2.5px 0;
        }
        
        .menu-btn.active div:nth-child(1){ transform: rotate(45deg) translate(5px,5px);}
        .menu-btn.active div:nth-child(2){ opacity:0;}
        .menu-btn.active div:nth-child(3){ transform: rotate(-45deg) translate(7px,-7px);}
        
        .side-nav {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100%;
            background: #3a0052;
            box-shadow: 2px 0 10px #000000aa;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding-top: 70px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .side-nav.active { 
            left: 0;
            animation: slideInLeft 0.4s ease-out;
        }
        
        @keyframes slideInLeft {
            0% { left: -280px; }
            100% { left: 0; }
        }
        
        .side-nav ul { 
            list-style: none; 
            padding: 0;
        }
        
        .side-nav ul li { 
            padding: 0;
            position: relative;
        }
        
        .side-nav ul li a {
            display: block; 
            padding: 16px 20px; 
            color: #fff; 
            text-decoration: none; 
            border-bottom: 1px solid #5d3a7d;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .side-nav ul li a:hover { 
            background: #5d3a7d; 
            padding-left: 25px;
        }
        
        .side-nav ul li ul { 
            display: none; 
            background: rgba(45, 0, 65, 0.7);
        }
        
        .side-nav ul li.show > ul { 
            display: block; 
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; max-height: 0; }
            100% { opacity: 1; max-height: 500px; }
        }
        
        .side-nav ul li ul li a { 
            font-weight: normal; 
            font-size: 0.95rem; 
            padding-left: 35px;
        }
        
        .nav-indicator {
            position: absolute;
            right: 15px;
            transition: transform 0.3s ease;
        }
        
        .side-nav ul li.show > a .nav-indicator {
            transform: rotate(90deg);
        }

        /* Less obtrusive alert banner */
        .rave-alert-wrapper {
            background-color: rgba(26, 26, 26, 0.9);
            overflow: hidden;
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            position: relative;
            height: 2rem;
            display: flex;
            align-items: center;
            width: 100vw;
            z-index: 2;
            margin-top: 0.5rem;
            backdrop-filter: blur(4px);
            animation: slideInDown 0.5s ease-out;
        }
        
        @keyframes slideInDown {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .rave-alert-link {
            display: inline-block;
            white-space: nowrap;
            color: #ff69b4;
            font-size: 0.8rem;
            text-decoration: none;
            padding-left: 100%;
            animation: scroll-left 20s linear infinite;
        }
        
        @keyframes scroll-left {0%{transform:translateX(0);}100%{transform:translateX(-100%);}}

        /* Grid Layout with Spacing - Reduced top heaviness */
        .sections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }
        
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .section-card {
            background-color: #3a0052;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 0 15px rgba(0,255,255,0.1);
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
            border-left: 4px solid;
            display: flex;
            flex-direction: column;
            height: 100%;
            animation: cardSlideIn 0.6s ease-out both;
        }
        
        .section-card:nth-child(1) { animation-delay: 0.1s; border-left-color: #bf00bf; }
        .section-card:nth-child(2) { animation-delay: 0.2s; border-left-color: #e051ff; }
        .section-card:nth-child(3) { animation-delay: 0.3s; border-left-color: #00b7ff; }
        .section-card:nth-child(4) { animation-delay: 0.4s; border-left-color: #ff9a7a; }
        .section-card:nth-child(5) { animation-delay: 0.5s; border-left-color: #00c896; }
        .section-card:nth-child(6) { animation-delay: 0.6s; border-left-color: #ffb300; }
        .section-card:nth-child(7) { animation-delay: 0.7s; border-left-color: #bf00bf; }
        
        @keyframes cardSlideIn {
            0% { opacity: 0; transform: translateY(20px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 0.5rem 0;
            margin-bottom: 1rem;
        }
        
        .section-card h2 { 
            font-family:'Montserrat',sans-serif;
            margin: 0;
            font-size: 1.3rem;
        }
        
        /* Different header colors for each section */
        .section-card:nth-child(1) h2 { color: #bf00bf; }
        .section-card:nth-child(2) h2 { color: #e051ff; }
        .section-card:nth-child(3) h2 { color: #00b7ff; }
        .section-card:nth-child(4) h2 { color: #ff9a7a; }
        .section-card:nth-child(5) h2 { color: #00c896; }
        .section-card:nth-child(6) h2 { color: #ffb300; }
        .section-card:nth-child(7) h2 { color: #bf00bf; }
        
        .card-content {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.4s ease;
        }
        
        .card-content.expanded {
            max-height: 2000px;
        }
        
        .toggle-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .section-card.expanded .toggle-icon {
            transform: rotate(180deg);
        }
        
        .section-card ul { padding-left:1.2rem;}
        .section-card ul li { 
            margin-bottom:0.8rem;
            line-height: 1.5;
        }
        
        .section-card p {
            line-height: 1.6;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        
        .cta-button { 
            display:inline-block; 
            margin-top:0.8rem; 
            background:#00f7e0; 
            color:#2e003e; 
            padding:0.7rem 1.2rem; 
            border-radius:8px; 
            text-decoration:none; 
            font-weight:bold; 
            transition: all 0.2s;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .cta-button:hover{
            opacity:0.85; 
            transform:scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .card-container { 
            display:flex; 
            flex-wrap:wrap; 
            gap:1rem; 
            justify-content:center;
            margin-top: 1rem;
        }
        
        .card { 
            background:#2a0036; 
            border-radius:10px; 
            padding:1.2rem; 
            width:100%; 
            max-width: 280px;
            box-shadow:0 0 15px rgba(255,111,145,0.3); 
            transition: all 0.3s ease; 
            border: 1px solid #5d3a7d;
            display: flex;
            flex-direction: column;
            animation: cardFadeIn 0.5s ease-out both;
        }
        
        .card:hover { 
            transform:translateY(-5px); 
            box-shadow:0 0 25px rgba(255,111,145,0.6); 
        }
        
        @keyframes cardFadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .card h3 { 
            color:#ff69b4; 
            font-family:'Montserrat',sans-serif; 
            margin-top:0;
            font-size: 1.1rem;
            border-bottom: 1px solid #ff69b4;
            padding-bottom: 0.5rem;
        }
        
        .card p { 
            font-size:0.9rem; 
            flex-grow: 1;
        }

        .search-container {
            position: relative;
            width: 90%;
            margin: 1rem auto;
            z-index: 100;
            animation: fadeIn 0.8s ease-out 0.4s both;
        }

        .search-bar { 
            display:flex; 
            position: relative;
        }
        
        .search-bar input{ 
            flex:1; 
            padding:10px; 
            border:none; 
            border-radius:5px 0 0 5px; 
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid #00f7e0;
            font-size: 0.9rem;
        }
        
        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .search-bar button{ 
            padding:10px; 
            border:none; 
            background:#00f7e0; 
            color:#2e003e; 
            border-radius:0 5px 5px 0; 
            cursor:pointer; 
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .search-bar button:hover {
            background: #00e0c9;
        }

        #searchResults { 
            position:absolute; 
            top:100%; 
            left:0; 
            right:0; 
            background:#3a0052; 
            max-height:200px; 
            overflow-y:auto; 
            border-radius:0 0 5px 5px; 
            display:none; 
            z-index:1004; 
            box-shadow:0 0 12px rgba(0,255,255,0.2);
            border: 1px solid #00f7e0;
            border-top: none;
        }
        
        #searchResults ul { list-style:none; padding:0; margin:0;}
        #searchResults li { padding:10px; border-bottom:1px solid #5d3a7d; cursor:pointer; font-size: 0.9rem;}
        #searchResults li:hover { background:#5d3a7d; }
        #searchResults li:last-child { border-bottom: none; }

        /* Enhanced peach button with "HELP!" text */
        #peachWrap {
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            z-index: 1002; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 6px;
            touch-action: none;
            cursor: move;
            animation: bounceIn 1s ease-out 0.5s both;
        }
        
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        #panicButton {
            width: 60px; 
            height: 60px; 
            font-size: 2.5rem;
            background: radial-gradient(circle at 35% 35%, #ffb07c, #ff6f91);
            border-radius: 50% 50% 45% 55% / 60% 55% 45% 50%;
            position: relative;
            display: flex; 
            justify-content: center; 
            align-items: center;
            cursor: pointer; 
            text-decoration: none; 
            color: #fff;
            box-shadow: 0 0 15px #ff69b4, 0 0 30px #00f7e0;
            animation: emojiPulse 2s infinite;
            user-select: none;
        }
        
        #panicButton::before {
            content: "";
            position: absolute;
            top: -8px; 
            left: 22px;
            width: 15px; 
            height: 12px;
            background: linear-gradient(135deg, #ff9a7a, #ff7a5a);
            border-radius: 50%;
            transform: rotate(-20deg);
        }
        
        #panicButton:hover { 
            transform: scale(1.2);
            animation: none;
        }
        
        .help-text {
            color: #ff9a7a;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(255, 154, 122, 0.8);
            font-size: 0.8rem;
            text-align: center;
            animation: blink 3s infinite;
        }
        
        @keyframes emojiPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        footer {
            margin-top: 2rem;
            font-size: 0.8rem;
            color: #aaa;
            text-align: center; 
            position: relative; 
            z-index: 2;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid #444;
        }
        
        footer hr {
            border-color: #444;
            margin-bottom: 0.8rem;
        }
        
        footer p {
            max-width: 800px;
            margin: 0.5rem auto;
            line-height: 1.5;
        }
        
        footer ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0.8rem 0;
            gap: 8px;
        }
        
        footer ul li a {
            color: #00f7e0;
            padding: 0 8px;
            text-decoration: none;
            transition: color 0.2s;
            font-size: 0.8rem;
        }
        
        footer ul li a:hover {
            color: #ff69b4;
            text-decoration: underline;
        }

        /* NEW: Sober Ravers Mocktail Slider */
        .sober-section {
            background: #2a0036;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid #5d3a7d;
        }
        
        .mocktail-scroll-container {
            overflow-x: auto;
            padding-bottom: 10px;
            margin-top: 15px;
            scrollbar-width: thin;
            scrollbar-color: #00f7e0 #2a0036;
            cursor: grab;
        }
        
        .mocktail-scroll-container:active {
            cursor: grabbing;
        }
        
        .mocktail-scroll-container::-webkit-scrollbar {
            height: 6px;
        }
        
        .mocktail-scroll-container::-webkit-scrollbar-track {
            background: #2a0036;
            border-radius: 3px;
        }
        
        .mocktail-scroll-container::-webkit-scrollbar-thumb {
            background: #00f7e0;
            border-radius: 3px;
        }
        
        .mocktail-grid {
            display: flex;
            gap: 15px;
            padding: 5px;
            width: max-content;
        }
        
        .mocktail-card {
            background: #3a0052;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #00c896;
            transition: all 0.3s ease;
            min-width: 250px;
            flex-shrink: 0;
            animation: slideInRight 0.5s ease-out both;
        }
        
        .mocktail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 200, 150, 0.3);
        }
        
        .mocktail-card h3 {
            color: #00c896;
            margin-top: 0;
            border-bottom: 1px solid #00c896;
            padding-bottom: 6px;
            font-size: 1.1rem;
        }
        
        .mocktail-ingredients {
            margin: 8px 0;
            font-size: 0.9rem;
        }
        
        .mocktail-instructions {
            font-size: 0.85rem;
            color: #ccc;
        }
        
        .view-all {
            text-align: center;
            margin-top: 15px;
        }

        /* Polydrug Tool Widget Styles */
        .polydrug-widget {
            background: #1b0b1b;
            border-radius: 14px;
            padding: 16px;
            box-shadow: 0 0 12px rgba(191, 0, 191, 0.25);
            margin: 15px 0;
            border: 1px solid #440044;
        }
        
        .polydrug-widget h3 {
            font-size: 1.1rem;
            margin: 0.2rem 0 0.6rem;
            color: #e051ff;
            font-family: 'Montserrat', sans-serif;
        }
        
        .widget-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .widget-sel {
            flex: 1 1 180px;
            min-width: 160px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .widget-sel label {
            font-weight: 700;
            color: #bf00bf;
            font-size: 0.9rem;
        }
        
        .widget-sel select {
            width: 100%;
            padding: 0.6rem 0.7rem;
            border: 1px solid #440044;
            border-radius: 10px;
            background: #220022;
            color: #fff;
            appearance: none;
            font-size: 0.9rem;
        }
        
        .widget-btn {
            background: #bf00bf;
            color: #fff;
            border: 0;
            border-radius: 10px;
            padding: 0.7rem 1rem;
            font-weight: 800;
            cursor: pointer;
            align-self: flex-end;
            transition: all 0.2s;
        }
        
        .widget-btn:hover {
            background: #e051ff;
            transform: translateY(-2px);
        }
        
        .widget-result {
            margin-top: 10px;
            border: 1px dashed #440044;
            border-radius: 12px;
            padding: 10px;
            background: #170717;
            min-height: 80px;
        }
        
        .widget-result h4 {
            margin: 0.2rem 0 0.4rem;
            color: #ffd6ff;
            font-size: 1rem;
        }
        
        .widget-legend {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 8px 0 0;
            font-size: 0.85rem;
            color: #bcbcbc;
        }
        
        .legend-item {
            display: inline-flex;
            gap: 6px;
            align-items: center;
            background: #200120;
            border: 1px solid #440044;
            border-radius: 999px;
            padding: 0.25rem 0.6rem;
        }
        
        .widget-open-full {
            text-align: center;
            margin-top: 15px;
        }
        
        .widget-open-full .cta-button {
            background: #e051ff;
            color: #fff;
        }

        /* Polydrug Matrix Styles */
        .polydrug-matrix {
            margin-top: 15px;
            overflow-x: auto;
        }
        
        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }
        
        .matrix-table th, .matrix-table td {
            border: 1px solid #5d3a7d;
            padding: 6px;
            text-align: center;
        }
        
        .matrix-table th {
            background: #2a0036;
            color: #00f7e0;
            font-weight: bold;
        }
        
        .matrix-table td {
            background: #220022;
        }
        
        .safe-cell {
            background-color: rgba(0, 200, 83, 0.2);
            color: #00c853;
        }
        
        .caution-cell {
            background-color: rgba(255, 179, 0, 0.2);
            color: #ffb300;
        }
        
        .danger-cell {
            background-color: rgba(255, 82, 82, 0.2);
            color: #ff5252;
        }
        
        .unknown-cell {
            background-color: rgba(100, 100, 100, 0.2);
            color: #b4b4b4;
        }

        /* Glowing section */
        .glow-section {
            position: relative;
            overflow: hidden;
        }
        
        .glow-section::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ff69b4, #00f7e0, #ff69b4, #00f7e0);
            background-size: 400% 400%;
            z-index: -1;
            animation: glowing 3s ease-in-out infinite;
            border-radius: 15px;
            opacity: 0.3;
            filter: blur(8px);
        }
        
        @keyframes glowing {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Bad Trip Button */
        .bad-trip-button {
            display: inline-block;
            background: linear-gradient(135deg, #ff69b4, #00f7e0);
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 0.8rem;
            font-size: 0.8rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
        }
        
        .bad-trip-button:hover {
            opacity: 0.85;
            transform: scale(1.03);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        /* What We Do dropdown styles */
        .what-we-do-card .card-header {
            background: rgba(0, 0, 0, 0.2);
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        
        .what-we-do-card .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .what-we-do-card.expanded .card-content {
            max-height: 2000px;
        }
        
        .what-we-do-card .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .what-we-do-card.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        /* Improved link visibility */
        a {
            transition: color 0.2s, background-color 0.2s;
        }
        
        .resource-links {
            margin-top: 12px;
            border-top: 1px solid #5d3a7d;
            padding-top: 12px;
        }
        
        .resource-links h4 {
            color: #00f7e0;
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .resource-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .resource-links li {
            margin-bottom: 6px;
        }
        
        .resource-links a {
            display: block;
            color: #ff69b4;
            text-decoration: none;
            padding: 6px 8px;
            border-radius: 4px;
            background: rgba(255, 105, 180, 0.1);
            transition: all 0.2s;
            font-size: 0.9rem;
        }
        
        .resource-links a:hover {
            background-color: rgba(255, 105, 180, 0.2);
            padding-left: 12px;
            color: #ff8ac0;
        }

        /* Mobile HUD Navigation */
        .mobile-hud {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(58, 0, 82, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            z-index: 1001;
            backdrop-filter: blur(5px);
            border-top: 1px solid #00f7e0;
            animation: slideInUp 0.5s ease-out;
        }
        
        @keyframes slideInUp {
            0% { transform: translateY(100%); }
            100% { transform: translateY(0); }
        }

        .hud-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.7rem;
            padding: 5px;
            flex: 1;
            text-align: center;
            transition: all 0.2s;
        }
        
        .hud-btn:hover {
            transform: translateY(-3px);
        }

        .hud-btn span {
            font-size: 1.3rem;
            margin-bottom: 2px;
        }

        /* Emergency Modal */
        .emergency-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background-color: #3a0052;
            padding: 20px;
            border-radius: 10px;
            max-width: 100%;
            max-height: 90%;
            overflow-y: auto;
            border: 2px solid #00f7e0;
            box-shadow: 0 0 20px rgba(0, 247, 224, 0.5);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #00f7e0;
            padding-bottom: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            color: #00f7e0;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .close-modal:hover {
            transform: scale(1.2);
        }

        .emergency-steps {
            margin: 15px 0;
        }

        .emergency-steps ol {
            padding-left: 20px;
        }

        .emergency-steps li {
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .emergency-contact {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .emergency-contact h4 {
            color: #ff69b4;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        @media (min-width: 768px) {
            .sections-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card-container {
                gap: 1.5rem;
            }
            
            .card {
                width: 280px;
                padding: 1.5rem;
            }
            
            #panicButton {
                width: 70px;
                height: 70px;
                font-size: 3rem;
            }
            
            .help-text {
                font-size: 1rem;
            }
            
            .skyline-container {
                height: 150px;
            }
            
            .mocktail-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                width: 100%;
            }
            
            .mocktail-card {
                min-width: auto;
            }
        }

        @media (min-width: 1024px) {
            .sections-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .mobile-hud {
                display: none;
            }
            
            .menu-btn {
                width: 45px;
                height: 45px;
            }
            
            .menu-btn div {
                width: 26px;
            }
        }
    </style>
</head>
<body>

<div class="skyline-container">
    <div class="skyline"></div>
</div>

<!-- Improved hamburger menu -->
<div class="menu-btn" id="menuBtn">
    <div></div><div></div><div></div>
</div>

<nav class="side-nav" id="sideNav">
    <ul>
        <li><a href="index.html">Home <span class="nav-indicator">‚ñ∂</span></a></li>
        <li><a href="#">Safety <span class="nav-indicator">‚ñ∂</span></a>
            <ul>
                <li><a href="panic.html">Panic Button</a></li>
                <li><a href="emergency.html">Emergency Guides</a></li>
                <li><a href="spiking.html">Drink Spiking</a></li>
            </ul>
        </li>
        <li><a href="#">Drug Info <span class="nav-indicator">‚ñ∂</span></a>
            <ul>
                <li><a href="polydrug.html">Polydrug Tool</a></li>
                <li><a href="rx-combos.html">RX + Party Combos</a></li>
                <li><a href="health.html">Raver Health</a></li>
                <li><a href="fake.html">Fake Drugs & Alerts</a></li>
            </ul>
        </li>
        <li><a href="#">Consent <span class="nav-indicator">‚ñ∂</span></a>
            <ul>
                <li><a href="consent.html">Consent Basics</a></li>
                <li><a href="accountability.html">Accountability</a></li>
                <li><a href="rejection-based-violence.html">Rejection-Based Violence</a></li>
            </ul>
        </li>
        <li><a href="#">Local Scene <span class="nav-indicator">‚ñ∂</span></a>
            <ul>
                <li><a href="venues-guide.html">Venues Guide</a></li>
                <li><a href="booth.html">Our Booth</a></li>
            </ul>
        </li>
        <li><a href="#">Extras <span class="nav-indicator">‚ñ∂</span></a>
            <ul>
                <li><a href="seasonal.html">Seasonal Tips</a></li>
                <li><a href="sober.html">Sober Ravers</a></li>
                <li><a href="resources.html">MN Resources</a></li>
                <li><a href="badtrip.html">Bad Trip Mode</a></li>
            </ul>
        </li>
    </ul>
</nav>

<!-- Less obtrusive alert banner -->
<div class="rave-alert-wrapper">
    <a href="fake.html" class="rave-alert-link">
        üö® MN Drug Supply Alert: Gray Death circulating ‚Ä¢ Fake K = fentanyl + xylazine ‚Ä¢ Test before you trust ‚Ä¢ Carry Narcan ‚Ä¢ No solo dosing ‚Ä¢ Click for full info üñ§
    </a>
</div>

<!-- Site title -->
<div class="site-title">
    <h1>PLURderapolis</h1>
    <div class="tagline">Harm Reduction for Minnesota Ravers</div>
</div>

<!-- Search -->
<div class="search-container">
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search the site...">
        <button onclick="performSearch()">üîç</button>
    </div>
    <div id="searchResults"></div>
</div>

<!-- Mobile HUD Navigation -->
<div class="mobile-hud">
    <a href="panic.html" class="hud-btn">
        <span>üö®</span>
        Panic
    </a>
    <a href="polydrug.html" class="hud-btn">
        <span>üíä</span>
        Tool
    </a>
    <a href="resources.html" class="hud-btn">
        <span>üìö</span>
        Resources
    </a>
    <a href="sober.html" class="hud-btn">
        <span>üçπ</span>
        Sober
    </a>
    <a href="badtrip.html" class="hud-btn">
        <span>üåà</span>
        Bad Trip
    </a>
</div>

<!-- Grid layout for sections -->
<div class="sections-grid">
    <!-- What We Do Section -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üí° What We Do</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>PLURderapolis provides essential harm reduction resources, education, and support for Minnesota's electronic music community.</p>
            
            <div class="card-container">
                <!-- Harm Reduction Card with Dropdown -->
                <div class="card what-we-do-card">
                    <div class="card-header" onclick="toggleWhatWeDoCard(this)">
                        <h3>üíä Harm Reduction</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <p>Narcan, test strips, interaction tools, and safety resources to keep our community safe.</p>
                        <a class="cta-button" href="resources.html">Get Resources</a>
                        
                        <div class="resource-links">
                            <h4>Related Resources:</h4>
                            <ul>
                                <li><a href="testing.html">ü¶† Testing Resources & Fentanyl Info</a></li>
                                <li><a href="polydrug.html">üîÄ Polydrug Interaction Tool</a></li>
                                <li><a href="rx-combos.html">üíä RX + Party Drug Combos</a></li>
                                <li><a href="fake.html">‚ö†Ô∏è Fake Drugs & Alerts</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Mental Health Card with Dropdown -->
                <div class="card what-we-do-card">
                    <div class="card-header" onclick="toggleWhatWeDoCard(this)">
                        <h3>üß† Mental Health & Crisis</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <p>Peer support, Bad Trip Mode, and emergency resources for when things get difficult.</p>
                        <a class="cta-button" href="emergency.html">Find Support</a>
                        
                        <div class="resource-links">
                            <h4>Support Resources:</h4>
                            <ul>
                                <li><a href="panic.html">üö® Panic Button & Emergency Protocols</a></li>
                                <li><a href="badtrip.html">üåÄ Bad Trip Support Guide</a></li>
                                <li><a href="resources.html#mentalhealth">üìû MN Mental Health Resources</a></li>
                                <li><a href="sober.html">üö´ Sober Raving & Recovery Support</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Consent & Culture Card with Dropdown -->
                <div class="card what-we-do-card">
                    <div class="card-header" onclick="toggleWhatWeDoCard(this)">
                        <h3>üïäÔ∏è Consent & Culture</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <p>Building respectful communities and addressing harm through education and accountability.</p>
                        <a class="cta-button" href="consent.html">Learn More</a>
                        
                        <div class="resource-links">
                            <h4>Community Resources:</h4>
                            <ul>
                                <li><a href="consent.html">‚úÖ Consent Basics & Boundaries</a></li>
                                <li><a href="accountability.html">‚öñÔ∏è Community Accountability</a></li>
                                <li><a href="spiking.html">üö´ Drink Spiking Prevention</a></li>
                                <li><a href="rejection-based-violence.html">üõ°Ô∏è Rejection Violence Prevention</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Our Booth Card with Dropdown -->
                <div class="card what-we-do-card">
                    <div class="card-header" onclick="toggleWhatWeDoCard(this)">
                        <h3>üéâ Our Booth</h3>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <p>Find our harm reduction booth at local events and festivals throughout Minnesota.</p>
                        <a class="cta-button" href="booth.html">Find Our Booth</a>
                        
                        <div class="resource-links">
                            <h4>Local Resources:</h4>
                            <ul>
                                <li><a href="booth.html">üìç Booth Schedule & Locations</a></li>
                                <li><a href="venues-guide.html">üè¢ Venue Safety Guides</a></li>
                                <li><a href="resources.html#testing">üß™ Free Testing Locations</a></li>
                                <li><a href="resources.html#naloxone">üíä Narcan Distribution Sites</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Polydrug Interaction Tool Widget -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üî¨ Drug Interactions</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>Check how different substances interact with each other.</p>
            
            <div class="polydrug-widget">
                <h3>Quick Check <span class="icons">‚ö°üíäüåà</span></h3>
                <div class="widget-row">
                    <div class="widget-sel">
                        <label for="widget-drugA">Substance A</label>
                        <select id="widget-drugA">
                            <option value="">‚Äî Select ‚Äî</option>
                            <option value="Cannabis">üåø Cannabis</option>
                            <option value="Alcohol">üç∫ Alcohol</option>
                            <option value="MDMA">‚ú® MDMA</option>
                            <option value="Cocaine">‚ùÑÔ∏è Cocaine</option>
                            <option value="Opioids">üíä Opioids</option>
                            <option value="Benzos">üò¥ Benzos</option>
                        </select>
                    </div>
                    <div class="widget-sel">
                        <label for="widget-drugB">Substance B</label>
                        <select id="widget-drugB">
                            <option value="">‚Äî Select ‚Äî</option>
                            <option value="Cannabis">üåø Cannabis</option>
                            <option value="Alcohol">üç∫ Alcohol</option>
                            <option value="MDMA">‚ú® MDMA</option>
                            <option value="Cocaine">‚ùÑÔ∏è Cocaine</option>
                            <option value="Opioids">üíä Opioids</option>
                            <option value="Benzos">üò¥ Benzos</option>
                        </select>
                    </div>
                    <button class="widget-btn" id="widget-checkBtn">Check ‚ö°</button>
                </div>
                
                <div class="widget-result" id="widget-resultBox">
                    <h4>Results will appear here</h4>
                    <p>Select two substances to check their interaction risk.</p>
                </div>
                
                <!-- Polydrug Matrix -->
                <div class="polydrug-matrix">
                    <h4>Interaction Matrix</h4>
                    <table class="matrix-table">
                        <tr>
                            <th></th>
                            <th>üåø Cannabis</th>
                            <th>üç∫ Alcohol</th>
                            <th>‚ú® MDMA</th>
                            <th>üíä Opioids</th>
                            <th>üò¥ Benzos</th>
                        </tr>
                        <tr>
                            <th>üåø Cannabis</th>
                            <td class="safe-cell">Safe</td>
                            <td class="caution-cell">Caution</td>
                            <td class="safe-cell">Safe</td>
                            <td class="danger-cell">Danger</td>
                            <td class="caution-cell">Caution</td>
                        </tr>
                        <tr>
                            <th>üç∫ Alcohol</th>
                            <td class="caution-cell">Caution</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                        </tr>
                        <tr>
                            <th>‚ú® MDMA</th>
                            <td class="safe-cell">Safe</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="caution-cell">Caution</td>
                        </tr>
                        <tr>
                            <th>üíä Opioids</th>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                        </tr>
                        <tr>
                            <th>üò¥ Benzos</th>
                            <td class="caution-cell">Caution</td>
                            <td class="danger-cell">Danger</td>
                            <td class="caution-cell">Caution</td>
                            <td class="danger-cell">Danger</td>
                            <td class="danger-cell">Danger</td>
                        </tr>
                    </table>
                </div>
                
                <div class="widget-legend">
                    <div class="legend-item">
                        <div style="width:12px;height:12px;background:rgba(0,200,83,0.3);border-radius:2px;"></div>
                        <span>Safe</span>
                    </div>
                    <div class="legend-item">
                        <div style="width:12px;height:12px;background:rgba(255,179,0,0.3);border-radius:2px;"></div>
                        <span>Caution</span>
                    </div>
                    <div class="legend-item">
                        <div style="width:12px;height:12px;background:rgba(255,82,82,0.3);border-radius:2px;"></div>
                        <span>Danger</span>
                    </div>
                </div>
                
                <div class="widget-open-full">
                    <a href="polydrug.html" class="cta-button">Open Full Tool</a>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Sober Ravers Mocktail Slider Section -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üçπ Sober Ravers</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>Delicious mocktails and tips for enjoying the scene sober.</p>
            
            <div class="sober-section">
                <div class="mocktail-scroll-container" id="mocktailScroll">
                    <div class="mocktail-grid">
                        <div class="mocktail-card">
                            <h3>üåà Electric Sunrise</h3>
                            <div class="mocktail-ingredients">
                                <strong>Ingredients:</strong> Orange juice, grenadine, soda water, lime wedge
                            </div>
                            <div class="mocktail-instructions">
                                <strong>Instructions:</strong> Fill glass with ice, add orange juice, slowly pour grenadine, top with soda water, garnish with lime.
                            </div>
                        </div>
                        
                        <div class="mocktail-card">
                            <h3>üåÄ PLUR Punch</h3>
                            <div class="mocktail-ingredients">
                                <strong>Ingredients:</strong> Cranberry juice, pineapple juice, ginger ale, fresh mint
                            </div>
                            <div class="mocktail-instructions">
                                <strong>Instructions:</strong> Mix equal parts cranberry and pineapple juice over ice, top with ginger ale, garnish with mint.
                            </div>
                        </div>
                        
                        <div class="mocktail-card">
                            <h3>‚ú® Sparkling Euphoria</h3>
                            <div class="mocktail-ingredients">
                                <strong>Ingredients:</strong> Sparkling water, elderflower syrup, cucumber slices, lime juice
                            </div>
                            <div class="mocktail-instructions">
                                <strong>Instructions:</strong> Muddle cucumber in glass, add ice, elderflower syrup, and lime juice, top with sparkling water.
                            </div>
                        </div>

                        <div class="mocktail-card">
                            <h3>üåô Midnight Mojito</h3>
                            <div class="mocktail-ingredients">
                                <strong>Ingredients:</strong> Lime juice, mint leaves, simple syrup, club soda, blackberries
                            </div>
                            <div class="mocktail-instructions">
                                <strong>Instructions:</strong> Muddle mint and blackberries, add lime juice and syrup, top with club soda, garnish with mint.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="view-all">
                    <a href="sober.html" class="cta-button">View All Sober Resources</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Panic & Emergency Tools -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üîÄ Emergency Tools</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>Quick access to emergency resources when you need them most.</p>
            
            <div class="card-container">
                <div class="card">
                    <h3>Panic Button</h3>
                    <p>Immediate access to help in emergencies.</p>
                    <a class="cta-button" href="panic.html">Go</a>
                </div>
                <div class="card">
                    <h3>Emergency Guides</h3>
                    <p>Step-by-step instructions for crises.</p>
                    <a class="cta-button" href="emergency.html">View</a>
                </div>
                <div class="card">
                    <h3>Bad Trip Mode</h3>
                    <p>Calming resources for difficult experiences.</p>
                    <a class="cta-button" href="badtrip.html">Help</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Resources Section -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üìö Resources</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>Comprehensive resources for harm reduction and mental health support.</p>
            
            <div class="card-container">
                <div class="card">
                    <h3>MN Resources</h3>
                    <p>Plan B, clinics, DV support, and recovery help.</p>
                    <a class="cta-button" href="resources.html">View</a>
                </div>
                <div class="card">
                    <h3>Raver Health</h3>
                    <p>Hydration, hearing protection & safety tips.</p>
                    <a class="cta-button" href="health.html">View</a>
                </div>
                <div class="card">
                    <h3>Seasonal Tips</h3>
                    <p>Stay safe in Minnesota's extreme weather.</p>
                    <a class="cta-button" href="seasonal.html">View</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Rejection-Based Violence Prevention Section -->
    <div class="section-card glow-section">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üõ°Ô∏è Violence Prevention</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p>Resources for preventing violence when someone says 'no' or sets boundaries.</p>
            <a class="cta-button" href="rejection-based-violence.html">Learn More</a>
        </div>
    </div>

    <!-- Our Story Section -->
    <div class="section-card">
        <div class="card-header" onclick="toggleCard(this)">
            <h2>üìñ Our Story</h2>
            <span class="toggle-icon">‚ñº</span>
        </div>
        <div class="card-content">
            <p><strong>PLURderapolis was built from years of grassroots harm reduction in Minnesota's nightlife and festival community.</strong> From Project Peach booths at warehouse shows, clubs, and events like Intellephunk's The Great Beyond, to collaborations with local collectives, this work has always been about showing up where the scene lives.</p>
            
            <p>What began with direct care at the booth has grown into a broader mission: now creating an online hub of resources and tools designed for safer nightlife. The goal is simple; make harm reduction accessible anytime, anywhere, while keeping the culture strong and the community connected.</p>
            
            <p><strong>PLURderapolis is here as your partners in shine, working to make Minnesota's nightlife safer, kinder, and, truly, Minnesota Nice again.</strong></p>
            
            <div style="text-align: center; margin-top: 25px;">
                <a href="booth.html" class="cta-button">Learn About Our Booth</a>
            </div>
        </div>
    </div>
</div>

<!-- Anonymous Tip Link -->
<div style="text-align: center; margin: 1rem;">
    <a href="http://users.smartgb.com/g/g.php?a=s&i=g19-02505-d5" target="_blank" style="color:#ff69b4; font-weight:bold; text-decoration:none;">
        üí¨ Leave an Anonymous Tip
    </a>
</div>

<!-- Emergency Modal -->
<div class="emergency-modal" id="emergencyModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Emergency Assistance</h2>
            <button class="close-modal" onclick="closeEmergencyModal()">&times;</button>
        </div>
        <div class="emergency-steps">
            <h3>If someone is unresponsive:</h3>
            <ol>
                <li>Check for responsiveness - tap shoulder and shout</li>
                <li>Call 911 immediately</li>
                <li>Check breathing - look for chest movement</li>
                <li>Administer Narcan if available and trained</li>
                <li>Perform rescue breathing if not breathing</li>
                <li>Place in recovery position if breathing</li>
            </ol>
            
            <h3>Overdose signs:</h3>
            <ul>
                <li>Unresponsive to stimuli</li>
                <li>Slow or no breathing</li>
                <li>Pale or clammy skin</li>
                <li>Blue lips or fingertips</li>
                <li>Gurgling sounds</li>
            </ul>
        </div>
        
        <div class="emergency-contact">
            <h4>Minnesota Emergency Resources:</h4>
            <p>üÜò Crisis Text Line: Text "HOME" to 741741</p>
            <p>üÜò MN Poison Control: 1-800-222-1222</p>
            <p>üÜò Mobile Crisis Services: **CRISIS (**74747)</p>
        </div>
        
        <p style="margin-top: 20px; font-weight: bold;">
            Remember: Good Samaritan laws protect you when seeking help for an overdose.
        </p>
        
        <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
            <a href="panic.html" class="cta-button">More Panic Resources</a>
            <a href="emergency.html" class="cta-button" style="background-color: #ff6ec7;">Emergency Guides</a>
        </div>
    </div>
</div>

<!-- Enhanced peach panic button with "HELP!" text -->
<div id="peachWrap">
    <div id="panicButton">üçë</div>
    <div class="help-text">HELP!</div>
</div>

<!-- Footer -->
<footer>
    <hr/>
    <p>&copy; 2025 PLURderapolis ‚Äî Community Harm Reduction</p>
    <p>Your partners in shine ‚ú¶ <a href="mailto:plurderapolis@gmail.com" style="color:#00f7e0;">plurderapolis@gmail.com</a> | Instagram: <a href="https://www.instagram.com/plurderapolis" target="_blank" style="color:#00f7e0;">@plurderapolis</a></p>
    <p style="font-size:0.8rem;color:#ccc;">Disclaimer: PLURderapolis is a peer-run harm reduction resource for Minnesota ravers. The information provided is for educational purposes only and is not intended as medical or legal advice. Always consult with a qualified professional for concerns related to health, safety, or legal matters.</p>
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="panic.html">Panic</a></li>
        <li><a href="emergency.html">Emergency</a></li>
        <li><a href="polydrug.html">Polydrug</a></li>
        <li><a href="resources.html">Resources</a></li>
        <li><a href="rejection-based-violence.html">Violence Prevention</a></li>
        <li><a href="badtrip.html">Bad Trip Mode</a></li>
    </ul>
</footer>

<script>
    // Improved hamburger toggle with better mobile support
    const menuBtn = document.getElementById('menuBtn');
    const sideNav = document.getElementById('sideNav');
    
    menuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        menuBtn.classList.toggle('active');
        sideNav.classList.toggle('active');
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
        if (!sideNav.contains(e.target) && !menuBtn.contains(e.target)) {
            menuBtn.classList.remove('active');
            sideNav.classList.remove('active');
        }
    });
    
    // Improved mobile navigation with better touch targets
    const navItems = document.querySelectorAll('.side-nav > ul > li');
    navItems.forEach(item => {
        const link = item.querySelector('a');
        const submenu = item.querySelector('ul');
        
        if (submenu) {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                item.classList.toggle('show');
            });
        } else {
            link.addEventListener('click', () => {
                // Close menu when a link without submenu is clicked (mobile behavior)
                if (window.innerWidth < 1024) {
                    menuBtn.classList.remove('active');
                    sideNav.classList.remove('active');
                }
            });
        }
    });

    // Card toggle functionality with animation
    function toggleCard(element) {
        const card = element.parentElement;
        const content = card.querySelector('.card-content');
        const isExpanding = !card.classList.contains('expanded');
        
        card.classList.toggle('expanded');
        content.classList.toggle('expanded');
        
        // Add animation class
        if (isExpanding) {
            content.style.animation = 'fadeIn 0.4s ease-out';
        }
    }
    
    // What We Do card toggle functionality
    function toggleWhatWeDoCard(element) {
        const card = element.parentElement;
        const content = card.querySelector('.card-content');
        const isExpanding = !card.classList.contains('expanded');
        
        card.classList.toggle('expanded');
        content.classList.toggle('expanded');
        
        // Add animation class
        if (isExpanding) {
            content.style.animation = 'fadeIn 0.4s ease-out';
        }
    }

    // Peach panic button functionality with drag
    const peachWrap = document.getElementById('peachWrap');
    const panicButton = document.getElementById('panicButton');
    let isDragging = false;
    let startX, startY, initialX, initialY;
    
    // Make the peach button draggable
    peachWrap.addEventListener('mousedown', dragStart);
    peachWrap.addEventListener('touchstart', dragStart, { passive: false });
    
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag, { passive: false });
    
    document.addEventListener('mouseup', dragEnd);
    document.addEventListener('touchend', dragEnd);
    
    function dragStart(e) {
        if (e.type === 'touchstart') {
            e.preventDefault();
            initialX = e.touches[0].clientX - peachWrap.offsetLeft;
            initialY = e.touches[0].clientY - peachWrap.offsetTop;
        } else {
            initialX = e.clientX - peachWrap.offsetLeft;
            initialY = e.clientY - peachWrap.offsetTop;
        }
        
        if (e.target === panicButton || e.target === peachWrap) {
            isDragging = true;
            peachWrap.style.transition = 'none'; // Disable transition during drag
        }
    }
    
    function drag(e) {
        if (isDragging) {
            e.preventDefault();
            
            let currentX, currentY;
            
            if (e.type === 'touchmove') {
                currentX = e.touches[0].clientX - initialX;
                currentY = e.touches[0].clientY - initialY;
            } else {
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
            }
            
            // Constrain to viewport boundaries
            currentX = Math.max(0, Math.min(currentX, window.innerWidth - peachWrap.offsetWidth));
            currentY = Math.max(0, Math.min(currentY, window.innerHeight - peachWrap.offsetHeight));
            
            peachWrap.style.left = currentX + 'px';
            peachWrap.style.top = currentY + 'px';
            peachWrap.style.right = 'auto';
            peachWrap.style.bottom = 'auto';
        }
    }
    
    function dragEnd() {
        isDragging = false;
        peachWrap.style.transition = 'all 0.3s ease'; // Re-enable transition
    }
    
    // Click functionality for the panic button
    panicButton.addEventListener('click', function(e) {
        if (!isDragging) {
            e.preventDefault();
            showEmergencyModal();
        }
    });
    
    panicButton.addEventListener('touchend', function(e) {
        if (!isDragging) {
            e.preventDefault();
            showEmergencyModal();
        }
    });

    // Emergency Modal functions
    function showEmergencyModal() {
        document.getElementById('emergencyModal').style.display = 'flex';
        // Add to history to allow back button to close modal
        window.history.pushState({modal: true}, '');
    }

    function closeEmergencyModal() {
        document.getElementById('emergencyModal').style.display = 'none';
        if (window.history.state && window.history.state.modal) {
            window.history.back();
        }
    }

    // Close modal when clicking outside or pressing Escape
    window.addEventListener('click', function(event) {
        if (event.target === document.getElementById('emergencyModal')) {
            closeEmergencyModal();
        }
    });
    
    window.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeEmergencyModal();
        }
    });
    
    // Handle browser back button for modal
    window.addEventListener('popstate', function(event) {
        if (document.getElementById('emergencyModal').style.display === 'flex') {
            closeEmergencyModal();
        }
    });

    // Polydrug Interaction Checker functionality for widget
    const widgetDrugA = document.getElementById('widget-drugA');
    const widgetDrugB = document.getElementById('widget-drugB');
    const widgetCheckBtn = document.getElementById('widget-checkBtn');
    const widgetResultBox = document.getElementById('widget-resultBox');
    
    // Simple interaction matrix for the widget
    const widgetInteractionMatrix = {
        'Cannabis': {
            'Cannabis': { level: 'üåà', text: 'Generally safe, but be mindful of set and setting.' },
            'Alcohol': { level: 'üíä', text: 'Increased dizziness and impairment. Go slow.' },
            'MDMA': { level: 'üåà', text: 'Generally safe, may help with anxiety on the comedown.' },
            'Cocaine': { level: 'üíä', text: 'Cardiovascular strain. Increased heart rate and anxiety risk.' },
            'Opioids': { level: 'üíÄ', text: 'Dangerous combination. High risk of respiratory depression.' },
            'Benzos': { level: 'üíä', text: 'Increased sedation. Risk of over-sedation and memory loss.' }
        },
        'Alcohol': {
            'Cannabis': { level: 'üíä', text: 'Increased dizziness and impairment. Go slow.' },
            'Alcohol': { level: 'üíÄ', text: 'Extreme risk of alcohol poisoning at high doses.' },
            'MDMA': { level: 'üíä', text: 'Increased dehydration risk. Avoid excessive alcohol.' },
            'Cocaine': { level: 'üíÄ', text: 'Creates cocaethylene, toxic to liver and heart.' },
            'Opioids': { level: 'üíÄ', text: 'Severe respiratory depression risk. Potentially fatal.' },
            'Benzos': { level: 'üíÄ', text: 'Extreme risk of respiratory depression and blackout.' }
        },
        'MDMA': {
            'Cannabis': { level: 'üåà', text: 'Generally safe, may help with anxiety on the comedown.' },
            'Alcohol': { level: 'üíä', text: 'Increased dehydration risk. Avoid excessive alcohol.' },
            'MDMA': { level: 'üíä', text: 'Increased neurotoxicity and overheating risk.' },
            'Cocaine': { level: 'üíÄ', text: 'Cardiovascular strain and overheating risk.' },
            'Opioids': { level: 'üíÄ', text: 'Increased sedation risk and respiratory depression.' },
            'Benzos': { level: 'üíä', text: 'Conflicting effects, may dull experience.' }
        },
        'Cocaine': {
            'Cannabis': { level: 'üíä', text: 'Cardiovascular strain. Increased heart rate and anxiety risk.' },
            'Alcohol': { level: 'üíÄ', text: 'Creates cocaethylene, toxic to liver and heart.' },
            'MDMA': { level: 'üíÄ', text: 'Cardiovascular strain and overheating risk.' },
            'Cocaine': { level: 'üíÄ', text: 'Extreme cardiovascular strain and overdose risk.' },
            'Opioids': { level: 'üíÄ', text: 'Conflicting effects, cardiovascular strain.' },
            'Benzos': { level: 'üíä', text: 'Conflicting effects, may increase anxiety.' }
        },
        'Opioids': {
            'Cannabis': { level: 'üíÄ', text: 'Dangerous combination. High risk of respiratory depression.' },
            'Alcohol': { level: 'üíÄ', text: 'Severe respiratory depression risk. Potentially fatal.' },
            'MDMA': { level: 'üíÄ', text: 'Increased sedation risk and respiratory depression.' },
            'Cocaine': { level: 'üíÄ', text: 'Conflicting effects, cardiovascular strain.' },
            'Opioids': { level: 'üíÄ', text: 'Extreme overdose risk. Never combine opioids.' },
            'Benzos': { level: 'üíÄ', text: 'Severe respiratory depression risk. Potentially fatal.' }
        },
        'Benzos': {
            'Cannabis': { level: 'üíä', text: 'Increased sedation. Risk of over-sedation and memory loss.' },
            'Alcohol': { level: 'üíÄ', text: 'Extreme risk of respiratory depression and blackout.' },
            'MDMA': { level: 'üíä', text: 'Conflicting effects, may dull experience.' },
            'Cocaine': { level: 'üíä', text: 'Conflicting effects, may increase anxiety.' },
            'Opioids': { level: 'üíÄ', text: 'Severe respiratory depression risk. Potentially fatal.' },
            'Benzos': { level: 'üíÄ', text: 'Increased sedation and respiratory depression risk.' }
        }
    };
    
    // Set up event listeners for widget
    widgetCheckBtn.addEventListener('click', checkWidgetInteraction);
    
    function checkWidgetInteraction() {
        const substanceA = widgetDrugA.value;
        const substanceB = widgetDrugB.value;
        
        if (!substanceA || !substanceB) {
            widgetResultBox.innerHTML = '<h4>Please select two substances</h4><p>Choose substances from both dropdown menus to check their interaction.</p>';
            return;
        }
        
        // Check if we have a defined interaction
        let interaction;
        if (widgetInteractionMatrix[substanceA] && widgetInteractionMatrix[substanceA][substanceB]) {
            interaction = widgetInteractionMatrix[substanceA][substanceB];
        } else if (widgetInteractionMatrix[substanceB] && widgetInteractionMatrix[substanceB][substanceA]) {
            interaction = widgetInteractionMatrix[substanceB][substanceA];
        } else {
            interaction = { level: '‚ö°', text: 'Limited data on this combination. Exercise caution and start with low doses.' };
        }
        
        // Display the result
        let levelClass = '';
        let levelText = '';
        
        switch(interaction.level) {
            case 'üåà':
                levelClass = 'safe';
                levelText = 'Low Concern';
                break;
            case '‚ö°':
                levelClass = 'caution';
                levelText = 'Caution';
                break;
            case 'üíä':
                levelClass = 'strong-caution';
                levelText = 'Strong Caution';
                break;
            case 'üíÄ':
                levelClass = 'danger';
                levelText = 'Dangerous';
                break;
        }
        
        widgetResultBox.innerHTML = `
            <h4>${substanceA} + ${substanceB} ‚Üí <span style="font-size: 1.2em;">${interaction.level}</span> ${levelText}</h4>
            <p>${interaction.text}</p>
        `;
    }

    // Search functionality
    const sitePages = [
        {title:"Home",url:"index.html",content:"PLURderapolis: Harm reduction for Minnesota ravers, mental health, consent, safer partying."},
        {title:"Panic Button",url:"panic.html",content:"Emergency panic button for instant access to help."},
        {title:"Emergency Guides",url:"emergency.html",content:"Step-by-step instructions for medical and crisis situations."},
        {title:"Polydrug Tool",url:"polydrug.html",content:"Check dangerous drug interactions and polydrug risks."},
        {title:"RX + Party Combos",url:"rx-combos.html",content:"Prescription drug and party drug combination risks."},
        {title:"Raver Health",url:"health.html",content:"Hydration, cooling, safety tips for events and raves."},
        {title:"Consent Basics",url:"consent.html",content:"Consent education for safer nightlife and festivals."},
        {title:"Accountability",url:"accountability.html",content:"Resources on community accountability and safer spaces."},
        {title:"Venues Guide",url:"venues-guide.html",content:"Minnesota venue information and safety guides."},
        {title:"Our Booth",url:"booth.html",content:"Information about our harm reduction booth services."},
        {title:"Seasonal Tips",url:"seasonal.html",content:"Tips for staying safe during hot summer raves or cold winters."},
        {title:"Sober Ravers",url:"sober.html",content:"Support and advice for enjoying raves without substances."},
        {title:"MN Resources",url:"resources.html",content:"Plan B, queer clinics, DV support, recovery, mental health."},
        {title:"Bad Trip Mode",url:"badtrip.html",content:"Calming visuals, grounding exercises, safe trip support."},
        {title:"Rejection-Based Violence Prevention",url:"rejection-based-violence.html",content:"Resources and strategies for preventing violence when someone says 'no'."},
        {title:"Fake Drugs & Alerts",url:"fake.html",content:"Information about counterfeit drugs circulating in Minnesota."}
    ];

    // Simple search implementation
    const searchInput = document.getElementById('searchInput');
    const results = document.getElementById('searchResults');

    searchInput.addEventListener('input', performSearch);
    searchInput.addEventListener('focus', performSearch);

    function performSearch(){
        const input = searchInput.value.toLowerCase();
        results.innerHTML = "";
        
        if(!input){
            results.style.display = "none";
            return;
        }
        
        const filtered = sitePages.filter(page =>
            page.title.toLowerCase().includes(input) ||
            page.content.toLowerCase().includes(input)
        );
        
        if(filtered.length > 0){
            const ul = document.createElement('ul');
            filtered.forEach(page=>{
                const li = document.createElement('li');
                li.innerHTML = "<strong>" + page.title + "</strong><br><small>" + page.content.substring(0,60) + "...</small>";
                li.onclick = ()=>{window.location.href = page.url;};
                ul.appendChild(li);
            });
            results.appendChild(ul);
            results.style.display = "block";
        } else {
            results.innerHTML = "<div style='padding:12px;'>No results found</div>";
            results.style.display = "block";
        }
    }

    // Close search results when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.search-container')) {
            results.style.display = 'none';
        }
    });

    // Mocktail slider functionality
    const mocktailScroll = document.getElementById('mocktailScroll');
    let isDown = false;
    let startX;
    let scrollLeft;

    mocktailScroll.addEventListener('mousedown', (e) => {
        isDown = true;
        mocktailScroll.classList.add('active');
        startX = e.pageX - mocktailScroll.offsetLeft;
        scrollLeft = mocktailScroll.scrollLeft;
    });

    mocktailScroll.addEventListener('mouseleave', () => {
        isDown = false;
        mocktailScroll.classList.remove('active');
    });

    mocktailScroll.addEventListener('mouseup', () => {
        isDown = false;
        mocktailScroll.classList.remove('active');
    });

    mocktailScroll.addEventListener('mousemove', (e) => {
        if(!isDown) return;
        e.preventDefault();
        const x = e.pageX - mocktailScroll.offsetLeft;
        const walk = (x - startX) * 2; // Scroll speed
        mocktailScroll.scrollLeft = scrollLeft - walk;
    });

    // Touch events for mobile
    mocktailScroll.addEventListener('touchstart', (e) => {
        isDown = true;
        mocktailScroll.classList.add('active');
        startX = e.touches[0].pageX - mocktailScroll.offsetLeft;
        scrollLeft = mocktailScroll.scrollLeft;
    });

    mocktailScroll.addEventListener('touchend', () => {
        isDown = false;
        mocktailScroll.classList.remove('active');
    });

    mocktailScroll.addEventListener('touchmove', (e) => {
        if(!isDown) return;
        e.preventDefault();
        const x = e.touches[0].pageX - mocktailScroll.offsetLeft;
        const walk = (x - startX) * 2;
        mocktailScroll.scrollLeft = scrollLeft - walk;
    });

    // Auto-expand first card on page load
    document.addEventListener('DOMContentLoaded', function() {
        const firstCard = document.querySelector('.section-card');
        if (firstCard) {
            firstCard.classList.add('expanded');
            firstCard.querySelector('.card-content').classList.add('expanded');
        }
    });
</script>

</body>
</html>
