<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers</title>
    <meta name="description" content="Minnesota's premier harm reduction resource for the electronic music community. Get emergency help, drug interaction info, and rave safety resources.">
    <meta name="keywords" content="harm reduction, Minnesota, rave, electronic music, drug safety, overdose prevention, Narcan, PLUR">
    <meta name="author" content="PLURderapolis">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://plurderapolis.org/">
    <meta property="og:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="og:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="og:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://plurderapolis.org/">
    <meta property="twitter:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="twitter:description" content="Minnesota's premier harm reduction resource for the electronic music community.">
    <meta property="twitter:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçë</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #0d0d0d;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
            background: radial-gradient(circle at bottom, #0d0d0d 0%, #1a001a 100%);
            padding-bottom: 70px;
        }

        /* Enhanced Minneapolis Skyline */
        .skyline-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            z-index: 0;
            overflow: hidden;
        }
        
        .skyline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, 
                rgba(0, 247, 224, 0.3) 0%, 
                transparent 20%,
                transparent 80%,
                rgba(255, 105, 180, 0.2) 100%
            );
            clip-path: polygon(
                0% 100%, 2% 70%, 4% 80%, 6% 60%, 8% 90%, 10% 50%,
                12% 70%, 14% 85%, 16% 65%, 18% 95%, 20% 55%, 22% 75%,
                24% 85%, 26% 60%, 28% 80%, 30% 90%, 32% 65%, 34% 75%,
                36% 100%, 38% 70%, 40% 85%, 42% 60%, 44% 95%, 46% 50%,
                48% 80%, 50% 70%, 52% 90%, 54% 60%, 56% 85%, 58% 75%,
                60% 100%, 62% 65%, 64% 90%, 66% 55%, 68% 80%, 70% 70%,
                72% 95%, 74% 60%, 76% 85%, 78% 75%, 80% 100%, 82% 65%,
                84% 90%, 86% 50%, 88% 80%, 90% 70%, 92% 95%, 94% 60%,
                96% 85%, 98% 75%, 100% 100%
            );
            filter: drop-shadow(0 0 8px #00f7e0) drop-shadow(0 0 16px #ff69b4);
            animation: skylineGlow 4s infinite alternate, glitch 5s infinite;
        }
        
        @keyframes skylineGlow {
            0% { filter: drop-shadow(0 0 8px #00f7e0) drop-shadow(0 0 16px #ff69b4); opacity: 0.8; }
            100% { filter: drop-shadow(0 0 12px #00f7e0) drop-shadow(0 0 24px #ff69b4); opacity: 1; }
        }
        
        @keyframes glitch {
            0%, 100% { transform: translateX(0); }
            5% { transform: translateX(-2px); }
            10% { transform: translateX(2px); }
            15% { transform: translateX(-1px); }
            20% { transform: translateX(1px); }
            50% { transform: translateX(0); }
        }

        .site-title {
            text-align: center;
            padding: 1rem 0;
            position: relative;
            z-index: 2;
            margin-top: 1rem;
        }
        
        .site-title h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: clamp(2rem,5vw,3rem);
            color: #00f7e0;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            background: linear-gradient(90deg, #00f7e0 0%, #a3f7ff 50%, #00f7e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shineMove 6s linear infinite;
            filter: drop-shadow(0 0 6px #00f7e0aa);
        }
        
        .site-title .tagline {
            font-family: 'Roboto', sans-serif;
            color: #88e9e3;
            font-size: 1rem;
            letter-spacing: 0.1em;
            margin-top: 0.25rem;
            font-weight: 600;
            text-transform: uppercase;
            opacity: 0.8;
        }
        
        @keyframes shineMove {0% {background-position: 100% 0;}100% {background-position: 0 0;}}

        .menu-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1100;
            cursor: pointer;
            width: 35px;
            height: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .menu-btn div {
            height: 5px;
            background: #00f7e0;
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        .menu-btn.active div:nth-child(1){ transform: rotate(45deg) translate(6px,6px);}
        .menu-btn.active div:nth-child(2){ opacity:0;}
        .menu-btn.active div:nth-child(3){ transform: rotate(-45deg) translate(7px,-7px);}
        
        .side-nav {
            position: fixed;
            top: 0;
            left: -260px;
            width: 260px;
            height: 100%;
            background: #3a0052;
            box-shadow: 2px 0 10px #000000aa;
            overflow-y: auto;
            transition: left 0.3s ease;
            padding-top: 70px;
            z-index:1000;
        }
        
        .side-nav.active { left:0;}
        .side-nav ul { list-style:none; padding:0;}
        .side-nav ul li { padding:0;}
        .side-nav ul li a {
            display:block; padding:12px 20px; color:#fff; text-decoration:none; border-bottom:1px solid #5d3a7d;
            font-weight:bold;
        }
        
        .side-nav ul li a:hover { background:#5d3a7d; }
        .side-nav ul li ul { display:none; padding-left:10px;}
        .side-nav ul li.show > ul { display:block; }
        .side-nav ul li ul li a { font-weight:normal; font-size:0.95rem; }

        /* Less obtrusive alert banner */
        .rave-alert-wrapper {
            background-color: rgba(26, 26, 26, 0.9);
            overflow: hidden;
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            position: relative;
            height: 2rem;
            display: flex;
            align-items: center;
            width: 100vw;
            z-index: 2;
            margin-top: 1rem;
            backdrop-filter: blur(4px);
        }
        
        .rave-alert-link {
            display: inline-block;
            white-space: nowrap;
            color: #ff69b4;
            font-size: 0.9rem;
            text-decoration: none;
            padding-left: 100%;
            animation: scroll-left 20s linear infinite;
        }
        
        @keyframes scroll-left {0%{transform:translateX(0);}100%{transform:translateX(-100%);}}

        .section {
            margin:1.5rem auto;
            padding:1rem 1.5rem;
            max-width:1000px;
            background-color:#3a0052;
            border-radius:10px;
            box-shadow:0 0 12px rgba(0,255,255,0.1);
            position: relative;
            z-index: 1;
        }
        
        .section h2 { color:#00f7e0; font-family:'Montserrat',sans-serif;}
        .section ul { padding-left:1.2rem;}
        .section ul li { margin-bottom:0.5rem;}
        
        .cta-button { 
            display:inline-block; 
            margin-top:0.8rem; 
            background:#00f7e0; 
            color:#2e003e; 
            padding:0.6rem 1.1rem; 
            border-radius:8px; 
            text-decoration:none; 
            font-weight:bold; 
            transition: all 0.2s;
        }
        
        .cta-button:hover{opacity:0.85; transform:scale(1.03);}

        .card-container { display:flex; flex-wrap:wrap; gap:1rem; justify-content:center;}
        .card { 
            background:#2a0036; 
            border-radius:10px; 
            padding:1rem; 
            width:280px; 
            box-shadow:0 0 15px rgba(255,111,145,0.3); 
            transition: all 0.2s; 
        }
        
        .card:hover { transform:scale(1.03); box-shadow:0 0 25px rgba(255,111,145,0.6); }
        .card h3 { color:#ff69b4; font-family:'Montserrat',sans-serif; margin-top:0;}
        .card p { font-size:0.95rem; }

        .search-container {
            position: relative;
            max-width: 500px;
            margin: 1rem auto;
            z-index: 100;
        }

        .search-bar { 
            display:flex; 
            position: relative;
        }
        
        .search-bar input{ 
            flex:1; 
            padding:12px; 
            border:none; 
            border-radius:5px 0 0 5px; 
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid #00f7e0;
        }
        
        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .search-bar button{ 
            padding:12px; 
            border:none; 
            background:#00f7e0; 
            color:#2e003e; 
            border-radius:0 5px 5px 0; 
            cursor:pointer; 
            font-weight: bold;
        }

        #searchResults { 
            position:absolute; 
            top:100%; 
            left:0; 
            right:0; 
            background:#3a0052; 
            max-height:250px; 
            overflow-y:auto; 
            border-radius:0 0 5px 5px; 
            display:none; 
            z-index:1004; 
            box-shadow:0 0 12px rgba(0,255,255,0.2);
            border: 1px solid #00f7e0;
            border-top: none;
        }
        
        #searchResults ul { list-style:none; padding:0; margin:0;}
        #searchResults li { padding:12px; border-bottom:1px solid #5d3a7d; cursor:pointer;}
        #searchResults li:hover { background:#5d3a7d; }
        #searchResults li:last-child { border-bottom: none; }

        /* Larger, swipeable peach button */
        #peachWrap {
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            z-index: 1002; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 6px;
            touch-action: none;
        }
        
        #panicButton {
            width: 80px; 
            height: 80px; 
            font-size: 3.5rem;
            background: radial-gradient(circle at 35% 35%, #ffb07c, #ff6f91);
            border-radius: 50% 50% 45% 55% / 60% 55% 45% 50%;
            position: relative;
            display: flex; 
            justify-content: center; 
            align-items: center;
            cursor: pointer; 
            text-decoration: none; 
            color: #fff;
            box-shadow: 0 0 15px #ff69b4, 0 0 30px #00f7e0;
            animation: emojiPulse 2s infinite;
            user-select: none;
        }
        
        #panicButton::before {
            content: "";
            position: absolute;
            top: -12px; 
            left: 30px;
            width: 20px; 
            height: 16px;
            background: linear-gradient(135deg, #7aff7a, #2eb62c);
            border-radius: 50%;
            transform: rotate(-20deg);
        }
        
        #panicButton:hover { 
            transform: scale(1.2);
            animation: none;
        }
        
        @keyframes emojiPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        footer {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: #aaa;
            text-align: center; 
            position: relative; 
            z-index: 2;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
        }
        
        footer hr {
            border-color: #444;
            margin-bottom: 1rem;
        }
        
        footer p {
            max-width: 800px;
            margin: 0.5rem auto;
        }
        
        footer ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }
        
        footer ul li a {
            color: #00f7e0;
            padding: 0 10px;
            text-decoration: none;
        }
        
        footer ul li a:hover {
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            .section {
                margin: 1rem;
                padding: 0.8rem;
            }
            
            .cta-button {
                padding: 0.5rem 0.8rem;
            }
            
            .card-container { 
                flex-direction: column; 
                align-items: center;
            }
            
            .search-container {
                width: 90%;
            }
            
            #panicButton {
                width: 70px;
                height: 70px;
                font-size: 3rem;
            }
        }

        /* NEW STYLES FOR EMERGENCY FEATURES */
        
        /* Emergency Modal */
        .emergency-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #3a0052;
            padding: 20px;
            border-radius: 10px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            border: 2px solid #00f7e0;
            box-shadow: 0 0 20px rgba(0, 247, 224, 0.5);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #00f7e0;
            padding-bottom: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            color: #00f7e0;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .emergency-steps {
            margin: 15px 0;
        }

        .emergency-steps ol {
            padding-left: 20px;
        }

        .emergency-steps li {
            margin-bottom: 10px;
        }

        .emergency-contact {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .emergency-contact h4 {
            color: #ff69b4;
            margin-bottom: 10px;
        }

        /* Mobile HUD Navigation */
        .mobile-hud {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(58, 0, 82, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            z-index: 1001;
            backdrop-filter: blur(5px);
            border-top: 1px solid #00f7e0;
        }

        .hud-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.7rem;
            padding: 5px;
            flex: 1;
            text-align: center;
        }

        .hud-btn span {
            font-size: 1.5rem;
            margin-bottom: 3px;
        }

        /* Performance optimizations */
        .performance-optimized {
            will-change: transform;
            backface-visibility: hidden;
        }
        
        /* Only show mobile HUD on mobile devices */
        @media (min-width: 768px) {
            .mobile-hud {
                display: none;
            }
        }

        /* Mini Polydrug Tool Preview Styles */
        .mini-polydrug {
            background: #2a0036;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border: 1px solid #5d3a7d;
        }
        
        .mini-drug-selectors {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .mini-drug-select {
            flex: 1;
            min-width: 120px;
        }
        
        .mini-drug-select label {
            display: block;
            margin-bottom: 5px;
            color: #00f7e0;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .mini-drug-select select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            background: #3a0052;
            color: white;
            border: 1px solid #00f7e0;
        }
        
        .mini-check-btn {
            background: #ff69b4;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            font-weight: bold;
            cursor: pointer;
            align-self: flex-end;
        }
        
        .mini-matrix {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            margin: 15px 0;
        }
        
        .mini-matrix-header {
            background: #5d3a7d;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .mini-matrix-cell {
            padding: 8px;
            text-align: center;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 40px;
            font-size: 0.9rem;
        }
        
        .safe { background-color: rgba(76, 175, 80, 0.3); }
        .caution { background-color: rgba(255, 193, 7, 0.3); }
        .danger { background-color: rgba(244, 67, 54, 0.3); }
        
        .mini-result {
            background: #3a0052;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #00f7e0;
        }
        
        .mini-result-text {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .mini-legend {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        
        .mini-legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
        }
        
        .mini-legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        
        .legend-safe { background-color: rgba(76, 175, 80, 0.3); }
        .legend-caution { background-color: rgba(255, 193, 7, 0.3); }
        .legend-danger { background-color: rgba(244, 67, 54, 0.3); }

        /* NEW: Story Section Styles */
        .story-section {
            background: #2a0036;
            border-radius: 10px;
            padding: 25px;
            margin: 30px auto;
            max-width: 1000px;
            border-left: 5px solid #ff69b4;
            position: relative;
            z-index: 1;
        }
        
        .story-section h2 {
            color: #00f7e0;
            font-family: 'Montserrat', sans-serif;
            margin-top: 0;
            text-align: center;
            font-size: 1.8rem;
        }
        
        .story-section p {
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 1.2rem;
        }
        
        .story-highlight {
            color: #ff69b4;
            font-weight: bold;
        }
        
        .story-emphasis {
            color: #00f7e0;
            font-weight: bold;
        }
        
        .story-section .cta-button {
            display: block;
            width: fit-content;
            margin: 25px auto 10px;
            background: #ff69b4;
            color: #1c0028;
            text-align: center;
        }

        /* NEW: Enhanced Card Styles with Resource Links */
        .resource-links {
            margin-top: 15px;
            border-top: 1px solid #5d3a7d;
            padding-top: 15px;
        }
        
        .resource-links h4 {
            color: #00f7e0;
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .resource-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .resource-links li {
            margin-bottom: 5px;
            font-size: 0.85rem;
        }
        
        .resource-links a {
            color: #ff69b4;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .resource-links a:hover {
            color: #00f7e0;
            text-decoration: underline;
        }

        /* NEW: Rejection-Based Violence Card Styles */
        .violence-prevention-card {
            background: linear-gradient(135deg, #2a0036 0%, #3a0052 100%);
            border-radius: 10px;
            padding: 1.5rem;
            width: 280px;
            box-shadow: 0 0 20px rgba(255, 111, 145, 0.4);
            transition: all 0.3s ease;
            border: 2px solid #ff69b4;
            position: relative;
            overflow: hidden;
        }
        
        .violence-prevention-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="%23ff69b4" stroke-width="0.5" stroke-dasharray="5,5" /></svg>');
            opacity: 0.1;
            z-index: 0;
        }
        
        .violence-prevention-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 0 30px rgba(255, 111, 145, 0.6);
        }
        
        .violence-prevention-card h3 {
            color: #ffb07c;
            font-family: 'Montserrat', sans-serif;
            margin-top: 0;
            font-size: 1.3rem;
            position: relative;
            z-index: 1;
        }
        
        .violence-prevention-card p {
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
        }
        
        .violence-prevention-card .cta-button {
            background: #ff69b4;
            color: #1c0028;
            position: relative;
            z-index: 1;
        }
        
        .violence-prevention-card .resource-links {
            border-top: 1px solid rgba(255, 105, 180, 0.5);
            position: relative;
            z-index: 1;
        }
        
        .violence-prevention-card .resource-links a {
            color: #ffb07c;
        }
        
        .violence-prevention-card .resource-links a:hover {
            color: #00f7e0;
        }
    </style>
    
    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "PLURderapolis",
      "url": "https://plurderapolis.org",
      "logo": "https://plurderapolis.org/logo.png",
      "description": "Harm reduction resources for Minnesota ravers and electronic music community",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Minneapolis",
        "addressRegion": "MN",
        "addressCountry": "USA"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "plurderapolis@gmail.com",
        "contactType": "Customer service"
      },
      "sameAs": [
        "https://www.instagram.com/plurderapolis"
      ]
    }
    </script>
</head>
<body>

<div class="skyline-container">
    <div class="skyline"></div>
</div>

<!-- Hamburger menu -->
<div class="menu-btn" id="menuBtn">
    <div></div><div></div><div></div>
</div>

<nav class="side-nav" id="sideNav">
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="#">Safety</a>
            <ul>
                <li><a href="panic.html">Panic Button</a></li>
                <li><a href="emergency.html">Emergency Guides</a></li>
                <li><a href="spiking.html">Drink Spiking</a></li>
                <li><a href="rejection-based-violence.html">Rejection-Based Violence</a></li>
            </ul>
        </li>
        <li><a href="#">Drug Info</a>
            <ul>
                <li><a href="polydrug.html">Polydrug Tool</a></li>
                <li><a href="rx-combos.html">RX + Party Combos</a></li>
                <li><a href="health.html">Raver Health</a></li>
            </ul>
        </li>
        <li><a href="#">Consent</a>
            <ul>
                <li><a href="consent.html">Consent Basics</a></li>
                <li><a href="accountability.html">Accountability</a></li>
            </ul>
        </li>
        <li><a href="#">Local Scene</a>
            <ul>
                <li><a href="venues-guide.html">Venues Guide</a></li>
                <li><a href="booth.html">Our Booth</a></li>
            </ul>
        </li>
        <li><a href="#">Extras</a>
            <ul>
                <li><a href="seasonal.html">Seasonal Tips</a></li>
                <li><a href="sober.html">Sober Ravers</a></li>
                <li><a href="resources.html">MN Resources</a></li>
            </ul>
        </li>
    </ul>
</nav>

<!-- Less obtrusive alert banner -->
<div class="rave-alert-wrapper">
    <a href="testing.html" class="rave-alert-link">
        üö® MN Drug Supply Alert: Gray Death circulating ‚Ä¢ Fake K = fentanyl + xylazine ‚Ä¢ Test before you trust ‚Ä¢ Carry Narcan ‚Ä¢ No solo dosing ‚Ä¢ Click for full info üñ§
    </a>
</div>

<!-- Site title -->
<div class="site-title">
    <h1>PLURderapolis</h1>
    <div class="tagline">Harm Reduction for Minnesota Ravers</div>
</div>

<!-- Search -->
<div class="search-container">
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search the site...">
        <button onclick="performSearch()">üîç</button>
    </div>
    <div id="searchResults"></div>
</div>

<!-- Mobile HUD Navigation -->
<div class="mobile-hud">
    <a href="panic.html" class="hud-btn">
        <span>üö®</span>
        Panic
    </a>
    <a href="polydrug.html" class="hud-btn">
        <span>üíä</span>
        Tool
    </a>
    <a href="resources.html" class="hud-btn">
        <span>üìö</span>
        Resources
    </a>
    <a href="venues-guide.html" class="hud-btn">
        <span>üìç</span>
        Local
    </a>
</div>

<!-- Sections -->
<div class="section">
    <h2>üí° What We Do</h2>
    <div class="card-container">
        <div class="card">
            <h3>üíä Harm Reduction</h3>
            <p>Narcan, test strips, interaction tools, and safety resources to keep our community safe.</p>
            <a class="cta-button" href="resources.html">Get Resources</a>
            
            <div class="resource-links">
                <h4>Related Resources:</h4>
                <ul>
                    <li><a href="testing.html">ü¶† Testing Resources & Fentanyl Info</a></li>
                    <li><a href="polydrug.html">üîÄ Polydrug Interaction Tool</a></li>
                    <li><a href="rx-combos.html">üíä RX + Party Drug Combos</a></li>
                    <li><a href="health.html">üå°Ô∏è Raver Health & Safer Use</a></li>
                    <li><a href="seasonal.html">üåû Seasonal Harm Reduction Tips</a></li>
                </ul>
            </div>
        </div>
        
        <div class="card">
            <h3>üß† Mental Health & Crisis</h3>
            <p>Peer support, Bad Trip Mode, and emergency resources for when things get difficult.</p>
            <a class="cta-button" href="emergency.html">Find Support</a>
            
            <div class="resource-links">
                <h4>Support Resources:</h4>
                <ul>
                    <li><a href="panic.html">üö® Panic Button & Emergency Protocols</a></li>
                    <li><a href="badtrip.html">üåÄ Bad Trip Support Guide</a></li>
                    <li><a href="resources.html#mentalhealth">üìû MN Mental Health Resources</a></li>
                    <li><a href="sober.html">üö´ Sober Raving & Recovery Support</a></li>
                    <li><a href="resources.html#crisis">üÜò Crisis Hotlines & Text Lines</a></li>
                </ul>
            </div>
        </div>
        
        <div class="card">
            <h3>üïäÔ∏è Consent & Culture</h3>
            <p>Building respectful communities and addressing harm through education and accountability.</p>
            <a class="cta-button" href="consent.html">Learn More</a>
            
            <div class="resource-links">
                <h4>Community Resources:</h4>
                <ul>
                    <li><a href="consent.html">‚úÖ Consent Basics & Boundaries</a></li>
                    <li><a href="accountability.html">‚öñÔ∏è Community Accountability</a></li>
                    <li><a href="spiking.html">üö´ Drink Spiking Prevention</a></li>
                    <li><a href="resources.html#dv">üõ°Ô∏è Domestic Violence Resources</a></li>
                    <li><a href="resources.html#lgbtq">üè≥Ô∏è‚Äçüåà LGBTQ+ Specific Resources</a></li>
                </ul>
            </div>
        </div>
        
        <!-- NEW: Rejection-Based Violence Prevention Card -->
        <div class="violence-prevention-card">
            <h3>üõ°Ô∏è Rejection-Based Violence Prevention</h3>
            <p>Resources and strategies for preventing violence when someone says 'no' or sets boundaries.</p>
            <a class="cta-button" href="rejection-based-violence.html">Learn More</a>
            
            <div class="resource-links">
                <h4>Prevention Resources:</h4>
                <ul>
                    <li><a href="rejection-based-violence.html#de-escalation">üîÑ De-escalation Techniques</a></li>
                    <li><a href="rejection-based-violence.html#bystander">üë• Bystander Intervention</a></li>
                    <li><a href="rejection-based-violence.html#safety">üß† Safety Planning</a></li>
                    <li><a href="rejection-based-violence.html#support">ü§ù Support Resources</a></li>
                </ul>
            </div>
        </div>
        
        <div class="card">
            <h3>üéâ Our Booth</h3>
            <p>Find our harm reduction booth at local events and festivals throughout Minnesota.</p>
            <a class="cta-button" href="booth.html">Find Our Booth</a>
            
            <div class="resource-links">
                <h4>Local Resources:</h4>
                <ul>
                    <li><a href="booth.html">üìç Booth Schedule & Locations</a></li>
                    <li><a href="venues-guide.html">üè¢ Venue Safety Guides</a></li>
                    <li><a href="resources.html#testing">üß™ Free Testing Locations</a></li>
                    <li><a href="resources.html#naloxone">üíä Narcan Distribution Sites</a></li>
                    <li><a href="resources.html#planb">‚ù§Ô∏è Plan B & Sexual Health</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="section">
    <h2>üîÄ Panic & Emergency Tools</h2>
    <div class="card-container">
        <div class="card performance-optimized">
            <h3>Panic Button</h3>
            <p>Immediate access to help in emergencies with one click.</p>
            <a class="cta-button" href="panic.html">Go</a>
        </div>
        <div class="card performance-optimized">
            <h3>Emergency Guides</h3>
            <p>Step-by-step instructions for common crises and medical emergencies.</p>
            <a class="cta-button" href="emergency.html">View</a>
        </div>
        <div class="card performance-optimized">
            <h3>Bad Trip Mode</h3>
            <p>Calming visuals & exercises to ride it out safely when things get overwhelming.</p>
            <a class="cta-button" href="badtrip.html" style="background-color:#ff6ec7; color:#1c0028;">Visit</a>
        </div>
    </div>
</div>

<!-- Mini Polydrug Tool Preview -->
<div class="section">
    <h2>üîÄ Polydrug Interaction Tool Preview</h2>
    <p>Check how different substances interact with each other. Select two substances to see their interaction:</p>
    
    <div class="mini-polydrug">
        <div class="mini-drug-selectors">
            <div class="mini-drug-select">
                <label for="miniDrug1">First Substance:</label>
                <select id="miniDrug1">
                    <option value="">Select a substance</option>
                    <option value="alcohol">üç∫ Alcohol</option>
                    <option value="mdma">‚ú® MDMA</option>
                    <option value="cannabis">üåø Cannabis</option>
                    <option value="opioids">üíä Opioids</option>
                </select>
            </div>
            <div class="mini-drug-select">
                <label for="miniDrug2">Second Substance:</label>
                <select id="miniDrug2">
                    <option value="">Select a substance</option>
                    <option value="alcohol">üç∫ Alcohol</option>
                    <option value="mdma">‚ú® MDMA</option>
                    <option value="cannabis">üåø Cannabis</option>
                    <option value="opioids">üíä Opioids</option>
                </select>
            </div>
            <button class="mini-check-btn" id="miniCheckBtn">Check</button>
        </div>
        
        <div class="mini-legend">
            <div class="mini-legend-item">
                <div class="mini-legend-color legend-safe"></div>
                <span>Generally Safe</span>
            </div>
            <div class="mini-legend-item">
                <div class="mini-legend-color legend-caution"></div>
                <span>Use Caution</span>
            </div>
            <div class="mini-legend-item">
                <div class="mini-legend-color legend-danger"></div>
                <span>Dangerous</span>
            </div>
        </div>
        
        <div class="mini-matrix">
            <!-- Header row -->
            <div class="mini-matrix-header"></div>
            <div class="mini-matrix-header"><span>üç∫</span></div>
            <div class="mini-matrix-header"><span>‚ú®</span></div>
            <div class="mini-matrix-header"><span>üåø</span></div>
            
            <!-- Alcohol row -->
            <div class="mini-matrix-header"><span>üç∫</span></div>
            <div class="mini-matrix-cell danger"><span>üíÄ</span></div>
            <div class="mini-matrix-cell danger"><span>üíÄ</span></div>
            <div class="mini-matrix-cell caution"><span>‚ö†Ô∏è</span></div>
            
            <!-- MDMA row -->
            <div class="mini-matrix-header"><span>‚ú®</span></div>
            <div class="mini-matrix-cell danger"><span>üíÄ</span></div>
            <div class="mini-matrix-cell danger"><span>üíÄ</span></div>
            <div class="mini-matrix-cell safe"><span>‚úÖ</span></div>
            
            <!-- Cannabis row -->
            <div class="mini-matrix-header"><span>üåø</span></div>
            <div class="mini-matrix-cell caution"><span>‚ö†Ô∏è</span></div>
            <div class="mini-matrix-cell safe"><span>‚úÖ</span></div>
            <div class="mini-matrix-cell safe"><span>‚úÖ</span></div>
        </div>
        
        <div id="miniResult" class="mini-result">
            <p>Select two substances to check interaction</p>
        </div>
        
        <p style="text-align: center; margin-top: 15px;">
            <a class="cta-button" href="polydrug.html">Open Full Interaction Tool</a>
        </p>
    </div>
</div>

<div class="section">
    <h2>üìö Resources</h2>
    <div class="card-container">
        <div class="card performance-optimized">
            <h3>MN Resources</h3>
            <p>Plan B, queer-friendly clinics, DV support, recovery help, and local Minnesota resources.</p>
            <a class="cta-button" href="resources.html">View</a>
        </div>
        <div class="card performance-optimized">
            <h3>Sober Ravers</h3>
            <p>Tips & support for enjoying the scene sober and recovery resources.</p>
            <a class="cta-button" href="sober.html">View</a>
        </div>
        <div class="card performance-optimized">
            <h3>Raver Health</h3>
            <p>Hydration, cooling, and drug safety tips for maintaining your health at events.</p>
            <a class="cta-button" href="health.html">View</a>
        </div>
    </div>
</div>

<!-- Our Story Section -->
<div class="story-section">
    <h2>Our Story</h2>
    <p><span class="story-highlight">PLURderapolis was built from years of grassroots harm reduction in Minnesota's nightlife and festival community.</span> From Project Peach booths at warehouse shows, clubs, and events like Intellephunk's The Great Beyond, to collaborations with local collectives, this work has always been about showing up where the scene lives.</p>
    
    <p>What began with direct care at the booth has grown into a broader mission: now creating an online hub of resources and tools designed for safer nightlife. The goal is simple; make harm reduction accessible anytime, anywhere, while keeping the culture strong and the community connected.</p>
    
    <p><span class="story-emphasis">PLURderapolis is here as your partners in shine, working to make Minnesota's nightlife safer, kinder, and, truly, Minnesota Nice again.</span></p>
    
    <a href="booth.html" class="cta-button">Learn About Our Booth</a>
</div>

<!-- Emergency Modal -->
<div class="emergency-modal" id="emergencyModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Emergency Assistance</h2>
            <button class="close-modal" onclick="closeEmergencyModal()">&times;</button>
        </div>
        <div class="emergency-steps">
            <h3>If someone is unresponsive:</h3>
            <ol>
                <li>Check for responsiveness - tap shoulder and shout</li>
                <li>Call 911 immediately</li>
                <li>Check breathing - look for chest movement</li>
                <li>Administer Narcan if available and trained</li>
                <li>Perform rescue breathing if not breathing</li>
                <li>Place in recovery position if breathing</li>
            </ol>
            
            <h3>Overdose signs:</h3>
            <ul>
                <li>Unresponsive to stimuli</li>
                <li>Slow or no breathing</li>
                <li>Pale or clammy skin</li>
                <li>Blue lips or fingertips</li>
                <li>Gurgling sounds</li>
            </ul>
        </div>
        
        <div class="emergency-contact">
            <h4>Minnesota Emergency Resources:</h4>
            <p>üÜò Crisis Text Line: Text "HOME" to 741741</p>
            <p>üÜò MN Poison Control: 1-800-222-1222</p>
            <p>üÜò Mobile Crisis Services: **CRISIS (**74747)</p>
        </div>
        
        <p style="margin-top: 20px; font-weight: bold;">
            Remember: Good Samaritan laws protect you when seeking help for an overdose.
        </p>
        
        <div style="margin-top: 20px;">
            <a href="panic.html" class="cta-button">More Panic Resources</a>
            <a href="emergency.html" class="cta-button" style="background-color: #ff6ec7;">Emergency Guides</a>
        </div>
    </div>
</div>

<!-- Larger, swipeable peach panic button -->
<div id="peachWrap">
    <div id="panicButton">üçë</div>
</div>

<!-- Footer -->
<footer>
    <hr/>
    <p>&copy; 2025 PLURderapolis ‚Äî Community Harm Reduction</p>
    <p>Your partners in shine ‚ú¶ <a href="mailto:plurderapolis@gmail.org" style="color:#00f7e0;">plurderapolis@gmail.org</a> | Instagram: <a href="https://www.instagram.com/plurderapolis" target="_blank" style="color:#00f7e0;">@plurderapolis</a></p>
    <p style="font-size:0.8rem;color:#ccc;">Disclaimer: PLURderapolis is a peer-run harm reduction resource for Minnesota ravers. The information provided is for educational purposes only and is not intended as medical or legal advice. Always consult with a qualified professional for concerns related to health, safety, or legal matters.</p>
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="panic.html">Panic</a></li>
        <li><a href="emergency.html">Emergency</a></li>
        <li><a href="polydrug.html">Polydrug</a></li>
        <li><a href="resources.html">Resources</a></li>
        <li><a href="rejection-based-violence.html">Violence Prevention</a></li>
    </ul>
</footer>

<script>
    // Hamburger toggle
    const menuBtn = document.getElementById('menuBtn');
    const sideNav = document.getElementById('sideNav');
    menuBtn.addEventListener('click',()=>{
        menuBtn.classList.toggle('active');
        sideNav.classList.toggle('active');
    });
    
    const navItems = document.querySelectorAll('.side-nav ul li');
    navItems.forEach(item=>{
        item.addEventListener('click',()=>{item.classList.toggle('show');});
    });

    // Peach panic button functionality with swipe
    const peachBtn = document.getElementById('panicButton');
    let startX, startY, distX, distY;
    const threshold = 50; // minimum distance for a swipe
    
    peachBtn.addEventListener('touchstart', function(e) {
        const touch = e.touches[0];
        startX = touch.clientX;
        startY = touch.clientY;
    });
    
    peachBtn.addEventListener('touchmove', function(e) {
        e.preventDefault(); // prevent scrolling while swiping
    });
    
    peachBtn.addEventListener('touchend', function(e) {
        const touch = e.changedTouches[0];
        distX = touch.clientX - startX;
        distY = touch.clientY - startY;
        
        // Check if it's a swipe (more horizontal than vertical and enough distance)
        if (Math.abs(distX) > Math.abs(distY) && Math.abs(distX) > threshold) {
            // Swipe detected - hide the button
            document.getElementById('peachWrap').style.display = 'none';
            
            // Show a temporary message that it can be reopened
            const message = document.createElement('div');
            message.textContent = 'Swipe down from top right to show emergency button';
            message.style.position = 'fixed';
            message.style.top = '20px';
            message.style.right = '20px';
            message.style.background = '#3a0052';
            message.style.color = 'white';
            message.style.padding = '10px';
            message.style.borderRadius = '5px';
            message.style.zIndex = '1003';
            message.style.border = '1px solid #00f7e0';
            document.body.appendChild(message);
            
            // Remove message after 3 seconds
            setTimeout(() => {
                document.body.removeChild(message);
            }, 3000);
            
            // Allow reopening by swiping down from top right
            let reopenStartY;
            document.addEventListener('touchstart', function reopenStart(e) {
                if (e.touches[0].clientY < 100 && e.touches[0].clientX > window.innerWidth - 100) {
                    reopenStartY = e.touches[0].clientY;
                }
            });
            
            document.addEventListener('touchend', function reopenEnd(e) {
                if (reopenStartY && e.changedTouches[0].clientY - reopenStartY > 100) {
                    document.getElementById('peachWrap').style.display = 'flex';
                    reopenStartY = null;
                    
                    // Remove these event listeners after reopening
                    document.removeEventListener('touchstart', reopenStart);
                    document.removeEventListener('touchend', reopenEnd);
                }
            });
        } else {
            // Regular tap - show emergency modal
            showEmergencyModal();
        }
    });
    
    peachBtn.addEventListener('click', function() {
        showEmergencyModal();
    });

    // Emergency Modal functions
    function showEmergencyModal() {
        document.getElementById('emergencyModal').style.display = 'flex';
        // Add to history to allow back button to close modal
        window.history.pushState({modal: true}, '');
    }

    function closeEmergencyModal() {
        document.getElementById('emergencyModal').style.display = 'none';
        if (window.history.state && window.history.state.modal) {
            window.history.back();
        }
    }

    // Close modal when clicking outside or pressing Escape
    window.addEventListener('click', function(event) {
        if (event.target === document.getElementById('emergencyModal')) {
            closeEmergencyModal();
        }
    });
    
    window.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeEmergencyModal();
        }
    });
    
    // Handle browser back button for modal
    window.addEventListener('popstate', function(event) {
        if (document.getElementById('emergencyModal').style.display === 'flex') {
            closeEmergencyModal();
        }
    });

    // Mini Polydrug Tool Preview functionality
    const miniDrug1 = document.getElementById('miniDrug1');
    const miniDrug2 = document.getElementById('miniDrug2');
    const miniCheckBtn = document.getElementById('miniCheckBtn');
    const miniResult = document.getElementById('miniResult');
    
    // Define interaction matrix for preview
    const interactionMatrix = {
        'alcohol': {
            'alcohol': { level: 'danger', text: 'Extreme risk of alcohol poisoning' },
            'mdma': { level: 'danger', text: 'Increased dehydration risk' },
            'cannabis': { level: 'caution', text: 'May increase dizziness' },
            'opioids': { level: 'danger', text: 'Severe respiratory depression risk' }
        },
        'mdma': {
            'alcohol': { level: 'danger', text: 'Increased dehydration risk' },
            'mdma': { level: 'danger', text: 'Greatly increases neurotoxicity' },
            'cannabis': { level: 'safe', text: 'Generally safe, may help with anxiety' },
            'opioids': { level: 'danger', text: 'Increased sedation risk' }
        },
        'cannabis': {
            'alcohol': { level: 'caution', text: 'May increase dizziness' },
            'mdma': { level: 'safe', text: 'Generally safe, may help with anxiety' },
            'cannabis': { level: 'safe', text: 'Generally safe' },
            'opioids': { level: 'caution', text: 'May increase sedation' }
        },
        'opioids': {
            'alcohol': { level: 'danger', text: 'Severe respiratory depression risk' },
            'mdma': { level: 'danger', text: 'Increased sedation risk' },
            'cannabis': { level: 'caution', text: 'May increase sedation' },
            'opioids': { level: 'danger', text: 'Extreme overdose risk' }
        }
    };
    
    // Set up event listeners for drug selects
    miniCheckBtn.addEventListener('click', checkMiniInteraction);
    
    function checkMiniInteraction() {
        const drug1 = miniDrug1.value;
        const drug2 = miniDrug2.value;
        
        if (!drug1 || !drug2) {
            miniResult.innerHTML = '<p>Please select two substances to check interaction</p>';
            return;
        }
        
        // Check if we have a defined interaction
        let interaction;
        if (interactionMatrix[drug1] && interactionMatrix[drug1][drug2]) {
            interaction = interactionMatrix[drug1][drug2];
        } else if (interactionMatrix[drug2] && interactionMatrix[drug2][drug1]) {
            interaction = interactionMatrix[drug2][drug1];
        } else {
            interaction = { level: 'caution', text: 'Limited data on this combination. Exercise caution.' };
        }
        
        // Display the result
        miniResult.innerHTML = `
            <div class="mini-result-text">${drug1} + ${drug2} ‚Üí <span style="font-size: 1.2rem;">${interaction.level === 'danger' ? 'üíÄ' : interaction.level === 'caution' ? '‚ö†Ô∏è' : '‚úÖ'}</span></div>
            <p>${interaction.text}</p>
        `;
    }

    // Search functionality
    const sitePages = [
        {title:"Home",url:"index.html",content:"PLURderapolis: Harm reduction for Minnesota ravers, mental health, consent, safer partying."},
        {title:"Panic Button",url:"panic.html",content:"Emergency panic button for instant access to help."},
        {title:"Emergency Guides",url:"emergency.html",content:"Step-by-step instructions for medical and crisis situations."},
        {title:"Polydrug Tool",url:"polydrug.html",content:"Check dangerous drug interactions and polydrug risks."},
        {title:"RX + Party Combos",url:"rx-combos.html",content:"Prescription drug and party drug combination risks."},
        {title:"Raver Health",url:"health.html",content:"Hydration, cooling, safety tips for events and raves."},
        {title:"Consent Basics",url:"consent.html",content:"Consent education for safer nightlife and festivals."},
        {title:"Accountability",url:"accountability.html",content:"Resources on community accountability and safer spaces."},
        {title:"Venues Guide",url:"venues-guide.html",content:"Minnesota venue information and safety guides."},
        {title:"Our Booth",url:"booth.html",content:"Information about our harm reduction booth services."},
        {title:"Seasonal Tips",url:"seasonal.html",content:"Tips for staying safe during hot summer raves or cold winters."},
        {title:"Sober Ravers",url:"sober.html",content:"Support and advice for enjoying raves without substances."},
        {title:"MN Resources",url:"resources.html",content:"Plan B, queer clinics, DV support, recovery, mental health."},
        {title:"Bad Trip Mode",url:"badtrip.html",content:"Calming visuals, grounding exercises, safe trip support."},
        {title:"Rejection-Based Violence Prevention",url:"rejection-based-violence.html",content:"Resources and strategies for preventing violence when someone says 'no'."}
    ];

    // Simple search implementation
    const searchInput = document.getElementById('searchInput');
    const results = document.getElementById('searchResults');

    searchInput.addEventListener('input', performSearch);
    searchInput.addEventListener('focus', performSearch);

    function performSearch(){
        const input = searchInput.value.toLowerCase();
        results.innerHTML = "";
        
        if(!input){
            results.style.display = "none";
            return;
        }
        
        const filtered = sitePages.filter(page =>
            page.title.toLowerCase().includes(input) ||
            page.content.toLowerCase().includes(input)
        );
        
        if(filtered.length > 0){
            const ul = document.createElement('ul');
            filtered.forEach(page=>{
                const li = document.createElement('li');
                li.innerHTML = "<strong>" + page.title + "</strong><br><small>" + page.content.substring(0,60) + "...</small>";
                li.onclick = ()=>{window.location.href = page.url;};
                ul.appendChild(li);
            });
            results.appendChild(ul);
            results.style.display = "block";
        } else {
            results.innerHTML = "<div style='padding:12px;'>No results found</div>";
            results.style.display = "block";
        }
    }

    // Close search results when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.search-container')) {
            results.style.display = 'none';
        }
    });

    // Service Worker Registration for Offline Functionality
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            // Only register service worker for emergency pages
            const emergencyPages = ['panic.html', 'emergency.html', 'spiking.html', 'badtrip.html'];
            const currentPage = window.location.pathname.split('/').pop();
            
            if (emergencyPages.includes(currentPage)) {
                navigator.serviceWorker.register('/sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            }
        });
    }
</script>

</body>
</html>
