<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers</title>
    <meta name="description" content="Minnesota's premier harm reduction resource for the electronic music community. Find Narcan, emergency guides, drug safety tools, and support.">
    <meta name="keywords" content="harm reduction, Minnesota, rave, electronic music, drug safety, overdose prevention, Narcan, Naloxone, PLUR, Minneapolis, St. Paul, fentanyl, xylazine, Good Samaritan Law">
    <meta name="author" content="PLURderapolis">
    
    <!-- Open Graph / Social Meta -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://plurderapolis.org/">
    <meta property="og:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="og:description" content="Your partners in shine. Find Narcan, emergency guides, and tools for safer nightlife in Minnesota.">
    <meta property="og:image" content="https://plurderapolis.org/images/social-preview.jpg">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="PLURderapolis ‚Äî Harm Reduction for Minnesota Ravers">
    <meta property="twitter:description" content="Your partners in shine. Find Narcan, emergency guides, and tools for safer nightlife in Minnesota.">
    <meta property="twitter:image" content="https://plurderapolis.org/images/social-preview.jpg">
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "PLURderapolis",
        "description": "Harm reduction resource for Minnesota's electronic music community",
        "url": "https://plurderapolis.org",
        "logo": "https://plurderapolis.org/images/logo.png",
        "sameAs": [
            "https://www.instagram.com/plurderapolis",
            "https://www.facebook.com/plurderapolis"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "email": "plurderapolis@gmail.com",
            "contactType": "Customer service"
        }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçë</text></svg>">
    
    <!-- Fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Inter:wght@300;400;500;600;700&display=swap">
    </noscript>
    
    <style>
        /* ========== CSS RESET & ROOT VARIABLES ========== */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        
        :root {
            /* Updated Color Palette with holographic feel */
            --electric-periwinkle: #8A82FF;
            --neon-aqua: #00F0FF;
            --deep-violet: #0A0619;
            --holo-pink: #FF69F0;
            --hologreen: #00FF9D;
            --holopurple: #B56BFF;
            --body-light: #E3E0FF;
            --charcoal-grey: #1A1A2E;
            --card-bg: rgba(26, 26, 46, 0.85);
            
            /* Functional Colors */
            --danger: #FF4757;
            --warning: #FFB300;
            --success: #00C896;
            
            /* Typography */
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Inter', sans-serif;
            
            /* Spacing & Effects */
            --border-radius: 16px;
            --transition-smooth: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --shadow-subtle: 0 12px 40px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 30px rgba(138, 130, 255, 0.5);
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 2rem;
        }
        
        body {
            font-family: var(--font-body);
            background-color: var(--deep-violet);
            color: var(--body-light);
            line-height: 1.7;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* ========== HOLOGRAPHIC BACKGROUND EFFECTS ========== */
        .holographic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            overflow: hidden;
            pointer-events: none;
        }
        
        .holo-grid {
            position: absolute;
            width: 200%;
            height: 200%;
            background-image: 
                linear-gradient(90deg, 
                    transparent 0%, 
                    rgba(138, 130, 255, 0.02) 1%, 
                    transparent 2%),
                linear-gradient(0deg, 
                    transparent 0%, 
                    rgba(0, 240, 255, 0.02) 1%, 
                    transparent 2%);
            background-size: 50px 50px;
            animation: holoGridMove 40s linear infinite;
            opacity: 0.3;
        }
        
        .holo-scanline {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--neon-aqua), 
                var(--holo-pink), 
                transparent);
            opacity: 0;
            animation: scanline 8s linear infinite;
        }
        
        .holo-particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 105, 240, 0.1);
            animation: floatParticle 20s infinite linear;
        }
        
        .glitch-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                transparent 45%, 
                rgba(255, 105, 240, 0.03) 50%, 
                transparent 55%);
            background-size: 200% 200%;
            animation: glitchShift 15s ease-in-out infinite;
            mix-blend-mode: overlay;
            opacity: 0.1;
        }
        
        @keyframes holoGridMove {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(0.5deg); }
        }
        
        @keyframes scanline {
            0% { 
                top: 0%; 
                opacity: 0.1;
                box-shadow: 0 0 20px var(--neon-aqua);
            }
            50% { 
                opacity: 0.3;
                box-shadow: 0 0 40px var(--neon-aqua);
            }
            100% { 
                top: 100%; 
                opacity: 0.1;
                box-shadow: 0 0 20px var(--neon-aqua);
            }
        }
        
        @keyframes floatParticle {
            0% { transform: translateY(100vh) translateX(0) rotate(0deg); }
            100% { transform: translateY(-100px) translateX(100px) rotate(360deg); }
        }
        
        @keyframes glitchShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes holographicGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 20px rgba(138, 130, 255, 0.3),
                    inset 0 0 20px rgba(138, 130, 255, 0.1);
            }
            50% { 
                box-shadow: 
                    0 0 30px rgba(255, 105, 240, 0.4),
                    inset 0 0 30px rgba(255, 105, 240, 0.2);
            }
        }
        
        @keyframes subtleFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(1deg); }
            66% { transform: translateY(5px) rotate(-1deg); }
        }
        
        @keyframes danceLights {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            25% { opacity: 0.5; transform: scale(1.1); }
            50% { opacity: 0.4; transform: scale(0.9); }
            75% { opacity: 0.6; transform: scale(1.05); }
        }
        
        /* ========== HEADER & LOGO (Like First Link) ========== */
        .site-header {
            text-align: center;
            padding: 2rem 1rem 1rem;
            position: relative;
            z-index: 2;
            background: linear-gradient(180deg, 
                rgba(10, 6, 25, 0.95) 0%,
                rgba(10, 6, 25, 0.7) 50%,
                transparent 100%);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(138, 130, 255, 0.2);
        }
        
        .site-title {
            font-family: var(--font-heading);
            font-weight: 800;
            font-size: clamp(2.5rem, 8vw, 4rem);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            background: linear-gradient(90deg, 
                var(--neon-aqua) 0%, 
                #a3f7ff 25%,
                var(--holo-pink) 50%,
                #ff9a7a 75%,
                var(--neon-aqua) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shineMove 8s linear infinite;
            filter: drop-shadow(0 0 8px rgba(0, 247, 224, 0.5));
            margin: 0;
        }
        
        .site-tagline {
            font-family: var(--font-body);
            color: var(--neon-aqua);
            font-size: 1.2rem;
            letter-spacing: 0.1em;
            margin-top: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            opacity: 0.9;
        }
        
        @keyframes shineMove {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* ========== EMERGENCY ALERT BANNER ========== */
        .alert-banner {
            background: linear-gradient(90deg, 
                rgba(255, 71, 87, 0.2) 0%,
                rgba(255, 105, 240, 0.3) 50%,
                rgba(255, 71, 87, 0.2) 100%);
            border-top: 1px solid var(--holo-pink);
            border-bottom: 1px solid var(--holo-pink);
            padding: 0.8rem 1rem;
            margin: 0;
            overflow: hidden;
            position: relative;
            z-index: 2;
            backdrop-filter: blur(5px);
        }
        
        .alert-scroll {
            display: inline-block;
            white-space: nowrap;
            padding-left: 100%;
            animation: scrollAlert 25s linear infinite;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            text-shadow: 0 0 10px var(--holo-pink);
        }
        
        .alert-scroll:hover {
            animation-play-state: paused;
        }
        
        @keyframes scrollAlert {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        /* ========== MOBILE NAVIGATION ========== */
        .mobile-nav-toggle {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1100;
            width: 3rem;
            height: 3rem;
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid var(--neon-aqua);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        
        .mobile-nav-toggle span {
            display: block;
            width: 24px;
            height: 2px;
            background: var(--neon-aqua);
            margin: 3px 0;
            transition: var(--transition-smooth);
            border-radius: 2px;
        }
        
        .mobile-nav-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .mobile-nav-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-nav-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        .mobile-nav {
            position: fixed;
            top: 0;
            left: -100%;
            width: 85%;
            max-width: 300px;
            height: 100vh;
            background: rgba(10, 6, 25, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1099;
            padding: 5rem 1.5rem 2rem;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-right: 1px solid rgba(138, 130, 255, 0.2);
        }
        
        .mobile-nav.active {
            left: 0;
        }
        
        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1098;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }
        
        .nav-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .nav-section {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(138, 130, 255, 0.2);
            padding-bottom: 1rem;
        }
        
        .nav-section h3 {
            color: var(--neon-aqua);
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.8rem 1rem;
            background: rgba(138, 130, 255, 0.1);
            border-radius: 8px;
            color: var(--body-light);
            text-decoration: none;
            transition: var(--transition-smooth);
            border-left: 3px solid transparent;
        }
        
        .nav-link:hover {
            background: rgba(138, 130, 255, 0.2);
            border-left-color: var(--neon-aqua);
            transform: translateX(5px);
        }
        
        .nav-link i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        /* ========== MAIN CONTENT LAYOUT ========== */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        /* Priority Sections - Top Level */
        .priority-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        /* Secondary Sections */
        .secondary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.2rem;
        }
        
        /* ========== COLLAPSIBLE CARDS ========== */
        .section-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(138, 130, 255, 0.2);
            overflow: hidden;
            transition: var(--transition-smooth);
            animation: fadeInUp 0.6s ease-out;
            position: relative;
        }
        
        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(138, 130, 255, 0.1) 0%,
                rgba(255, 105, 240, 0.05) 100%);
            z-index: -1;
            border-radius: var(--border-radius);
        }
        
        .section-card.priority {
            border: 2px solid var(--neon-aqua);
            animation: holographicGlow 4s ease-in-out infinite;
        }
        
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-glow);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .card-header {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-family: var(--font-heading);
            color: var(--neon-aqua);
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .card-icon {
            font-size: 1.8rem;
        }
        
        .collapse-toggle {
            background: none;
            border: none;
            color: var(--neon-aqua);
            font-size: 1.5rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition-smooth);
        }
        
        .collapse-toggle:hover {
            background: rgba(138, 130, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .card-content {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-content.expanded {
            padding: 0 1.5rem 1.5rem;
            max-height: 2000px;
        }
        
        .card-summary {
            color: rgba(227, 224, 255, 0.8);
            margin-bottom: 1rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        /* ========== ACTION BUTTONS ========== */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, 
                var(--electric-periwinkle) 0%,
                var(--holopurple) 100%);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            text-decoration: none;
            text-align: center;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(138, 130, 255, 0.4);
        }
        
        .action-btn.danger {
            background: linear-gradient(135deg, 
                var(--danger) 0%,
                #FF6B95 100%);
        }
        
        .action-btn.success {
            background: linear-gradient(135deg, 
                var(--success) 0%,
                #00E6C3 100%);
        }
        
        /* ========== PANIC PEACH MODULE (Like First Link) ========== */
        #panicPeachContainer {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            touch-action: none;
            cursor: move;
            filter: drop-shadow(0 0 10px rgba(255, 105, 240, 0.5));
            animation: subtleFloat 6s ease-in-out infinite;
        }
        
        #panicButton {
            width: 70px;
            height: 70px;
            font-size: 3rem;
            background: radial-gradient(circle at 35% 35%, #FFD166, #FF6B95);
            border-radius: 50% 50% 45% 55% / 60% 55% 45% 50%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            text-decoration: none;
            color: #fff;
            box-shadow: 
                0 0 20px var(--holo-pink),
                0 0 40px rgba(255, 105, 240, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
            user-select: none;
            transition: all 0.3s ease;
        }
        
        #panicButton::before {
            content: "";
            position: absolute;
            top: -8px;
            left: 22px;
            width: 15px;
            height: 12px;
            background: linear-gradient(135deg, #FF9A7A, #FF7A5A);
            border-radius: 50%;
            transform: rotate(-20deg);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        #panicButton:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 
                0 0 30px var(--holo-pink),
                0 0 60px rgba(255, 105, 240, 0.5),
                inset 0 0 30px rgba(255, 255, 255, 0.3);
            animation-play-state: paused;
        }
        
        #panicButton:active {
            transform: scale(0.95);
        }
        
        .panic-help-text {
            color: #FF9A7A;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255, 154, 122, 0.6);
            font-size: 0.9rem;
            text-align: center;
            animation: danceLights 2s infinite;
        }
        
        /* ========== TIMER WIDGET (Mobile Optimized) ========== */
        .timer-widget {
            background: rgba(26, 26, 46, 0.8);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid rgba(0, 240, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .timer-widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 0%, 
                rgba(0, 240, 255, 0.05) 50%, 
                transparent 100%);
            animation: timerGlow 3s ease-in-out infinite;
        }
        
        @keyframes timerGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
        
        .timer-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neon-aqua);
            text-align: center;
            margin: 1rem 0;
            font-family: var(--font-heading);
            text-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
        }
        
        .timer-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.8rem;
        }
        
        .timer-btn {
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            background: rgba(138, 130, 255, 0.2);
            color: white;
            font-family: var(--font-body);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        
        .timer-btn:hover {
            background: rgba(138, 130, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .timer-btn.primary {
            background: linear-gradient(135deg, 
                var(--neon-aqua) 0%,
                #00B7FF 100%);
        }
        
        /* ========== MOBILE HUD ========== */
        .mobile-hud {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 6, 25, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 0.8rem 0.5rem;
            z-index: 1001;
            border-top: 1px solid rgba(138, 130, 255, 0.3);
        }
        
        .hud-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--body-light);
            text-decoration: none;
            font-size: 0.7rem;
            padding: 0.5rem;
            flex: 1;
            text-align: center;
            transition: var(--transition-smooth);
            border-radius: 8px;
        }
        
        .hud-btn:hover {
            background: rgba(138, 130, 255, 0.2);
            color: var(--neon-aqua);
        }
        
        .hud-btn i {
            font-size: 1.3rem;
            margin-bottom: 4px;
        }
        
        /* ========== MODALS ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid var(--neon-aqua);
            box-shadow: var(--shadow-glow);
            animation: modalSlideIn 0.4s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(138, 130, 255, 0.3);
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--neon-aqua);
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition-smooth);
        }
        
        .modal-close:hover {
            background: rgba(138, 130, 255, 0.2);
            transform: rotate(90deg);
        }
        
        /* ========== SEARCH WIDGET ========== */
        .search-container {
            position: relative;
            max-width: 700px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        .search-box {
            display: flex;
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid var(--neon-aqua);
            border-radius: 50px;
            overflow: hidden;
            padding: 0.5rem;
        }
        
        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.9rem 1.5rem;
            color: var(--body-light);
            font-size: 1.1rem;
            outline: none;
        }
        
        .search-box button {
            background: var(--neon-aqua);
            color: var(--deep-violet);
            border: none;
            padding: 0.9rem 1.8rem;
            border-radius: 40px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        
        .search-box button:hover {
            background: var(--holo-pink);
        }
        
        /* ========== LEGAL DISCLAIMERS ========== */
        .legal-disclaimer {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 2rem 0;
            font-size: 0.85rem;
        }
        
        .legal-disclaimer h4 {
            color: var(--danger);
            margin-bottom: 0.8rem;
        }
        
        /* ========== FOOTER ========== */
        footer {
            margin-top: 3rem;
            padding: 2rem 1.5rem;
            background: rgba(10, 6, 25, 0.9);
            border-top: 1px solid rgba(138, 130, 255, 0.3);
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-section h4 {
            color: var(--neon-aqua);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .footer-links a {
            color: rgba(227, 224, 255, 0.8);
            text-decoration: none;
            transition: var(--transition-smooth);
            font-size: 0.9rem;
        }
        
        .footer-links a:hover {
            color: var(--neon-aqua);
            padding-left: 5px;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        
        .social-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.7rem 1.2rem;
            background: rgba(138, 130, 255, 0.1);
            border-radius: 30px;
            color: var(--body-light);
            text-decoration: none;
            transition: var(--transition-smooth);
        }
        
        .social-link:hover {
            background: var(--electric-periwinkle);
            color: var(--deep-violet);
            transform: translateY(-3px);
        }
        
        /* ========== RESPONSIVE DESIGN ========== */
        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }
            
            .priority-grid,
            .secondary-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .section-card {
                margin-bottom: 1rem;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .mobile-hud {
                display: flex;
            }
            
            #panicPeachContainer {
                bottom: 80px;
                right: 15px;
            }
            
            #panicButton {
                width: 60px;
                height: 60px;
                font-size: 2.5rem;
            }
            
            .timer-controls {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-hud {
                display: none;
            }
        }
        
        @media (min-width: 1024px) {
            .priority-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .secondary-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* ========== ACCESSIBILITY ========== */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        :focus-visible {
            outline: 2px solid var(--neon-aqua);
            outline-offset: 2px;
        }
        
        /* ========== UTILITY CLASSES ========== */
        .text-center {
            text-align: center;
        }
        
        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Holographic Background Effects -->
    <div class="holographic-bg">
        <div class="holo-grid"></div>
        <div class="holo-scanline"></div>
        <div class="glitch-layer"></div>
    </div>

    <!-- Header with Logo Like First Link -->
    <header class="site-header">
        <h1 class="site-title">PLURderapolis</h1>
        <div class="site-tagline">Harm Reduction for Minnesota Ravers</div>
    </header>

    <!-- Emergency Alert Banner -->
    <div class="alert-banner">
        <div class="alert-scroll">
            üö® MINNESOTA DRUG SUPPLY ALERT: Fentanyl present in fake pills and powders ‚Ä¢ Xylazine ("tranq") causes severe wounds ‚Ä¢ Test before you trust ‚Ä¢ Carry multiple doses of Narcan ‚Ä¢ Never use alone ‚Ä¢ Good Samaritan Law protects you when calling 911 for an overdose ‚Ä¢ üö®
        </div>
    </div>

    <!-- Mobile Navigation -->
    <button class="mobile-nav-toggle" id="mobileNavToggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="nav-overlay" id="navOverlay"></div>

    <nav class="mobile-nav" id="mobileNav" aria-label="Main navigation">
        <div class="nav-section">
            <h3 onclick="toggleNavSection(this)">
                üö® Emergency & Safety
                <span>‚ñº</span>
            </h3>
            <div class="nav-links">
                <a href="#panicSection" class="nav-link" onclick="showEmergencyModal()">
                    <i>üö®</i> Panic Button
                </a>
                <a href="#narcanSection" class="nav-link" onclick="scrollToSection('narcanSection')">
                    <i>üíä</i> Find Narcan
                </a>
                <a href="#emergencyModal" class="nav-link" onclick="showEmergencyModal()">
                    <i>üÜò</i> Emergency Guide
                </a>
                <a href="spiking.html" class="nav-link">
                    <i>üö´</i> Drink Spiking
                </a>
                <a href="badtrip.html" class="nav-link">
                    <i>üåà</i> Bad Trip Support
                </a>
            </div>
        </div>

        <div class="nav-section">
            <h3 onclick="toggleNavSection(this)">
                üî¨ Drug Information
                <span>‚ñº</span>
            </h3>
            <div class="nav-links">
                <a href="fake.html" class="nav-link">
                    <i>‚ö†Ô∏è</i> Fake Drug Alerts
                </a>
                <a href="polydrug.html" class="nav-link">
                    <i>‚ö°</i> Drug Interactions
                </a>
                <a href="rx-combos.html" class="nav-link">
                    <i>üíä</i> RX Combos
                </a>
                <a href="health.html" class="nav-link">
                    <i>üíö</i> Raver Health
                </a>
            </div>
        </div>

        <div class="nav-section">
            <h3 onclick="toggleNavSection(this)">
                ü§ù Community & Consent
                <span>‚ñº</span>
            </h3>
            <div class="nav-links">
                <a href="consent.html" class="nav-link">
                    <i>‚úÖ</i> Consent Basics
                </a>
                <a href="accountability.html" class="nav-link">
                    <i>‚öñÔ∏è</i> Accountability
                </a>
                <a href="rejection-based-violence.html" class="nav-link">
                    <i>üõ°Ô∏è</i> Violence Prevention
                </a>
            </div>
        </div>

        <div class="nav-section">
            <h3 onclick="toggleNavSection(this)">
                üìç Local Resources
                <span>‚ñº</span>
            </h3>
            <div class="nav-links">
                <a href="venues-guide.html" class="nav-link">
                    <i>üè¢</i> Venues Guide
                </a>
                <a href="booth.html" class="nav-link">
                    <i>üéâ</i> Our Booth
                </a>
                <a href="resources.html" class="nav-link">
                    <i>üìö</i> MN Resources
                </a>
            </div>
        </div>

        <div class="action-grid mt-2">
            <a href="https://www.venmo.com/u/plurderapolis" 
               target="_blank" 
               class="action-btn"
               onclick="logDonationClick()">
                <i>üíñ</i> Donate
            </a>
            <button class="action-btn success" onclick="showEmergencyModal()">
                <i>üÜò</i> Emergency Help
            </button>
        </div>
    </nav>

    <!-- Search Widget -->
    <div class="search-container">
        <div class="search-box">
            <input type="text" 
                   id="siteSearch" 
                   placeholder="Search for Narcan, emergency guides, drug testing, consent..."
                   aria-label="Search PLURderapolis resources">
            <button onclick="performSearch()" aria-label="Search">
                <i>üîç</i> Search
            </button>
        </div>
        <div id="searchResults" role="listbox" aria-label="Search results"></div>
    </div>

    <!-- Main Content -->
    <main class="main-container" id="mainContent">
        <!-- Priority Sections (Top Level) -->
        <div class="priority-grid">
            <!-- Emergency Tools Card -->
            <section class="section-card priority" id="panicSection">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üö®</span>
                        <h2>Emergency Tools</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Immediate access to life-saving resources. Minnesota Good Samaritan Law protects you when calling 911 for an overdose.
                    </p>
                    <div class="action-grid">
                        <button class="action-btn danger" onclick="showEmergencyModal()">
                            <i>üö®</i> Show Emergency Protocol
                        </button>
                        <a href="#narcanSection" class="action-btn" onclick="scrollToSection('narcanSection')">
                            <i>üíä</i> Find Narcan
                        </a>
                    </div>
                    <div class="timer-widget">
                        <h3 class="text-center">‚è∞ Reminders</h3>
                        <div class="timer-controls">
                            <button class="timer-btn primary" onclick="startTimer('water')">
                                üíß Water (60m)
                            </button>
                            <button class="timer-btn" onclick="startTimer('buddy')">
                                üë• Buddy Check (120m)
                            </button>
                            <button class="timer-btn" onclick="startTimer('eat')">
                                üçé Eat (180m)
                            </button>
                            <button class="timer-btn" onclick="toggleCustomization()">
                                ‚öôÔ∏è Customize
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Narcan & Overdose Response Card -->
            <section class="section-card priority" id="narcanSection">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üíä</span>
                        <h2>Narcan & Overdose Response</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        <strong>Naloxone (Narcan¬Æ)</strong> reverses opioid overdoses. Available at MN pharmacies without prescription.
                    </p>
                    
                    <div class="legal-disclaimer">
                        <h4>‚ö†Ô∏è Minnesota Good Samaritan Law</h4>
                        <p>MN Statute ¬ß604A.05 provides limited immunity for drug possession when seeking medical assistance for an overdose.</p>
                    </div>
                    
                    <div class="action-grid">
                        <a href="https://www.health.state.mn.us/communities/overdose/harmreduce/naloxone.html" 
                           target="_blank"
                           class="action-btn">
                            <i>üìç</i> Find Narcan in MN
                        </a>
                        <button class="action-btn" onclick="showNarcanModal()">
                            <i>üìã</i> How to Use
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Secondary Sections -->
        <div class="secondary-grid">
            <!-- Drug Information Card -->
            <section class="section-card">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üî¨</span>
                        <h2>Drug Information</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Test before you trust. Fentanyl test strips available at MN Department of Health.
                    </p>
                    <div class="nav-links">
                        <a href="fake.html" class="nav-link">
                            <i>‚ö†Ô∏è</i> Fake Drug Alerts
                        </a>
                        <a href="polydrug.html" class="nav-link">
                            <i>‚ö°</i> Drug Interaction Tool
                        </a>
                        <a href="rx-combos.html" class="nav-link">
                            <i>üíä</i> RX + Party Combos
                        </a>
                    </div>
                </div>
            </section>

            <!-- Consent & Community Card -->
            <section class="section-card">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">ü§ù</span>
                        <h2>Consent & Community</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Creating safer spaces through education and accountability.
                    </p>
                    <div class="nav-links">
                        <a href="consent.html" class="nav-link">
                            <i>‚úÖ</i> Consent Basics
                        </a>
                        <a href="rejection-based-violence.html" class="nav-link">
                            <i>üõ°Ô∏è</i> Violence Prevention
                        </a>
                        <a href="spiking.html" class="nav-link">
                            <i>üö´</i> Drink Spiking Info
                        </a>
                    </div>
                </div>
            </section>

            <!-- Sober Ravers Card -->
            <section class="section-card">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üö´</span>
                        <h2>Sober Ravers</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Enjoy the scene without substances. Mocktail recipes and sober support.
                    </p>
                    <div class="nav-links">
                        <a href="sober.html" class="nav-link">
                            <i>üçπ</i> Mocktail Recipes
                        </a>
                        <a href="resources.html#sober" class="nav-link">
                            <i>üí™</i> Sober Support
                        </a>
                    </div>
                </div>
            </section>

            <!-- Local Resources Card -->
            <section class="section-card">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üìç</span>
                        <h2>Local Resources</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Minnesota-specific harm reduction and support services.
                    </p>
                    <div class="nav-links">
                        <a href="venues-guide.html" class="nav-link">
                            <i>üè¢</i> Venue Safety Guide
                        </a>
                        <a href="booth.html" class="nav-link">
                            <i>üéâ</i> Our Harm Reduction Booth
                        </a>
                        <a href="resources.html" class="nav-link">
                            <i>üìö</i> MN Resources Directory
                        </a>
                    </div>
                </div>
            </section>

            <!-- About Us Card -->
            <section class="section-card">
                <div class="card-header" onclick="toggleCard(this)">
                    <div class="card-title">
                        <span class="card-icon">üìñ</span>
                        <h2>About Us</h2>
                    </div>
                    <button class="collapse-toggle" aria-expanded="false">+</button>
                </div>
                <div class="card-content">
                    <p class="card-summary">
                        Grassroots harm reduction for Minnesota's electronic music community since 2018.
                    </p>
                    <div class="action-grid">
                        <a href="booth.html" class="action-btn">
                            <i>üéâ</i> Visit Our Booth
                        </a>
                        <a href="https://www.venmo.com/u/plurderapolis" 
                           target="_blank"
                           class="action-btn success"
                           onclick="logDonationClick()">
                            <i>üíñ</i> Support Our Work
                        </a>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Panic Peach Module (Like First Link) -->
    <div id="panicPeachContainer">
        <div id="panicButton" 
             role="button" 
             aria-label="Emergency panic button" 
             tabindex="0"
             onclick="showEmergencyModal()">
            üçë
        </div>
        <div class="panic-help-text">HELP!</div>
    </div>

    <!-- Mobile Bottom HUD -->
    <nav class="mobile-hud" aria-label="Quick access toolbar">
        <a href="#panicSection" class="hud-btn" onclick="scrollToSection('panicSection')">
            <i>üö®</i> Panic
        </a>
        <a href="#narcanSection" class="hud-btn" onclick="scrollToSection('narcanSection')">
            <i>üíä</i> Narcan
        </a>
        <a href="resources.html" class="hud-btn">
            <i>üìö</i> Resources
        </a>
        <a href="badtrip.html" class="hud-btn">
            <i>üåà</i> Bad Trip
        </a>
        <a href="#search" class="hud-btn" onclick="document.getElementById('siteSearch').focus()">
            <i>üîç</i> Search
        </a>
    </nav>

    <!-- Footer -->
    <footer>
        <div class="footer-grid">
            <div class="footer-section">
                <h4>PLURderapolis</h4>
                <p style="color: rgba(227, 224, 255, 0.8); margin-bottom: 1rem;">
                    Your partners in shine. Safer nightlife through education, resources, and community care.
                </p>
                <div class="social-links">
                    <a href="https://www.instagram.com/plurderapolis" 
                       target="_blank" 
                       class="social-link">
                        <i>üì∑</i> Instagram
                    </a>
                    <a href="https://www.facebook.com/plurderapolis" 
                       target="_blank" 
                       class="social-link">
                        <i>üìò</i> Facebook
                    </a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Emergency Contacts</h4>
                <div class="footer-links">
                    <a href="tel:911">üìû 911 - Emergency</a>
                    <a href="tel:1-800-222-1222">‚ò†Ô∏è MN Poison Control: 1-800-222-1222</a>
                    <a href="tel:741741">üí¨ Crisis Text Line: Text HOME to 741741</a>
                    <a href="tel:612-873-3000">üè• Hennepin Healthcare ER: 612-873-3000</a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Quick Links</h4>
                <div class="footer-links">
                    <a href="#panicSection" onclick="scrollToSection('panicSection')">üö® Panic Button</a>
                    <a href="#narcanSection" onclick="scrollToSection('narcanSection')">üíä Find Narcan</a>
                    <a href="fake.html">‚ö†Ô∏è Fake Drug Alerts</a>
                    <a href="consent.html">‚úÖ Consent Basics</a>
                    <a href="legal-disclaimers-terms.html">‚öñÔ∏è Legal Disclaimers</a>
                </div>
            </div>
        </div>

        <!-- Legal Disclaimer -->
        <div class="legal-disclaimer mt-2">
            <h4>‚ö†Ô∏è Legal & Medical Disclaimer</h4>
            <p>
                <strong>PLURderapolis provides harm reduction education and resources only.</strong> 
                This is not medical or legal advice. Always consult with healthcare professionals 
                for medical concerns and legal professionals for legal advice.
            </p>
            <p class="mt-1">
                <strong>Minnesota Good Samaritan Law:</strong> Minnesota Statute ¬ß604A.05 provides 
                limited immunity from drug possession charges for individuals who seek medical 
                assistance for an overdose.
            </p>
            <p class="mt-1">
                Information about substance risks is based on current public health data and may 
                change. Always verify information with official sources.
            </p>
        </div>

        <div class="text-center mt-2">
            <p style="color: rgba(227, 224, 255, 0.6); font-size: 0.85rem;">
                &copy; 2025 PLURderapolis ‚Äî Community Harm Reduction<br>
                Minneapolis, Minnesota ‚Ä¢ <a href="mailto:plurderapolis@gmail.com" style="color: var(--neon-aqua);">plurderapolis@gmail.com</a>
            </p>
        </div>
    </footer>

    <!-- Emergency Modal -->
    <div class="modal" id="emergencyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üö® Emergency Overdose Response</h2>
                <button class="modal-close" onclick="closeModal('emergencyModal')" aria-label="Close">
                    &times;
                </button>
            </div>
            
            <div style="display: grid; gap: 1rem; margin: 1.5rem 0;">
                <div style="background: rgba(255, 71, 87, 0.1); padding: 1rem; border-radius: 8px;">
                    <h3 style="color: var(--danger); margin-bottom: 0.5rem;">1. CALL 911 IMMEDIATELY</h3>
                    <p>Say: "Someone is not breathing, suspected overdose." Give exact location.</p>
                </div>
                
                <div style="background: rgba(255, 179, 0, 0.1); padding: 1rem; border-radius: 8px;">
                    <h3 style="color: var(--warning); margin-bottom: 0.5rem;">2. CHECK RESPONSIVENESS</h3>
                    <p>Shake and shout. Check breathing - look for chest movement.</p>
                </div>
                
                <div style="background: rgba(0, 200, 150, 0.1); padding: 1rem; border-radius: 8px;">
                    <h3 style="color: var(--success); margin-bottom: 0.5rem;">3. GIVE NARCAN</h3>
                    <p>Nasal spray: Insert in nostril, press plunger. Injectable: Upper arm or thigh muscle.</p>
                </div>
                
                <div style="background: rgba(0, 183, 255, 0.1); padding: 1rem; border-radius: 8px;">
                    <h3 style="color: var(--neon-aqua); margin-bottom: 0.5rem;">4. RESCUE BREATHING</h3>
                    <p>If not breathing: Tilt head back, pinch nose, give 2 breaths every 5 seconds.</p>
                </div>
                
                <div style="background: rgba(138, 130, 255, 0.1); padding: 1rem; border-radius: 8px;">
                    <h3 style="color: var(--electric-periwinkle); margin-bottom: 0.5rem;">5. RECOVERY POSITION</h3>
                    <p>If breathing: Place on side to prevent choking. Stay until EMS arrives.</p>
                </div>
            </div>
            
            <div class="action-grid">
                <a href="https://www.health.state.mn.us/communities/overdose/harmreduce/naloxone.html" 
                   target="_blank"
                   class="action-btn">
                    <i>üìç</i> Find Narcan in MN
                </a>
                <button class="action-btn" onclick="closeModal('emergencyModal')">
                    <i>‚úÖ</i> I Understand
                </button>
            </div>
        </div>
    </div>

    <!-- Narcan Instructions Modal -->
    <div class="modal" id="narcanModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üíä How to Use Narcan (Naloxone)</h2>
                <button class="modal-close" onclick="closeModal('narcanModal')" aria-label="Close">
                    &times;
                </button>
            </div>
            
            <div style="margin: 1.5rem 0;">
                <h3 style="color: var(--neon-aqua); margin-bottom: 1rem;">Nasal Spray (Narcan¬Æ):</h3>
                <ol style="padding-left: 1.5rem; margin-bottom: 1.5rem;">
                    <li>Remove from package</li>
                    <li>Place tip in one nostril</li>
                    <li>Press plunger firmly</li>
                    <li>Wait 2-3 minutes</li>
                    <li>Repeat if no response</li>
                </ol>
                
                <h3 style="color: var(--neon-aqua); margin-bottom: 1rem;">Injectable (Generic Naloxone):</h3>
                <ol style="padding-left: 1.5rem;">
                    <li>Draw 1mL into syringe</li>
                    <li>Inject into upper arm, thigh, or buttock muscle</li>
                    <li>Wait 2-3 minutes</li>
                    <li>Repeat if no response</li>
                </ol>
            </div>
            
            <div class="legal-disclaimer">
                <p><strong>Important:</strong> Narcan effects last 30-90 minutes. Overdose may return. 
                Stay with person until EMS arrives.</p>
            </div>
        </div>
    </div>

    <script>
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            initializeHolographicEffects();
            initializeNavigation();
            initializePanicPeach();
            initializeSearch();
            initializeTimers();
            initializeCollapsibleCards();
            
            // Set all cards to collapsed by default
            document.querySelectorAll('.card-content').forEach(content => {
                content.style.maxHeight = '0';
            });
            
            console.log('PLURderapolis enhanced site initialized.');
        });

        // ========== HOLOGRAPHIC EFFECTS ==========
        function initializeHolographicEffects() {
            const bg = document.querySelector('.holographic-bg');
            
            // Create holographic particles
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'holo-particle';
                
                const size = 2 + Math.random() * 5;
                const colors = [
                    'rgba(138, 130, 255, 0.1)',
                    'rgba(0, 240, 255, 0.1)',
                    'rgba(255, 105, 240, 0.1)'
                ];
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.animationDelay = `${Math.random() * 20}s`;
                particle.style.animationDuration = `${15 + Math.random() * 20}s`;
                
                bg.appendChild(particle);
            }
            
            // Add multiple scanlines
            for (let i = 0; i < 3; i++) {
                const scanline = document.createElement('div');
                scanline.className = 'holo-scanline';
                scanline.style.animationDelay = `${i * 2.5}s`;
                bg.appendChild(scanline);
            }
        }

        // ========== NAVIGATION ==========
        function initializeNavigation() {
            const toggle = document.getElementById('mobileNavToggle');
            const nav = document.getElementById('mobileNav');
            const overlay = document.getElementById('navOverlay');
            
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                nav.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = nav.classList.contains('active') ? 'hidden' : '';
            });
            
            overlay.addEventListener('click', () => {
                toggle.classList.remove('active');
                nav.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            });
            
            // Close nav when clicking links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    toggle.classList.remove('active');
                    nav.classList.remove('active');
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
        }
        
        function toggleNavSection(element) {
            const section = element.parentElement;
            const isActive = section.classList.contains('active');
            
            // Close all other sections
            document.querySelectorAll('.nav-section').forEach(s => {
                if (s !== section) {
                    s.classList.remove('active');
                }
            });
            
            // Toggle current section
            section.classList.toggle('active');
            
            // Update arrow
            const arrow = element.querySelector('span');
            arrow.textContent = section.classList.contains('active') ? '‚ñ≤' : '‚ñº';
        }

        // ========== PANIC PEACH ==========
        function initializePanicPeach() {
            const peach = document.getElementById('panicPeachContainer');
            let isDragging = false;
            let startX, startY, initialX, initialY;
            
            peach.addEventListener('mousedown', startDrag);
            peach.addEventListener('touchstart', startDragTouch);
            
            function startDrag(e) {
                e.preventDefault();
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                initialX = peach.offsetLeft;
                initialY = peach.offsetTop;
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
            }
            
            function startDragTouch(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    isDragging = true;
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    initialX = peach.offsetLeft;
                    initialY = peach.offsetTop;
                    document.addEventListener('touchmove', dragTouch);
                    document.addEventListener('touchend', stopDrag);
                }
            }
            
            function drag(e) {
                if (!isDragging) return;
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                updatePosition(dx, dy);
            }
            
            function dragTouch(e) {
                if (!isDragging || e.touches.length !== 1) return;
                const dx = e.touches[0].clientX - startX;
                const dy = e.touches[0].clientY - startY;
                updatePosition(dx, dy);
            }
            
            function updatePosition(dx, dy) {
                let newX = initialX + dx;
                let newY = initialY + dy;
                
                // Keep within viewport
                newX = Math.max(10, Math.min(newX, window.innerWidth - peach.offsetWidth - 10));
                newY = Math.max(10, Math.min(newY, window.innerHeight - peach.offsetHeight - 10));
                
                peach.style.left = `${newX}px`;
                peach.style.top = `${newY}px`;
            }
            
            function stopDrag() {
                isDragging = false;
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('touchmove', dragTouch);
                document.removeEventListener('mouseup', stopDrag);
                document.removeEventListener('touchend', stopDrag);
                
                // Save position
                localStorage.setItem('peachPosition', JSON.stringify({
                    x: peach.offsetLeft,
                    y: peach.offsetTop
                }));
            }
            
            // Load saved position
            const savedPos = localStorage.getItem('peachPosition');
            if (savedPos) {
                const pos = JSON.parse(savedPos);
                peach.style.left = `${pos.x}px`;
                peach.style.top = `${pos.y}px`;
            }
            
            // Make peach keyboard accessible
            document.getElementById('panicButton').addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    showEmergencyModal();
                }
            });
        }

        // ========== COLLAPSIBLE CARDS ==========
        function initializeCollapsibleCards() {
            document.querySelectorAll('.card-header').forEach(header => {
                header.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('collapse-toggle')) {
                        toggleCard(this);
                    }
                });
            });
        }
        
        function toggleCard(header) {
            const card = header.closest('.section-card');
            const content = card.querySelector('.card-content');
            const toggle = card.querySelector('.collapse-toggle');
            const isExpanded = content.classList.contains('expanded');
            
            if (isExpanded) {
                content.classList.remove('expanded');
                content.style.maxHeight = '0';
                toggle.textContent = '+';
                toggle.setAttribute('aria-expanded', 'false');
            } else {
                content.classList.add('expanded');
                content.style.maxHeight = content.scrollHeight + 'px';
                toggle.textContent = '‚àí';
                toggle.setAttribute('aria-expanded', 'true');
            }
        }

        // ========== SEARCH FUNCTIONALITY ==========
        const siteIndex = [
            { title: "Emergency Tools", url: "#panicSection", category: "Emergency", icon: "üö®", content: "Panic button, emergency protocol, Narcan locations, overdose response" },
            { title: "Narcan Information", url: "#narcanSection", category: "Emergency", icon: "üíä", content: "How to use Narcan, where to get it in Minnesota, overdose reversal" },
            { title: "Drug Testing", url: "fake.html", category: "Safety", icon: "‚ö†Ô∏è", content: "Fentanyl test strips, fake drug alerts, substance testing" },
            { title: "Consent Education", url: "consent.html", category: "Community", icon: "‚úÖ", content: "Consent basics, boundaries, safer spaces" },
            { title: "Sober Resources", url: "sober.html", category: "Support", icon: "üö´", content: "Mocktail recipes, sober raver support" },
            { title: "Venue Safety", url: "venues-guide.html", category: "Local", icon: "üè¢", content: "Minnesota venue safety guides" },
            { title: "Harm Reduction Booth", url: "booth.html", category: "Local", icon: "üéâ", content: "PLURderapolis booth schedule and locations" },
            { title: "MN Resources Directory", url: "resources.html", category: "Local", icon: "üìö", content: "Minnesota-specific harm reduction resources" }
        ];
        
        function initializeSearch() {
            const input = document.getElementById('siteSearch');
            const results = document.getElementById('searchResults');
            
            input.addEventListener('input', debounce(performSearch, 300));
            
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    results.style.display = 'none';
                }
            });
        }
        
        function performSearch() {
            const query = document.getElementById('siteSearch').value.toLowerCase().trim();
            const results = document.getElementById('searchResults');
            results.innerHTML = '';
            
            if (!query) {
                results.style.display = 'none';
                return;
            }
            
            const matches = siteIndex.filter(item =>
                item.title.toLowerCase().includes(query) ||
                item.content.toLowerCase().includes(query) ||
                item.category.toLowerCase().includes(query)
            );
            
            if (matches.length > 0) {
                matches.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'nav-link';
                    div.style.cursor = 'pointer';
                    div.innerHTML = `
                        <i>${item.icon}</i>
                        <div style="flex-grow: 1;">
                            <strong>${item.title}</strong>
                            <div style="font-size: 0.8rem; opacity: 0.8;">${item.content.substring(0, 60)}...</div>
                        </div>
                        <span style="font-size: 0.7rem; opacity: 0.6;">${item.category}</span>
                    `;
                    
                    div.addEventListener('click', () => {
                        if (item.url.startsWith('#')) {
                            const target = document.querySelector(item.url);
                            if (target) {
                                scrollToSection(item.url.substring(1));
                                const header = target.querySelector('.card-header');
                                if (header) toggleCard(header);
                            }
                        } else {
                            window.location.href = item.url;
                        }
                        results.style.display = 'none';
                        document.getElementById('siteSearch').value = '';
                    });
                    
                    results.appendChild(div);
                });
                results.style.display = 'block';
            } else {
                results.innerHTML = '<div class="nav-link"><i>üîç</i><div>No results found. Try "Narcan", "emergency", or "consent".</div></div>';
                results.style.display = 'block';
            }
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ========== TIMER SYSTEM ==========
        let timers = {
            water: { running: false, endTime: null, interval: 60 },
            buddy: { running: false, endTime: null, interval: 120 },
            eat: { running: false, endTime: null, interval: 180 }
        };
        
        function initializeTimers() {
            loadTimerSettings();
            
            // Update timer displays every second
            setInterval(() => {
                Object.keys(timers).forEach(type => {
                    updateTimerDisplay(type);
                });
            }, 1000);
        }
        
        function startTimer(type) {
            const timer = timers[type];
            timer.running = true;
            timer.endTime = Date.now() + timer.interval * 60000; // Convert minutes to milliseconds
            saveTimerState();
            updateTimerDisplay(type);
            
            // Show notification if permission granted
            if (Notification.permission === 'granted') {
                new Notification(`‚è∞ ${getTimerTitle(type)}`, {
                    body: getTimerMessage(type),
                    icon: '/favicon.ico'
                });
            }
        }
        
        function updateTimerDisplay(type) {
            const timer = timers[type];
            if (!timer.running || !timer.endTime) return;
            
            const remaining = timer.endTime - Date.now();
            
            if (remaining <= 0) {
                timer.running = false;
                
                // Show alert
                alert(`‚è∞ Time to ${getTimerAction(type)}!`);
                
                // Request notification permission if needed
                if (Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }
        }
        
        function getTimerTitle(type) {
            switch(type) {
                case 'water': return 'Drink Water';
                case 'buddy': return 'Check on Buddy';
                case 'eat': return 'Eat Something';
                default: return 'Take a Break';
            }
        }
        
        function getTimerAction(type) {
            switch(type) {
                case 'water': return 'drink water';
                case 'buddy': return 'check on your buddy';
                case 'eat': return 'eat something';
                default: return 'take a break';
            }
        }
        
        function getTimerMessage(type) {
            switch(type) {
                case 'water': return 'Stay hydrated! Drink some water.';
                case 'buddy': return 'Reach out to your buddy and check in.';
                case 'eat': return 'Fuel your body with a healthy snack.';
                default: return 'Time for a quick break!';
            }
        }
        
        function saveTimerState() {
            localStorage.setItem('plurderapolisTimers', JSON.stringify(timers));
        }
        
        function loadTimerSettings() {
            const saved = localStorage.getItem('plurderapolisTimers');
            if (saved) {
                Object.assign(timers, JSON.parse(saved));
            }
        }
        
        function toggleCustomization() {
            const water = prompt('Water reminder interval (minutes):', timers.water.interval);
            const buddy = prompt('Buddy check interval (minutes):', timers.buddy.interval);
            const eat = prompt('Eat reminder interval (minutes):', timers.eat.interval);
            
            if (water && buddy && eat) {
                timers.water.interval = parseInt(water);
                timers.buddy.interval = parseInt(buddy);
                timers.eat.interval = parseInt(eat);
                saveTimerState();
                alert('Timer settings updated!');
            }
        }

        // ========== MODAL FUNCTIONS ==========
        function showEmergencyModal() {
            document.getElementById('emergencyModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function showNarcanModal() {
            document.getElementById('narcanModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Close modals with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = '';
            }
        });
        
        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // ========== HELPER FUNCTIONS ==========
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                
                // Expand the card if it's collapsed
                const card = element.closest('.section-card');
                const content = card.querySelector('.card-content');
                if (!content.classList.contains('expanded')) {
                    const header = card.querySelector('.card-header');
                    toggleCard(header);
                }
            }
        }
        
        function logDonationClick() {
            console.log('Donation link clicked - tracking analytics');
            // Analytics tracking would go here
        }

        // ========== MINNESOTA SPECIFIC LEGAL ==========
        function showMNGoodSamaritanInfo() {
            alert(`Minnesota Good Samaritan Law (MN Statute ¬ß604A.05):
            
Provides limited immunity from drug possession charges for individuals who:
1. Seek medical assistance for someone experiencing an overdose
2. Remain on scene until help arrives
3. Cooperate with medical personnel

This law encourages people to call 911 without fear of arrest for simple possession.`);
        }
    </script>
</body>
</html>
