<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PLURderapolis Polydrug Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- CSS Styling -->
  <style>
  /* === Global Styles === */
body {
  background: #1C1C1C;
  color: #F5F5F5;
  font-family: 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  padding: 0;
  line-height: 1.6;
}

h1, h2, h3 {
  color: #E040FB;
  text-align: center;
}

a {
  color: #E040FB;
}

header {
  text-align: center;
  padding: 1.5em;
  background: linear-gradient(135deg, #5D3A7D, #E040FB);
}

header h1 {
  margin: 0;
  font-size: 2em;
}

header .tagline {
  font-size: 0.9em;
  opacity: 0.8;
}

/* === Sections === */
section {
  margin: 2em auto;
  max-width: 900px;
  padding: 1.5em;
  background: #2A2A2A;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(224, 64, 251, 0.3);
}

button {
  background: #E040FB;
  border: none;
  padding: 0.7em 1.2em;
  margin: 0.3em;
  border-radius: 6px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #5D3A7D;
}

input[type="text"] {
  padding: 0.6em;
  margin: 0.3em;
  border-radius: 6px;
  border: 1px solid #5D3A7D;
  width: 28%;
  background: #1C1C1C;
  color: #F5F5F5;
}

input::placeholder {
  color: #aaa;
}

/* === Matrix === */
#matrixGrid {
  overflow-x: auto;
}

#matrixGrid table {
  border-collapse: collapse;
  width: 100%;
  text-align: center;
}

#matrixGrid th, #matrixGrid td {
  border: 1px solid #444;
  padding: 0.6em;
}

#matrixGrid th {
  background: #5D3A7D;
  color: #fff;
  position: sticky;
  top: 0;
}

#matrixGrid td {
  cursor: pointer;
  transition: background 0.2s;
}

#matrixGrid td:hover {
  background: rgba(224, 64, 251, 0.2);
}

/* === Results === */
.result-card {
  background: #1C1C1C;
  border: 2px solid #5D3A7D;
  padding: 1em;
  border-radius: 10px;
  margin: 1em 0;
}

.result-card h3 {
  margin-top: 0;
  color: #E040FB;
}

.risk-emoji {
  font-size: 1.8em;
}

.source-tag {
  display: inline-block;
  padding: 0.2em 0.5em;
  margin: 0.2em;
  background: #5D3A7D;
  color: #fff;
  border-radius: 6px;
  font-size: 0.8em;
}

/* === Accordion === */
.accordion button {
  width: 100%;
  background: #5D3A7D;
  border: none;
  padding: 1em;
  text-align: left;
  color: #fff;
  font-size: 1em;
  cursor: pointer;
  border-radius: 6px;
  margin: 0.3em 0;
}

.accordion-content {
  display: none;
  padding: 1em;
  background: #1C1C1C;
  border-left: 3px solid #E040FB;
  border-radius: 0 0 6px 6px;
}

.accordion button.active + .accordion-content {
  display: block;
}

/* === Footer === */
footer {
  text-align: center;
  padding: 2em;
  font-size: 0.9em;
  opacity: 0.8;
}
  </style>
</head>
<body>
  <header>
    <h1>‚ú® Polydrug Interaction Checker ‚ú®</h1>
    <p class="tagline">Merged from PLURderapolis, TripSit, DanceSafe & Impact SF</p>
  </header>

  <main>
    <!-- Checker Form -->
    <section id="checker">
      <h2>Check Your Combo</h2>
      <form id="interactionForm">
        <input type="text" id="drug1" placeholder="First substance" required>
        <input type="text" id="drug2" placeholder="Second substance" required>
        <input type="text" id="drug3" placeholder="(Optional) Third substance">
        <button type="submit">Check Risk</button>
        <button type="reset">Reset</button>
      </form>
    </section>

    <!-- Matrix comes before results -->
    <section id="matrix">
      <h2>Interaction Matrix</h2>
      <div id="matrixGrid"></div>
      <div class="export-tools">
        <button id="exportCSV">‚¨áÔ∏è Export CSV</button>
        <button id="exportPNG">üì∏ Export PNG</button>
      </div>
    </section>

    <!-- Results -->
    <section id="results">
      <h2>Results</h2>
      <div id="comboResult"></div>
    </section>

    <!-- Breakdown Accordions -->
    <section id="breakdowns">
      <h2>Common Risk Categories</h2>
      <div class="accordion">
        <button class="accordion-toggle">Stimulant + Stimulant ‚ö°‚ö°</button>
        <div class="accordion-content">
          <p>Increased strain on the heart, anxiety, dehydration, overheating.</p>
        </div>

        <button class="accordion-toggle">Stimulant + Depressant ‚ö°üí§</button>
        <div class="accordion-content">
          <p>Masks intoxication, higher overdose risk, unpredictable effects.</p>
        </div>

        <button class="accordion-toggle">Candy Flip (LSD + MDMA) üç≠</button>
        <div class="accordion-content">
          <p>Euphoria and visuals; but higher risk of overheating, serotonin syndrome.</p>
        </div>

        <button class="accordion-toggle">Hippie Flip (Mushrooms + MDMA) üçÑüíñ</button>
        <div class="accordion-content">
          <p>Warm visuals and emotions; can be overwhelming, dehydration risk.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p class="disclaimer">‚ö†Ô∏è This tool is for harm reduction education. No drug use is 100% safe.</p>
    <p class="sources">Sources: PLURderapolis, TripSit, DanceSafe, Impact SF</p>
    <p class="emergency">In an emergency, call 911. Carry Narcan. Don‚Äôt use alone.</p>
  </footer>

// === Dataset JSON ===
const interactions = {
  "Alcohol+MDMA": {
    risk: "‚ö†Ô∏è Caution",
    category: "Depressant + Stimulant",
    notes: "Alcohol increases dehydration, masks intoxication, and stresses the liver when combined with MDMA.",
    harmReduction: [
      "Avoid mixing if possible",
      "Sip water and electrolytes",
      "Take cooling breaks"
    ],
    sources: ["TripSit", "DanceSafe", "Impact SF"]
  },
  "MDMA+LSD": {
    risk: "‚ö° Moderate",
    category: "Candy Flip",
    notes: "Enhanced visuals and euphoria but higher risk of overheating and serotonin overload.",
    harmReduction: [
      "Stay hydrated",
      "Avoid redosing",
      "Have a trusted sober sitter"
    ],
    sources: ["TripSit", "PLURderapolis"]
  },
  "MDMA+Psilocybin": {
    risk: "‚ö° Moderate",
    category: "Hippie Flip",
    notes: "Emotional intensity and visuals; can be overwhelming with dehydration risk.",
    harmReduction: [
      "Stay cool and hydrated",
      "Dose carefully",
      "Use in safe, supportive settings"
    ],
    sources: ["DanceSafe", "Impact SF"]
  },
  "Alcohol+Benzodiazepines": {
    risk: "‚ùå Dangerous",
    category: "Depressant + Depressant",
    notes: "Severe risk of respiratory depression, blackout, overdose, and death.",
    harmReduction: [
      "Do NOT mix",
      "If consumed, avoid additional doses",
      "Never use alone"
    ],
    sources: ["TripSit", "DanceSafe"]
  },
  "Cocaine+MDMA": {
    risk: "‚ùå Dangerous",
    category: "Stimulant + Stimulant",
    notes: "Extreme strain on the heart, hypertension, high risk of arrhythmia and stroke.",
    harmReduction: [
      "Avoid combining",
      "Know your limits",
      "Have a sober friend nearby"
    ],
    sources: ["Impact SF", "TripSit"]
  },
  "Gabapentin+Alcohol": {
    risk: "‚ö†Ô∏è Caution",
    category: "Depressant + Depressant",
    notes: "Can enhance sedation, dizziness, and increase overdose risk.",
    harmReduction: [
      "Keep doses low",
      "Avoid mixing in high amounts",
      "Have someone you trust present"
    ],
    sources: ["PLURderapolis"]
  },
  "Ketamine+Alcohol": {
    risk: "‚ùå Dangerous",
    category: "Depressant + Depressant",
    notes: "Both suppress breathing and motor control, high accident and blackout risk.",
    harmReduction: [
      "Avoid mixing",
      "If taken, use very small amounts",
      "Stay seated and safe"
    ],
    sources: ["DanceSafe", "Impact SF"]
  },
  "Ketamine+MDMA": {
    risk: "‚ö†Ô∏è Caution",
    category: "Dissociative + Stimulant",
    notes: "Can be euphoric but increases nausea, disorientation, and risk of overheating.",
    harmReduction: [
      "Dose low",
      "Use in safe environment",
      "Stay cool"
    ],
    sources: ["TripSit", "Impact SF"]
  }
}
  <script>
    // Render
    const details = pairs.map(p=>{
      const r = p.entry ? p.entry.risk : 'üü°';
      const d = p.entry ? p.entry.notes || p.entry.category : 'No specific data; caution advised.';
      return `<p><strong>${p.a} + ${p.b}:</strong> <span class="risk-${r}">${r}</span> ‚Äî ${d}</p>`;
    }).join("");

    const worstDetails = renderDetails(worst);

    resultDiv.innerHTML = `
      <h4>Combo Breakdown</h4>
      ${details}
      <hr>
      <h4>Highest Risk in This Combo</h4>
      ${worstDetails}
    `;
  });
})();
  </script>
</body>
</html>
