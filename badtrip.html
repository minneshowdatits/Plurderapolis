<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Bad Trip Mode | PLURderapolis</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto&display=swap" rel="stylesheet">
<style>
body { font-family: 'Roboto', sans-serif; background:#1c0028; color:#eee; margin:0; padding:1rem; line-height:1.6; -webkit-font-smoothing:antialiased; }
h1,h2 { font-family:'Montserrat',sans-serif; text-align:center; margin:1rem 0; }
h1 { font-size:2rem; color:#ff6ec7; text-shadow:0 0 8px #ff6ec7aa; }
h2 { background:#2a0040; color:#00f7e0; padding:0.8rem; border-radius:8px; cursor:pointer; box-shadow:0 0 10px #00f7e055; transition:background 0.3s; }
h2:hover { background:#3a0055; }
.collapsible-content { display:none; padding:1rem; margin:0.5rem 0 1rem; background:#2a0040; border-radius:8px; box-shadow:0 0 15px #00000055; }
.collapsible-content.open { display:block; }
.top-controls { display:flex; justify-content:center; gap:1rem; margin:1rem 0; flex-wrap:wrap; }
.mode-btn { background:#00f7e0; color:#1c0028; font-family:'Montserrat',sans-serif; font-weight:600; border:none; border-radius:25px; padding:0.6rem 1rem; cursor:pointer; box-shadow:0 0 8px #00f7e0aa; transition:background 0.3s ease; }
.mode-btn:hover { background:#00d6c7; }
body.safe-mode { background:#111; color:#fff; }
body.safe-mode h2 { background:#222; color:#fff; box-shadow:none; }
body.safe-mode .collapsible-content { display:block !important; background:#111; box-shadow:none; }
body.safe-mode audio { display:none !important; }
.breathing-container { display:flex; justify-content:center; align-items:center; margin:1rem 0; flex-direction:column; gap:1rem; }
.breathing-shape { width:120px; height:120px; border-radius:50%; background:radial-gradient(circle,#ff6ec7 20%,#2a0040 90%); box-shadow:0 0 20px #ff6ec7aa; animation:breathe 8s infinite; }
@keyframes breathe {0%{transform:scale(1);opacity:0.7;}40%{transform:scale(1.4);opacity:1;}60%{transform:scale(1.4);opacity:1;}100%{transform:scale(1);opacity:0.7;}}
.square { border-radius:12px; background:#00f7e0; animation:squareBreathe 8s infinite; }
@keyframes squareBreathe {0%{transform:scale(1);opacity:0.7;}50%{transform:scale(1.3);opacity:1;}100%{transform:scale(1);opacity:0.7;}}
.wave { border-radius:50% 50% 50% 50%; background:linear-gradient(90deg,#ff6ec7,#00f7e0); animation:waveBreathe 8s infinite; }
@keyframes waveBreathe {0%{transform:scaleY(1);}50%{transform:scaleY(1.5);}100%{transform:scaleY(1);}}
.breath-options { display:flex; justify-content:center; gap:1rem; flex-wrap:wrap; margin-bottom:1rem; }
.breath-btn { padding:0.5rem 1rem; border-radius:25px; border:none; font-weight:600; cursor:pointer; background:#00f7e0; color:#1c0028; box-shadow:0 0 8px #00f7e0aa; }
.breath-btn:hover { background:#00d6c7; }
.groundBtn, .resource-btn, .audio-btn, .mantra-btn, .timer-btn { display:block; width:100%; margin:0.3rem 0; padding:0.6rem 1rem; font-family:'Montserrat',sans-serif; font-weight:600; border:none; border-radius:25px; cursor:pointer; text-align:center; }
.groundBtn { background:#00f7e0; color:#1c0028; box-shadow:0 0 8px #00f7e0aa; }
.groundBtn:hover { background:#00d6c7; }
.resource-btn { background:#ff6ec7; color:#1c0028; box-shadow:0 0 8px #ff6ec7aa; text-decoration:none; }
.resource-btn:hover { background:#ff49b2; }
.audio-btn { background:#00f7e0; color:#1c0028; box-shadow:0 0 8px #00f7e0aa; }
.audio-btn:hover { background:#00d6c7; }
.mantra-btn { background:#ff6ec7; color:#1c0028; box-shadow:0 0 8px #ff6ec7aa; }
.mantra-btn:hover { background:#ff49b2; }
.timer-btn { background:#00f7e0; color:#1c0028; box-shadow:0 0 8px #00f7e0aa; }
.timer-btn:hover { background:#00d6c7; }
.timer-display { font-size:2rem; font-weight:700; text-align:center; color:#ff6ec7; margin:1rem 0; text-shadow:0 0 8px #ff6ec7aa; }
.encouragement { text-align:center; font-weight:700; color:#00f7e0; margin:0.5rem 0; display:none; }
#progressContainer { width:100%; background:#222; border-radius:8px; height:12px; margin:1rem 0; }
#progressBar { width:0%; height:100%; background:#ff6ec7; border-radius:8px; transition:width 0.5s ease; }
footer { text-align:center; color:#aaa; margin:2rem 0 1rem; font-size:0.85rem; }
@media (max-width:480px){.breathing-shape{width:80px;height:80px;}.timer-display{font-size:1.5rem;}}
</style>
</head>
<body>
<header>
<h1>üçë Bad Trip Guide</h1>
<div class="top-controls">
  <button class="mode-btn" id="toggleSafe">Sensory Safe Mode</button>
  <button class="mode-btn" id="guidedMode">Guided Start</button>
  <button class="mode-btn" id="modularMode">Modular Mode</button>
</div>
<div id="progressContainer"><div id="progressBar"></div></div>
</header>

<main id="guideContent">

<!-- Breathing -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="breathing">üí® Breathing Exercise</h2>
<div id="breathing" class="collapsible-content">
<div class="breath-options">
  <button class="breath-btn" data-shape="breathing-shape">Circle</button>
  <button class="breath-btn" data-shape="square">Square</button>
  <button class="breath-btn" data-shape="wave">Wave</button>
</div>
<div class="breathing-container">
  <div id="breathShape" class="breathing-shape"></div>
</div>
</div>
</section>

<!-- Grounding -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="grounding">üå¨Ô∏è Ground Yourself</h2>
<div id="grounding" class="collapsible-content">
<p>Try the 5-4-3-2-1 grounding technique:</p>
<ul>
<li><strong>5 things</strong> you can see</li>
<li><strong>4 things</strong> you can touch</li>
<li><strong>3 things</strong> you can hear</li>
<li><strong>2 things</strong> you can smell</li>
<li><strong>1 thing</strong> you can taste</li>
</ul>
</div>
</section>

<!-- Soothing Sounds -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="sounds">üé∂ Soothing Sounds</h2>
<div id="sounds" class="collapsible-content">
<p>Click a button to play/pause a sound. Only one sound plays at a time.</p>
<div class="audio-controls">
<button class="audio-btn" data-sound="whiteNoise">White Noise</button>
<button class="audio-btn" data-sound="ocean">Ocean Waves</button>
<button class="audio-btn" data-sound="rain">Rain / Thunder</button>
<button class="audio-btn" data-sound="forest">Forest / Birds</button>
<button class="audio-btn" id="stopAll">Stop All</button>
</div>
<audio id="whiteNoise" loop src="https://cdn.pixabay.com/download/audio/2021/09/09/audio_9c5b5b9b4a.mp3?filename=white-noise-ambient-110351.mp3"></audio>
<audio id="ocean" loop src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_1774b82618.mp3?filename=ocean-waves-108554.mp3"></audio>
<audio id="rain" loop src="https://cdn.pixabay.com/download/audio/2021/09/07/audio_2792e7a5a0.mp3?filename=rain-ambient-108802.mp3"></audio>
<audio id="forest" loop src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_620e7b4e8b.mp3?filename=forest-ambience-120189.mp3"></audio>
</div>
</section>

<!-- Mantras -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="mantras">üß† Mantras to Remember</h2>
<div id="mantras" class="collapsible-content">
<p><em>"I took a substance. It will wear off. I am safe."</em></p>
<p><em>"This feeling is temporary. I am in control."</em></p>
<p><em>"I can breathe. I can wait."</em></p>
</div>
</section>

<!-- Check-In -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="checkin">üßç Check-In With Yourself</h2>
<div id="checkin" class="collapsible-content">
<ul>
<li>Am I hydrated? Drink water slowly.</li>
<li>Can I talk to a trusted friend or sitter?</li>
<li>Can I take slow, deep breaths?</li>
</ul>
</div>
</section>

<!-- Wait / Timer -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="wait">‚è≥ Just Wait</h2>
<div id="wait" class="collapsible-content">
<p>Give it 15 minutes. Panic will pass.</p>
<div class="timer-display" id="timer">15:00</div>
<div class="timer-controls">
<button class="timer-btn" id="startTimer">Start Timer</button>
<button class="timer-btn" id="resetTimer">Reset Timer</button>
</div>
</div>
</section>

<!-- Tripping at Shows -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="shows">üéµ Tripping at Shows ‚Äî Stay Safe</h2>
<div id="shows" class="collapsible-content">
<ul>
<li><strong>Hydrate:</strong> Drink water slowly, regularly.</li>
<li><strong>Eat:</strong> Light snacks; avoid heavy foods.</li>
<li><strong>Environment:</strong> Step outside or find a quiet spot if overwhelmed.</li>
<li><strong>Buddy System:</strong> Stay with trusted friends; check in frequently.</li>
<li><strong>Avoid:</strong> Mixing substances, overexertion, alcohol.</li>
<li><strong>Tools:</strong> Sunglasses, earplugs, calm breathing to reduce sensory overload.</li>
</ul>
</div>
</section>

<!-- Emergency Resources -->
<section class="step-section">
<h2 tabindex="0" role="button" aria-expanded="false" aria-controls="backup">üìû Need Backup?</h2>
<div id="backup" class="collapsible-content">
<ul>
<li><a href="https://tripsit.me/" target="_blank" class="resource-btn">TripSit Live Chat</a></li>
<li><a href="https://firesideproject.org/" target="_blank" class="resource-btn">Fireside Project</a></li>
<li><a href="https://neverusealone.com/" target="_blank" class="resource-btn">Never Use Alone</a></li>
</ul>
</div>
</section>

<footer>
<p>PLURderapolis &copy; 2025 ‚Äî Your partners in shine üçë</p>
</footer>

<script>
// Collapsible
document.querySelectorAll('section h2').forEach(header => {
  header.addEventListener('click', () => {
    const content = document.getElementById(header.getAttribute('aria-controls'));
    const isOpen = content.classList.toggle('open');
    header.setAttribute('aria-expanded', isOpen);
  });
});

// Sensory safe mode
const safeBtn = document.getElementById('toggleSafe');
safeBtn.addEventListener('click', () => document.body.classList.toggle('safe-mode'));

// Guided / Modular Mode
const guidedBtn = document.getElementById('guidedMode');
const modularBtn = document.getElementById('modularMode');
guidedBtn.addEventListener('click', () => {
  document.querySelectorAll('.collapsible-content').forEach(c=>c.classList.remove('open'));
  document.querySelectorAll('.step-section').forEach((s,i)=>{
    setTimeout(()=>s.querySelector('.collapsible-content').classList.add('open'), i*1000);
  });
});
modularBtn.addEventListener('click', () => document.querySelectorAll('.collapsible-content').forEach(c=>c.classList.remove('open')));

// Breathing Shapes
const breathBtns = document.querySelectorAll('.breath-btn');
const breathShape = document.getElementById('breathShape');
breathBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    breathShape.className = btn.getAttribute('data-shape');
  });
});

// Audio Controls
let currentAudio = null;
document.querySelectorAll('.audio-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const soundId = btn.getAttribute('data-sound');
    if(soundId==='stopAll'){
      document.querySelectorAll('audio').forEach(a=>{a.pause();a.currentTime=0;});
      currentAudio=null;
      return;
    }
    const audio=document.getElementById(soundId);
    if(currentAudio && currentAudio!==audio){currentAudio.pause(); currentAudio.currentTime=0;}
    if(audio.paused){audio.play(); currentAudio=audio;} else {audio.pause(); currentAudio=null;}
  });
});

// Timer
let timerInterval=null;
let time=900;
const timerDisplay=document.getElementById('timer');
function updateTimer(){const m=Math.floor(time/60).toString().padStart(2,'0');const s=(time%60).toString().padStart(2,'0');timerDisplay.textContent=`${m}:${s}`;}
document.getElementById('startTimer').addEventListener('click', ()=>{
  if(timerInterval) return;
  timerInterval=setInterval(()=>{time--; updateTimer(); if(time<=0){clearInterval(timerInterval);timerInterval=null;}},1000);
});
document.getElementById('resetTimer').addEventListener('click', ()=>{
  clearInterval(timerInterval); timerInterval=null; time=900; updateTimer();
});
updateTimer();
</script>
</body>
</html>
